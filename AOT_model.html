<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory AOT_model</title>
</head>


<body>
<!--
Github corner taken from: https://github.com/tholman/github-corners/
Licensed as:

The MIT License (MIT)

Copyright (c) 2016 Tim Holman

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//-->
<a href="https://github.com/ekpyron/AOT" class="github-corner" aria-label="View source on GitHub"><svg 
width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: fixed; top: 0; border: 
0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path 
d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 
123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" 
style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 
119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 
154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 
187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 
206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 
156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" 
class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms
ease-in-out}@keyframes
octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@medi
a (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner
.octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<style>
pre .linenumber {
  float:left;
  margin:0 1em 0 -1em;
  border-right:1px solid;
  text-align:right;
  color: black;
  width: 3em;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: moz-none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}

pre .linenumber span {
  display:block;
  padding:0 .5em 0 1em;
}
</style>
<div class="head">
<h1>Theory AOT_model</h1>
</div>

<pre class="source"><a name="L1" href="#L1"><span class="linenumber">1</span></a><span class="comment1">(*&lt;*)</span>
<a name="L2" href="#L2"><span class="linenumber">2</span></a><span class="keyword1"><span class="command">theory</span></span> AOT_model
<a name="L3" href="#L3"><span class="linenumber">3</span></a>  <span class="keyword2"><span class="keyword">imports</span></span> <a href="../../HOL/HOL/Main.html">Main</a> <span class="quoted">"<a href="../../HOL/HOL-Cardinals/Cardinals.html">HOL-Cardinals.Cardinals</a>"</span>
<a name="L4" href="#L4"><span class="linenumber">4</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L5" href="#L5"><span class="linenumber">5</span></a>
<a name="L6" href="#L6"><span class="linenumber">6</span></a><span class="keyword1"><span class="command">declare</span></span><span class="main">[</span><span class="main">[</span><span class="operator">typedef_overloaded</span><span class="main">]</span><span class="main">]</span>
<a name="L7" href="#L7"><span class="linenumber">7</span></a><span class="comment1">(*&gt;*)</span>
<a name="L8" href="#L8"><span class="linenumber">8</span></a>
<a name="L9" href="#L9"><span class="linenumber">9</span></a><span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹Model for the Logic of AOT›</span></span>
<a name="L10" href="#L10"><span class="linenumber">10</span></a>
<a name="L11" href="#L11"><span class="linenumber">11</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We introduce a primitive type for hyperintensional <span title="(192)">propositions</span>.›</span></span>
<a name="L12" href="#L12"><span class="linenumber">12</span></a><span class="keyword1"><span class="command">typedecl</span></span> 𝗈
<a name="L13" href="#L13"><span class="linenumber">13</span></a>
<a name="L14" href="#L14"><span class="linenumber">14</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹To be able to model modal operators following Kripke semantics,
<a name="L15" href="#L15"><span class="linenumber">15</span></a>     we introduce a primitive type for possible worlds and assert, by axiom,
<a name="L16" href="#L16"><span class="linenumber">16</span></a>     that there is a surjective function mapping <span title="(192)">propositions</span> to the
<a name="L17" href="#L17"><span class="linenumber">17</span></a>     boolean-valued functions acting on possible worlds. We call the result
<a name="L18" href="#L18"><span class="linenumber">18</span></a>     of applying this function to a proposition the Kripke-extension
<a name="L19" href="#L19"><span class="linenumber">19</span></a>     of the proposition.›</span></span>
<a name="L20" href="#L20"><span class="linenumber">20</span></a><span class="keyword1"><span class="command">typedecl</span></span> w <span class="comment1">―‹The primtive type of possible worlds.›</span>
<a name="L21" href="#L21"><span class="linenumber">21</span></a><span class="keyword1"><span class="command">axiomatization</span></span> <span class="free">AOT_model_d𝗈</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹𝗈<span class="main">⇒</span><span class="main">(</span>w<span class="main">⇒</span>bool<span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L22" href="#L22"><span class="linenumber">22</span></a>  d𝗈_surj<span class="main">:</span> <span class="quoted"><span class="quoted">‹surj <span class="free">AOT_model_d𝗈</span>›</span></span>
<a name="L23" href="#L23"><span class="linenumber">23</span></a>
<a name="L24" href="#L24"><span class="linenumber">24</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The axioms of PLM require the existence of a non-actual world.›</span></span>
<a name="L25" href="#L25"><span class="linenumber">25</span></a><span class="keyword1"><span class="command">consts</span></span> w<span class="hidden">⇩</span><sub>0</sub> <span class="main">::</span> <span class="quoted">w</span> <span class="comment1">―‹The designated <span title="(481)">actual</span> world.›</span>
<a name="L26" href="#L26"><span class="linenumber">26</span></a><span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> AOT_model_nonactual_world<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span> <span class="main">.</span> <span class="bound">w</span> <span class="main">≠</span> w<span class="hidden">⇩</span><sub>0</sub>›</span></span>
<a name="L27" href="#L27"><span class="linenumber">27</span></a>
<a name="L28" href="#L28"><span class="linenumber">28</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Validity of a proposition in a given world can now be modelled as the result
<a name="L29" href="#L29"><span class="linenumber">29</span></a>     of applying that world to the Kripke-extension of the proposition.›</span></span>
<a name="L30" href="#L30"><span class="linenumber">30</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_valid_in</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹w<span class="main">⇒</span>𝗈<span class="main">⇒</span>bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L31" href="#L31"><span class="linenumber">31</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_valid_in</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span> AOT_model_d𝗈 <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="free"><span class="bound"><span class="entity">w</span></span></span>›</span></span>
<a name="L32" href="#L32"><span class="linenumber">32</span></a>
<a name="L33" href="#L33"><span class="linenumber">33</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹By construction, we can choose a proposition for any given Kripke-extension,
<a name="L34" href="#L34"><span class="linenumber">34</span></a>     s.t. the proposition is valid in a possible world iff the Kripke-extension
<a name="L35" href="#L35"><span class="linenumber">35</span></a>     evaluates to true at that world.›</span></span>
<a name="L36" href="#L36"><span class="linenumber">36</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_proposition_choice</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span>w<span class="main">⇒</span>bool<span class="main">)</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">binder</span></span> <span class="quoted">‹<span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> ›</span> 8<span class="main">)</span>
<a name="L37" href="#L37"><span class="linenumber">37</span></a>  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="free">ε<span class="hidden">⇩</span><sub>𝗈</sub></span></span> <span class="bound">w</span><span class="main"><span class="free">.</span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">w</span> <span class="main">≡</span> <span class="main">(</span>inv AOT_model_d𝗈<span class="main">)</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span>›</span></span>
<a name="L38" href="#L38"><span class="linenumber">38</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_proposition_choice_simp<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="free">w</span> <span class="main">(</span><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">w</span><span class="main">)</span> <span class="main">=</span> <span class="free">φ</span> <span class="free">w</span>›</span></span>
<a name="L39" href="#L39"><span class="linenumber">39</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> surj_f_inv_f<span class="main"><span class="main">[</span></span><span class="operator">OF</span> d𝗈_surj<span class="main"><span class="main">]</span></span> AOT_model_valid_in_def
<a name="L40" href="#L40"><span class="linenumber">40</span></a>                AOT_model_proposition_choice_def<span class="main">)</span>
<a name="L41" href="#L41"><span class="linenumber">41</span></a>
<a name="L42" href="#L42"><span class="linenumber">42</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Nitpick can trivially show that there are models for the axioms above.›</span></span>
<a name="L43" href="#L43"><span class="linenumber">43</span></a><span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">‹True›</span></span> <span class="keyword1"><span class="command">nitpick</span></span><span class="main">[</span>satisfy<span class="main">,</span> user_axioms<span class="main">,</span> expect <span class="main">=</span> genuine<span class="main">]</span> <span class="keyword1"><span class="command">..</span></span>
<a name="L44" href="#L44"><span class="linenumber">44</span></a>
<a name="L45" href="#L45"><span class="linenumber">45</span></a><span class="keyword1"><span class="command">typedecl</span></span> ω <span class="comment1">―‹The primtive type of ordinary objects/urelements.›</span>
<a name="L46" href="#L46"><span class="linenumber">46</span></a>
<a name="L47" href="#L47"><span class="linenumber">47</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Validating extended relation comprehension requires a large set of
<a name="L48" href="#L48"><span class="linenumber">48</span></a>     special urelements. For simple models that do not validate extended
<a name="L49" href="#L49"><span class="linenumber">49</span></a>     relation comprehension (and consequently the predecessor axiom in the
<a name="L50" href="#L50"><span class="linenumber">50</span></a>     theory of natural numbers), it suffices to use a primitive type as <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">text</span></span> <span class="raw_text"><span class="raw_text">σ</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>,
<a name="L51" href="#L51"><span class="linenumber">51</span></a>     i.e. <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">theory_text</span></span> <span class="raw_text"><span class="raw_text">‹<span class="keyword1"><span class="command"><span class="keyword1"><span class="command">typedecl</span></span></span></span> σ›</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>.›</span></span>
<a name="L52" href="#L52"><span class="linenumber">52</span></a><span class="keyword1"><span class="command">typedecl</span></span> σ'
<a name="L53" href="#L53"><span class="linenumber">53</span></a><span class="keyword1"><span class="command">typedef</span></span> σ <span class="main">=</span> <span class="quoted"><span class="quoted">‹UNIV<span class="main">::</span><span class="main">(</span><span class="main">(</span>ω <span class="main">⇒</span> w <span class="main">⇒</span> bool<span class="main">)</span> set <span class="main">×</span> <span class="main">(</span>ω <span class="main">⇒</span> w <span class="main">⇒</span> bool<span class="main">)</span> set <span class="main">×</span> σ'<span class="main">)</span> set›</span></span> <span class="keyword1"><span class="command">..</span></span>
<a name="L54" href="#L54"><span class="linenumber">54</span></a>
<a name="L55" href="#L55"><span class="linenumber">55</span></a><span class="keyword1"><span class="command">typedecl</span></span> null <span class="comment1">― ‹Null-Urelements representing non-denoting terms.›</span>
<a name="L56" href="#L56"><span class="linenumber">56</span></a>
<a name="L57" href="#L57"><span class="linenumber">57</span></a><span class="keyword1"><span class="command">datatype</span></span> υ <span class="main">=</span> ωυ <span class="quoted">ω</span> <span class="main">|</span> συ <span class="quoted">σ</span> <span class="main">|</span> <span class="entity">is_nullυ</span><span class="main">:</span> nullυ <span class="quoted">null</span> <span class="comment1">― ‹Type of Urelements›</span>
<a name="L58" href="#L58"><span class="linenumber">58</span></a>
<a name="L59" href="#L59"><span class="linenumber">59</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Urrelations are proposition-valued functions on Urelements.
<a name="L60" href="#L60"><span class="linenumber">60</span></a>     Urrelations are required to evaluate to necessarily false <span title="(192)">propositions</span> for
<a name="L61" href="#L61"><span class="linenumber">61</span></a>     Null-Urelements (note that there may be several distinct necessarily false
<a name="L62" href="#L62"><span class="linenumber">62</span></a>     propositions).›</span></span>
<a name="L63" href="#L63"><span class="linenumber">63</span></a><span class="keyword1"><span class="command">typedef</span></span> urrel <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">{</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">¬</span>AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">φ</span> <span class="main">(</span>nullυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">}</span>›</span></span>
<a name="L64" href="#L64"><span class="linenumber">64</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">‹<span class="main"><span class="main"><span class="main">λ</span></span></span> <span class="bound"><span class="bound"><span class="bound">x</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="keyword1"><span class="keyword1"><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">¬</span></span></span>is_nullυ <span class="bound"><span class="bound"><span class="bound">x</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>›</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L65" href="#L65"><span class="linenumber">65</span></a>     <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L66" href="#L66"><span class="linenumber">66</span></a>
<a name="L67" href="#L67"><span class="linenumber">67</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Abstract objects will be modelled as sets of urrelations and will
<a name="L68" href="#L68"><span class="linenumber">68</span></a>     have to be mapped back surjectively into the set of special urelements.
<a name="L69" href="#L69"><span class="linenumber">69</span></a>     We show that any mapping from abstract objects to special urelements
<a name="L70" href="#L70"><span class="linenumber">70</span></a>     has to involve at least one large set of collapsed abstract objects.
<a name="L71" href="#L71"><span class="linenumber">71</span></a>     We will use this fact to extend arbitrary mappings from abstract objects
<a name="L72" href="#L72"><span class="linenumber">72</span></a>     to special urelements to surjective mappings.›</span></span>
<a name="L73" href="#L73"><span class="linenumber">73</span></a><span class="keyword1"><span class="command">lemma</span></span> ασ_pigeonhole<span class="main">:</span>
<a name="L74" href="#L74"><span class="linenumber">74</span></a>  <span class="comment1">― ‹For any arbitrary mapping <span class="antiquoted"><span class="antiquote">@{</span><span class="operator">term</span> <span class="quoted"><span class="free">ασ</span></span><span class="antiquote">}</span></span> from sets of urrelations to special
<a name="L75" href="#L75"><span class="linenumber">75</span></a>     urelements, there exists an abstract object x, s.t. the cardinal of the set
<a name="L76" href="#L76"><span class="linenumber">76</span></a>     of special urelements is strictly smaller than the cardinal of the set of
<a name="L77" href="#L77"><span class="linenumber">77</span></a>     abstract objects that are mapped to the same urelement as x under <span class="antiquoted"><span class="antiquote">@{</span><span class="operator">term</span> <span class="quoted"><span class="free">ασ</span></span><span class="antiquote">}</span></span>.›</span>
<a name="L78" href="#L78"><span class="linenumber">78</span></a>  <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">.</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span> <span class="keyword1">&lt;o</span> <span class="main">|</span><span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">|</span>›</span></span>
<a name="L79" href="#L79"><span class="linenumber">79</span></a>  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">ασ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set <span class="main">⇒</span> σ›</span></span>
<a name="L80" href="#L80"><span class="linenumber">80</span></a><span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
<a name="L81" href="#L81"><span class="linenumber">81</span></a>  <span class="keyword1"><span class="command">have</span></span> card_σ_set_set_bound<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>σ set set<span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>urrel set<span class="main">|</span>›</span></span>
<a name="L82" href="#L82"><span class="linenumber">82</span></a>  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L83" href="#L83"><span class="linenumber">83</span></a>    <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?pick</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">u</span> <span class="bound">s</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="keyword1">case</span> <span class="bound">u</span> <span class="keyword1">of</span> <span class="main">(</span>συ <span class="bound">s'</span><span class="main">)</span> <span class="main">⇒</span> <span class="bound">s'</span> <span class="main">∈</span> <span class="bound">s</span> <span class="main">|</span> <span class="main"><span class="bound">_</span></span> <span class="main">⇒</span> False›</span></span>
<a name="L84" href="#L84"><span class="linenumber">84</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">::</span> σ set <span class="main">⇒</span> urrel <span class="main">.</span> inj <span class="bound">f</span>›</span></span>
<a name="L85" href="#L85"><span class="linenumber">85</span></a>    <span class="keyword1"><span class="command">proof</span></span>
<a name="L86" href="#L86"><span class="linenumber">86</span></a>      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹inj <span class="main">(</span><span class="main">λ</span><span class="bound">s</span> <span class="main">.</span> Abs_urrel <span class="main">(</span><span class="main">λ</span><span class="bound">u</span> <span class="main">.</span> <span class="var">?pick</span> <span class="bound">u</span> <span class="bound">s</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L87" href="#L87"><span class="linenumber">87</span></a>      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> injI<span class="main">)</span>
<a name="L88" href="#L88"><span class="linenumber">88</span></a>        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
<a name="L89" href="#L89"><span class="linenumber">89</span></a>        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹Abs_urrel <span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="var">?pick</span> <span class="bound">u</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> Abs_urrel <span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="var">?pick</span> <span class="bound">u</span> <span class="skolem">y</span><span class="main">)</span>›</span></span>
<a name="L90" href="#L90"><span class="linenumber">90</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="var">?pick</span> <span class="bound">u</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="var">?pick</span> <span class="bound">u</span> <span class="skolem">y</span><span class="main">)</span>›</span></span>
<a name="L91" href="#L91"><span class="linenumber">91</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> Abs_urrel_inject<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> iffD1<span class="main"><span class="main">]</span></span>
<a name="L92" href="#L92"><span class="linenumber">92</span></a>                     <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L93" href="#L93"><span class="linenumber">93</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in w<span class="hidden">⇩</span><sub>0</sub> <span class="main">(</span><span class="var">?pick</span> <span class="main">(</span>συ <span class="skolem">s</span><span class="main">)</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L94" href="#L94"><span class="linenumber">94</span></a>               AOT_model_valid_in w<span class="hidden">⇩</span><sub>0</sub> <span class="main">(</span><span class="var">?pick</span> <span class="main">(</span>συ <span class="skolem">s</span><span class="main">)</span> <span class="skolem">y</span><span class="main">)</span>›</span></span>
<a name="L95" href="#L95"><span class="linenumber">95</span></a>          <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">s</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<a name="L96" href="#L96"><span class="linenumber">96</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">s</span> <span class="main">∈</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">∈</span> <span class="skolem">y</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">s</span>
<a name="L97" href="#L97"><span class="linenumber">97</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L98" href="#L98"><span class="linenumber">98</span></a>        <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>›</span></span>
<a name="L99" href="#L99"><span class="linenumber">99</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L100" href="#L100"><span class="linenumber">100</span></a>      <span class="keyword1"><span class="command">qed</span></span>
<a name="L101" href="#L101"><span class="linenumber">101</span></a>    <span class="keyword1"><span class="command">qed</span></span>
<a name="L102" href="#L102"><span class="linenumber">102</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L103" href="#L103"><span class="linenumber">103</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> card_of_image inj_imp_surj_inv<span class="main">)</span>
<a name="L104" href="#L104"><span class="linenumber">104</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L105" href="#L105"><span class="linenumber">105</span></a>
<a name="L106" href="#L106"><span class="linenumber">106</span></a>  <span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Assume, for a proof by contradiction, that there is no large collapsed set.›</span></span>
<a name="L107" href="#L107"><span class="linenumber">107</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∄</span><span class="bound">x</span> <span class="main">.</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span> <span class="keyword1">&lt;o</span> <span class="main">|</span><span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">|</span>›</span></span>
<a name="L108" href="#L108"><span class="linenumber">108</span></a>  <span class="keyword1"><span class="command">hence</span></span> A<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span> <span class="main">.</span> <span class="main">|</span><span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span>›</span></span>
<a name="L109" href="#L109"><span class="linenumber">109</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L110" href="#L110"><span class="linenumber">110</span></a>  <span class="keyword1"><span class="command">have</span></span> union_univ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">⋃</span><span class="bound">x</span> <span class="main">∈</span> range<span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span> <span class="main">.</span> <span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> UNIV›</span></span>
<a name="L111" href="#L111"><span class="linenumber">111</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> <span class="main">(</span><span class="operator">meson</span> f_inv_into_f range_eqI<span class="main">)</span>
<a name="L112" href="#L112"><span class="linenumber">112</span></a>
<a name="L113" href="#L113"><span class="linenumber">113</span></a>  <span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We refute by case distinction: there is either finitely many or
<a name="L114" href="#L114"><span class="linenumber">114</span></a>       infinitely many special urelements and in both cases we can derive
<a name="L115" href="#L115"><span class="linenumber">115</span></a>       a contradiction from the assumption above.›</span></span>
<a name="L116" href="#L116"><span class="linenumber">116</span></a>  <span class="keyword1"><span class="command">{</span></span>
<a name="L117" href="#L117"><span class="linenumber">117</span></a>    <span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Finite case.›</span></span>
<a name="L118" href="#L118"><span class="linenumber">118</span></a>    <span class="keyword3"><span class="command">assume</span></span> finite_σ_set<span class="main">:</span> <span class="quoted"><span class="quoted">‹finite <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span>›</span></span>
<a name="L119" href="#L119"><span class="linenumber">119</span></a>    <span class="keyword1"><span class="command">hence</span></span> finite_collapsed<span class="main">:</span> <span class="quoted"><span class="quoted">‹finite <span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="skolem">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L120" href="#L120"><span class="linenumber">120</span></a>      <span class="keyword1"><span class="command">using</span></span> A card_of_ordLeq_infinite <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L121" href="#L121"><span class="linenumber">121</span></a>    <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span> <span class="main">.</span> <span title="(755)">card</span> <span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span> <span class="main">≤</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span>›</span></span>
<a name="L122" href="#L122"><span class="linenumber">122</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> A finite_σ_set card_of_ordLeq inj_on_iff_card_le<span class="main">)</span>
<a name="L123" href="#L123"><span class="linenumber">123</span></a>    <span class="keyword1"><span class="command">have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹card <span class="main">(</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span>›</span></span>
<a name="L124" href="#L124"><span class="linenumber">124</span></a>      <span class="keyword1"><span class="command">using</span></span> finite_σ_set card_image_le <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L125" href="#L125"><span class="linenumber">125</span></a>    <span class="keyword1"><span class="command">hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹finite <span class="main">(</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L126" href="#L126"><span class="linenumber">126</span></a>      <span class="keyword1"><span class="command">using</span></span> finite_σ_set <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L127" href="#L127"><span class="linenumber">127</span></a>
<a name="L128" href="#L128"><span class="linenumber">128</span></a>    <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">n</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>urrel set set<span class="main">)</span>›</span></span>
<a name="L129" href="#L129"><span class="linenumber">129</span></a>    <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">=</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span>›</span></span>
<a name="L130" href="#L130"><span class="linenumber">130</span></a>
<a name="L131" href="#L131"><span class="linenumber">131</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">=</span> <span title="(755)">card</span> <span class="main">(</span><span class="main">⋃</span><span class="bound">x</span> <span class="main">∈</span> range<span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span> <span class="main">.</span> <span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span>›</span></span>
<a name="L132" href="#L132"><span class="linenumber">132</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> n_def <span class="keyword1"><span class="command">using</span></span> union_univ <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
<a name="L133" href="#L133"><span class="linenumber">133</span></a>    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≤</span> <span class="main">(</span><span class="main">∑</span><span class="bound">i</span><span class="main">∈</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">.</span> <span title="(755)">card</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> <span class="free">ασ</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span>›</span></span>
<a name="L134" href="#L134"><span class="linenumber">134</span></a>      <span class="keyword1"><span class="command">using</span></span> card_UN_le 2 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L135" href="#L135"><span class="linenumber">135</span></a>    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≤</span> <span class="main">(</span><span class="main">∑</span><span class="bound">i</span><span class="main">∈</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">.</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L136" href="#L136"><span class="linenumber">136</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> 0 sum_mono<span class="main">)</span>
<a name="L137" href="#L137"><span class="linenumber">137</span></a>    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≤</span> <span title="(755)">card</span> <span class="main">(</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">)</span> <span class="main">*</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span>›</span></span>
<a name="L138" href="#L138"><span class="linenumber">138</span></a>      <span class="keyword1"><span class="command">using</span></span> sum_bounded_above <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L139" href="#L139"><span class="linenumber">139</span></a>    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≤</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span> <span class="main">*</span> <span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span>›</span></span>
<a name="L140" href="#L140"><span class="linenumber">140</span></a>      <span class="keyword1"><span class="command">using</span></span> 1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
<a name="L141" href="#L141"><span class="linenumber">141</span></a>    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">=</span> <span class="skolem">m</span><span class="main">*</span><span class="skolem">m</span>›</span></span>
<a name="L142" href="#L142"><span class="linenumber">142</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> m_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L143" href="#L143"><span class="linenumber">143</span></a>    <span class="keyword1"><span class="command">finally</span></span> <span class="keyword1"><span class="command">have</span></span> n_upper<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">n</span> <span class="main">≤</span> <span class="skolem">m</span><span class="main">*</span><span class="skolem">m</span>›</span></span><span class="keyword1"><span class="command">.</span></span>
<a name="L144" href="#L144"><span class="linenumber">144</span></a>
<a name="L145" href="#L145"><span class="linenumber">145</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹finite <span class="main">(</span><span class="main">⋃</span><span class="bound">x</span> <span class="main">∈</span> range<span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span> <span class="main">.</span> <span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span>›</span></span>
<a name="L146" href="#L146"><span class="linenumber">146</span></a>      <span class="keyword1"><span class="command">using</span></span> 2 finite_collapsed <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L147" href="#L147"><span class="linenumber">147</span></a>    <span class="keyword1"><span class="command">hence</span></span> finite_αset<span class="main">:</span> <span class="quoted"><span class="quoted">‹finite <span class="main">(</span>UNIV<span class="main">::</span>urrel set set<span class="main">)</span>›</span></span>
<a name="L148" href="#L148"><span class="linenumber">148</span></a>      <span class="keyword1"><span class="command">using</span></span> union_univ <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
<a name="L149" href="#L149"><span class="linenumber">149</span></a>
<a name="L150" href="#L150"><span class="linenumber">150</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="numeral">2</span><span class="main">^</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span> <span class="main">=</span> <span class="main">(</span><span class="numeral">2</span><span class="main">::</span>nat<span class="main">)</span><span class="main">^</span><span class="main">(</span><span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>σ set set<span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L151" href="#L151"><span class="linenumber">151</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Pow_UNIV card_Pow finite_σ_set m_def<span class="main">)</span>
<a name="L152" href="#L152"><span class="linenumber">152</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹card <span class="main">(</span>UNIV<span class="main">::</span>σ set set<span class="main">)</span> <span class="main">≤</span> <span class="main">(</span><span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span>urrel set<span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L153" href="#L153"><span class="linenumber">153</span></a>      <span class="keyword1"><span class="command">using</span></span> card_σ_set_set_bound
<a name="L154" href="#L154"><span class="linenumber">154</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> Finite_Set.finite_set card_of_ordLeq finite_αset
<a name="L155" href="#L155"><span class="linenumber">155</span></a>                finite_σ_set inj_on_iff_card_le<span class="main">)</span>
<a name="L156" href="#L156"><span class="linenumber">156</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="numeral">2</span><span class="main">^</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span> <span class="main">≤</span> <span class="main">(</span><span class="numeral">2</span><span class="main">::</span>nat<span class="main">)</span><span class="main">^</span><span class="main">(</span><span title="(755)">card</span> <span class="main">(</span>UNIV<span class="main">::</span> urrel set<span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L157" href="#L157"><span class="linenumber">157</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<a name="L158" href="#L158"><span class="linenumber">158</span></a>    <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">=</span> <span class="skolem">n</span>›</span></span>
<a name="L159" href="#L159"><span class="linenumber">159</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> n_def
<a name="L160" href="#L160"><span class="linenumber">160</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Finite_Set.finite_set Pow_UNIV card_Pow finite_αset<span class="main">)</span>
<a name="L161" href="#L161"><span class="linenumber">161</span></a>    <span class="keyword1"><span class="command">finally</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="numeral">2</span><span class="main">^</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span> <span class="main">≤</span> <span class="skolem">n</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L162" href="#L162"><span class="linenumber">162</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="numeral">2</span><span class="main">^</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span> <span class="main">≤</span> <span class="skolem">m</span><span class="main">*</span><span class="skolem">m</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> n_upper <span class="keyword1"><span class="command">by</span></span> <span class="operator">linarith</span>
<a name="L163" href="#L163"><span class="linenumber">163</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L164" href="#L164"><span class="linenumber">164</span></a>      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="numeral">2</span><span class="main">::</span>nat<span class="main">)</span><span class="main">^</span><span class="main">(</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span><span class="main">)</span> <span class="main">≥</span> <span class="main">(</span><span class="numeral">2</span><span class="main">^</span><span class="main">(</span><span class="skolem">m</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L165" href="#L165"><span class="linenumber">165</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_eq_plus1 Suc_leI less_exp one_le_numeral power_increasing<span class="main">)</span>
<a name="L166" href="#L166"><span class="linenumber">166</span></a>      <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="numeral">2</span><span class="main">^</span><span class="main">(</span><span class="skolem">m</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="numeral">2</span><span class="main">::</span>nat<span class="main">)</span> <span class="main">*</span> <span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span>›</span></span>
<a name="L167" href="#L167"><span class="linenumber">167</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L168" href="#L168"><span class="linenumber">168</span></a>      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span> <span class="main">&lt;</span> <span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span>›</span></span>
<a name="L169" href="#L169"><span class="linenumber">169</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> less_exp<span class="main">)</span>
<a name="L170" href="#L170"><span class="linenumber">170</span></a>      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span><span class="main">*</span><span class="skolem">m</span> <span class="main">&lt;</span> <span class="main">(</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span><span class="main">)</span><span class="main">*</span><span class="main">(</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span><span class="main">)</span>›</span></span>
<a name="L171" href="#L171"><span class="linenumber">171</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> mult_strict_mono<span class="main">)</span>
<a name="L172" href="#L172"><span class="linenumber">172</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">=</span> <span class="numeral">2</span><span class="main">^</span><span class="main">(</span><span class="skolem">m</span><span class="main">+</span><span class="skolem">m</span><span class="main">)</span>›</span></span>
<a name="L173" href="#L173"><span class="linenumber">173</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> power_add<span class="main">)</span>
<a name="L174" href="#L174"><span class="linenumber">174</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span><span class="main">*</span><span class="skolem">m</span> <span class="main">&lt;</span> <span class="numeral">2</span> <span class="main">^</span> <span class="main">(</span><span class="skolem">m</span> <span class="main">+</span> <span class="skolem">m</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L175" href="#L175"><span class="linenumber">175</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span><span class="main">+</span><span class="skolem">m</span> <span class="main">≤</span> <span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span>›</span></span>
<a name="L176" href="#L176"><span class="linenumber">176</span></a>      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">m</span></span><span class="main">)</span>
<a name="L177" href="#L177"><span class="linenumber">177</span></a>        <span class="keyword3"><span class="command">case</span></span> 0
<a name="L178" href="#L178"><span class="linenumber">178</span></a>        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L179" href="#L179"><span class="linenumber">179</span></a>      <span class="keyword1"><span class="command">next</span></span>
<a name="L180" href="#L180"><span class="linenumber">180</span></a>        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Suc <span class="skolem">m</span><span class="main">)</span>
<a name="L181" href="#L181"><span class="linenumber">181</span></a>        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
<a name="L182" href="#L182"><span class="linenumber">182</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Suc_leI less_exp mult_2 mult_le_mono2 power_Suc<span class="main">)</span>
<a name="L183" href="#L183"><span class="linenumber">183</span></a>      <span class="keyword1"><span class="command">qed</span></span>
<a name="L184" href="#L184"><span class="linenumber">184</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">m</span><span class="main">*</span><span class="skolem">m</span> <span class="main">&lt;</span> <span class="numeral">2</span><span class="main">^</span><span class="numeral">2</span><span class="main">^</span><span class="skolem">m</span>›</span></span>
<a name="L185" href="#L185"><span class="linenumber">185</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> less_le_trans one_le_numeral power_increasing<span class="main">)</span>
<a name="L186" href="#L186"><span class="linenumber">186</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L187" href="#L187"><span class="linenumber">187</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L188" href="#L188"><span class="linenumber">188</span></a>  <span class="keyword1"><span class="command">}</span></span>
<a name="L189" href="#L189"><span class="linenumber">189</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L190" href="#L190"><span class="linenumber">190</span></a>    <span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Infinite case.›</span></span>
<a name="L191" href="#L191"><span class="linenumber">191</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹infinite <span class="main">(</span>UNIV<span class="main">::</span>σ set<span class="main">)</span>›</span></span>
<a name="L192" href="#L192"><span class="linenumber">192</span></a>    <span class="keyword1"><span class="command">hence</span></span> Cinfσ<span class="main">:</span> <span class="quoted"><span class="quoted">‹Cinfinite <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span>›</span></span>
<a name="L193" href="#L193"><span class="linenumber">193</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> cinfinite_def<span class="main">)</span>
<a name="L194" href="#L194"><span class="linenumber">194</span></a>    <span class="keyword1"><span class="command">have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span>›</span></span>
<a name="L195" href="#L195"><span class="linenumber">195</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L196" href="#L196"><span class="linenumber">196</span></a>    <span class="keyword1"><span class="command">have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">i</span><span class="main">∈</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">.</span> <span class="main">|</span><span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span>›</span></span>
<a name="L197" href="#L197"><span class="linenumber">197</span></a>    <span class="keyword1"><span class="command">proof</span></span>
<a name="L198" href="#L198"><span class="linenumber">198</span></a>      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set›</span></span>
<a name="L199" href="#L199"><span class="linenumber">199</span></a>      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">i</span> <span class="main">∈</span> range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span>›</span></span>
<a name="L200" href="#L200"><span class="linenumber">200</span></a>      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span><span class="main">{</span><span class="bound">y</span> <span class="main">.</span> <span class="free">ασ</span> <span class="skolem">i</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span>›</span></span>
<a name="L201" href="#L201"><span class="linenumber">201</span></a>        <span class="keyword1"><span class="command">using</span></span> A <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L202" href="#L202"><span class="linenumber">202</span></a>    <span class="keyword1"><span class="command">qed</span></span>
<a name="L203" href="#L203"><span class="linenumber">203</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span><span class="main">⋃</span> <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">i</span><span class="main">.</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> <span class="free">ασ</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span> <span class="main">`</span> <span class="main">(</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">|</span> <span class="keyword1">≤o</span>
<a name="L204" href="#L204"><span class="linenumber">204</span></a>                   <span class="main">|</span>Sigma <span class="main">(</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">i</span><span class="main">.</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> <span class="free">ασ</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span><span class="main">|</span>›</span></span>
<a name="L205" href="#L205"><span class="linenumber">205</span></a>      <span class="keyword1"><span class="command">using</span></span> card_of_UNION_Sigma <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L206" href="#L206"><span class="linenumber">206</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>urrel set set<span class="main">|</span> <span class="keyword1">≤o</span>
<a name="L207" href="#L207"><span class="linenumber">207</span></a>           <span class="main">|</span>Sigma <span class="main">(</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">i</span><span class="main">.</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> <span class="free">ασ</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span><span class="main">|</span>›</span></span>
<a name="L208" href="#L208"><span class="linenumber">208</span></a>      <span class="keyword1"><span class="command">using</span></span> union_univ <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
<a name="L209" href="#L209"><span class="linenumber">209</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>Sigma <span class="main">(</span>range <span class="main">(</span>inv <span class="free">ασ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">i</span><span class="main">.</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> <span class="free">ασ</span> <span class="bound">i</span> <span class="main">=</span> <span class="free">ασ</span> <span class="bound">y</span><span class="main">}</span><span class="main">)</span><span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span>›</span></span>
<a name="L210" href="#L210"><span class="linenumber">210</span></a>      <span class="keyword1"><span class="command">using</span></span> card_of_Sigma_ordLeq_Cinfinite<span class="main">[</span><span class="operator">OF</span> Cinfσ<span class="main">,</span> <span class="operator">OF</span> 1<span class="main">,</span> <span class="operator">OF</span> 2<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L211" href="#L211"><span class="linenumber">211</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>urrel set set<span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span>›</span></span>
<a name="L212" href="#L212"><span class="linenumber">212</span></a>      <span class="keyword1"><span class="command">using</span></span> ordLeq_transitive <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L213" href="#L213"><span class="linenumber">213</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L214" href="#L214"><span class="linenumber">214</span></a>      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span> <span class="keyword1">&lt;o</span> <span class="main">|</span>UNIV<span class="main">::</span>σ set set<span class="main">|</span>›</span></span>
<a name="L215" href="#L215"><span class="linenumber">215</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L216" href="#L216"><span class="linenumber">216</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>σ set set<span class="main">|</span> <span class="keyword1">≤o</span> <span class="main">|</span>UNIV<span class="main">::</span>urrel set<span class="main">|</span>›</span></span>
<a name="L217" href="#L217"><span class="linenumber">217</span></a>        <span class="keyword1"><span class="command">using</span></span> card_σ_set_set_bound <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L218" href="#L218"><span class="linenumber">218</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>urrel set<span class="main">|</span> <span class="keyword1">&lt;o</span> <span class="main">|</span>UNIV<span class="main">::</span>urrel set set<span class="main">|</span>›</span></span>
<a name="L219" href="#L219"><span class="linenumber">219</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L220" href="#L220"><span class="linenumber">220</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span> <span class="keyword1">&lt;o</span> <span class="main">|</span>UNIV<span class="main">::</span>urrel set set<span class="main">|</span>›</span></span>
<a name="L221" href="#L221"><span class="linenumber">221</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> ordLess_imp_ordLeq ordLess_ordLeq_trans<span class="main">)</span>
<a name="L222" href="#L222"><span class="linenumber">222</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L223" href="#L223"><span class="linenumber">223</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
<a name="L224" href="#L224"><span class="linenumber">224</span></a>      <span class="keyword1"><span class="command">using</span></span> not_ordLeq_ordLess <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L225" href="#L225"><span class="linenumber">225</span></a>  <span class="keyword1"><span class="command">}</span></span>
<a name="L226" href="#L226"><span class="linenumber">226</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L227" href="#L227"><span class="linenumber">227</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L228" href="#L228"><span class="linenumber">228</span></a>
<a name="L229" href="#L229"><span class="linenumber">229</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We introduce a mapping from abstract objects (i.e. sets of urrelations) to
<a name="L230" href="#L230"><span class="linenumber">230</span></a>     special urelements <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">text</span></span> <span class="raw_text"><span class="raw_text">‹ασ›</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> that is surjective and distinguishes all
<a name="L231" href="#L231"><span class="linenumber">231</span></a>     abstract objects that are distinguished by a (not necessarily surjective)
<a name="L232" href="#L232"><span class="linenumber">232</span></a>     mapping <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">text</span></span> <span class="raw_text"><span class="raw_text">‹ασ'›</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>. <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">text</span></span> <span class="raw_text"><span class="raw_text">‹ασ'›</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> will be used to model extended relation
<a name="L233" href="#L233"><span class="linenumber">233</span></a>     comprehension.›</span></span>
<a name="L234" href="#L234"><span class="linenumber">234</span></a><span class="keyword1"><span class="command">consts</span></span> ασ' <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set <span class="main">⇒</span> σ›</span></span>
<a name="L235" href="#L235"><span class="linenumber">235</span></a><span class="keyword1"><span class="command">consts</span></span> ασ <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set <span class="main">⇒</span> σ›</span></span>
<a name="L236" href="#L236"><span class="linenumber">236</span></a><span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">ασ</span><span class="main">)</span>
<a name="L237" href="#L237"><span class="linenumber">237</span></a>  ασ_surj<span class="main">:</span> <span class="quoted"><span class="quoted">‹surj ασ›</span></span>
<a name="L238" href="#L238"><span class="linenumber">238</span></a>  ασ_ασ'<span class="main">:</span> <span class="quoted"><span class="quoted">‹ασ <span class="free">x</span> <span class="main">=</span> ασ <span class="free">y</span> <span class="main">⟹</span> ασ' <span class="free">x</span> <span class="main">=</span> ασ' <span class="free">y</span>›</span></span>
<a name="L239" href="#L239"><span class="linenumber">239</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L240" href="#L240"><span class="linenumber">240</span></a>  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">|</span>UNIV<span class="main">::</span>σ set<span class="main">|</span> <span class="keyword1">&lt;o</span> <span class="main">|</span><span class="main">{</span><span class="bound">y</span><span class="main">.</span> ασ' <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="bound">y</span><span class="main">}</span><span class="main">|</span>›</span></span>
<a name="L241" href="#L241"><span class="linenumber">241</span></a>    <span class="keyword1"><span class="command">using</span></span> ασ_pigeonhole <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L242" href="#L242"><span class="linenumber">242</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">::</span> urrel set <span class="main">⇒</span> σ <span class="main">.</span> <span class="bound">f</span> <span class="main">`</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> ασ' <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="bound">y</span><span class="main">}</span> <span class="main">=</span> UNIV <span class="main">∧</span> <span class="bound">f</span> <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="skolem">x</span>›</span></span>
<a name="L243" href="#L243"><span class="linenumber">243</span></a>  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L244" href="#L244"><span class="linenumber">244</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">::</span> urrel set <span class="main">⇒</span> σ <span class="main">.</span> <span class="bound">f</span> <span class="main">`</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> ασ' <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="bound">y</span><span class="main">}</span> <span class="main">=</span> UNIV›</span></span>
<a name="L245" href="#L245"><span class="linenumber">245</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> x_prop card_of_ordLeq2 ordLess_imp_ordLeq<span class="main">)</span>
<a name="L246" href="#L246"><span class="linenumber">246</span></a>    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">f</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set <span class="main">⇒</span> σ›</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">f</span> <span class="main">`</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> ασ' <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="bound">y</span><span class="main">}</span> <span class="main">=</span> UNIV›</span></span>
<a name="L247" href="#L247"><span class="linenumber">247</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L248" href="#L248"><span class="linenumber">248</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">f</span> <span class="skolem">a</span> <span class="main">=</span> ασ' <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹ασ' <span class="skolem">a</span> <span class="main">=</span> ασ' <span class="skolem">x</span>›</span></span>
<a name="L249" href="#L249"><span class="linenumber">249</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> calculation UNIV_I image_iff mem_Collect_eq<span class="main">)</span>
<a name="L250" href="#L250"><span class="linenumber">250</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L251" href="#L251"><span class="linenumber">251</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹Fun.swap <span class="skolem">x</span> <span class="skolem">a</span> <span class="skolem">f</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L252" href="#L252"><span class="linenumber">252</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L253" href="#L253"><span class="linenumber">253</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">f</span></span> <span class="keyword2"><span class="keyword">where</span></span> fimage<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">f</span> <span class="main">`</span> <span class="main">{</span><span class="bound">y</span><span class="main">.</span> ασ' <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="bound">y</span><span class="main">}</span> <span class="main">=</span> UNIV›</span></span>
<a name="L254" href="#L254"><span class="linenumber">254</span></a>                  <span class="keyword2"><span class="keyword">and</span></span> fx<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">f</span> <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="skolem">x</span>›</span></span>
<a name="L255" href="#L255"><span class="linenumber">255</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L256" href="#L256"><span class="linenumber">256</span></a>
<a name="L257" href="#L257"><span class="linenumber">257</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">ασ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set <span class="main">⇒</span> σ›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L258" href="#L258"><span class="linenumber">258</span></a>    <span class="quoted"><span class="quoted">‹<span class="skolem">ασ</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">urrels</span> <span class="main">.</span> <span class="keyword1">if</span> ασ' <span class="bound">urrels</span> <span class="main">=</span> ασ' <span class="skolem">x</span> <span class="main">∧</span> <span class="skolem">f</span> <span class="bound">urrels</span> <span class="main">∉</span> range ασ'
<a name="L259" href="#L259"><span class="linenumber">259</span></a>                      <span class="keyword1">then</span> <span class="skolem">f</span> <span class="bound">urrels</span>
<a name="L260" href="#L260"><span class="linenumber">260</span></a>                      <span class="keyword1">else</span> ασ' <span class="bound">urrels</span>›</span></span>
<a name="L261" href="#L261"><span class="linenumber">261</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹surj <span class="skolem">ασ</span>›</span></span>
<a name="L262" href="#L262"><span class="linenumber">262</span></a>  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L263" href="#L263"><span class="linenumber">263</span></a>    <span class="keyword1"><span class="command">{</span></span>
<a name="L264" href="#L264"><span class="linenumber">264</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">s</span> <span class="main">::</span> <span class="quoted">σ</span>
<a name="L265" href="#L265"><span class="linenumber">265</span></a>    <span class="keyword1"><span class="command">{</span></span>
<a name="L266" href="#L266"><span class="linenumber">266</span></a>      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">∈</span> range ασ'›</span></span>
<a name="L267" href="#L267"><span class="linenumber">267</span></a>      <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹ασ' <span class="main">(</span>inv ασ' <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L268" href="#L268"><span class="linenumber">268</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> f_inv_into_f<span class="main">)</span>
<a name="L269" href="#L269"><span class="linenumber">269</span></a>      <span class="keyword1"><span class="command">{</span></span>
<a name="L270" href="#L270"><span class="linenumber">270</span></a>        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">=</span> ασ' <span class="skolem">x</span>›</span></span>
<a name="L271" href="#L271"><span class="linenumber">271</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ασ</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L272" href="#L272"><span class="linenumber">272</span></a>          <span class="keyword1"><span class="command">using</span></span> ασ_def fx <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L273" href="#L273"><span class="linenumber">273</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">.</span> <span class="skolem">ασ</span> <span class="main">(</span><span class="bound">f</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L274" href="#L274"><span class="linenumber">274</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L275" href="#L275"><span class="linenumber">275</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L276" href="#L276"><span class="linenumber">276</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L277" href="#L277"><span class="linenumber">277</span></a>        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">≠</span> ασ' <span class="skolem">x</span>›</span></span>
<a name="L278" href="#L278"><span class="linenumber">278</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ασ</span> <span class="main">(</span>inv ασ' <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L279" href="#L279"><span class="linenumber">279</span></a>          <span class="keyword1"><span class="command">unfolding</span></span> ασ_def 0 <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L280" href="#L280"><span class="linenumber">280</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">.</span> <span class="skolem">ασ</span> <span class="main">(</span><span class="bound">f</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L281" href="#L281"><span class="linenumber">281</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L282" href="#L282"><span class="linenumber">282</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L283" href="#L283"><span class="linenumber">283</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">.</span> <span class="skolem">ασ</span> <span class="main">(</span><span class="bound">f</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L284" href="#L284"><span class="linenumber">284</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L285" href="#L285"><span class="linenumber">285</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L286" href="#L286"><span class="linenumber">286</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L287" href="#L287"><span class="linenumber">287</span></a>      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">∉</span> range ασ'›</span></span>
<a name="L288" href="#L288"><span class="linenumber">288</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">urrels</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">f</span> <span class="skolem">urrels</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹ασ' <span class="skolem">x</span> <span class="main">=</span> ασ' <span class="skolem">urrels</span>›</span></span>
<a name="L289" href="#L289"><span class="linenumber">289</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> UNIV_I fimage image_iff mem_Collect_eq<span class="main">)</span>
<a name="L290" href="#L290"><span class="linenumber">290</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ασ</span> <span class="skolem">urrels</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L291" href="#L291"><span class="linenumber">291</span></a>        <span class="keyword1"><span class="command">using</span></span> ασ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L292" href="#L292"><span class="linenumber">292</span></a>      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">.</span> <span class="skolem">ασ</span> <span class="main">(</span><span class="bound">f</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L293" href="#L293"><span class="linenumber">293</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> f_inv_into_f range_eqI<span class="main">)</span>
<a name="L294" href="#L294"><span class="linenumber">294</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L295" href="#L295"><span class="linenumber">295</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">.</span> <span class="skolem">ασ</span> <span class="main">(</span><span class="bound">f</span> <span class="skolem">s</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span>
<a name="L296" href="#L296"><span class="linenumber">296</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L297" href="#L297"><span class="linenumber">297</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L298" href="#L298"><span class="linenumber">298</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L299" href="#L299"><span class="linenumber">299</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> surj_def<span class="main">)</span>
<a name="L300" href="#L300"><span class="linenumber">300</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L301" href="#L301"><span class="linenumber">301</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="skolem">ασ</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">ασ</span> <span class="bound">y</span> <span class="main">⟶</span> ασ' <span class="bound">x</span> <span class="main">=</span> ασ' <span class="bound">y</span>›</span></span>
<a name="L302" href="#L302"><span class="linenumber">302</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> ασ_def rangeI<span class="main">)</span>
<a name="L303" href="#L303"><span class="linenumber">303</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L304" href="#L304"><span class="linenumber">304</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L305" href="#L305"><span class="linenumber">305</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L306" href="#L306"><span class="linenumber">306</span></a>
<a name="L307" href="#L307"><span class="linenumber">307</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹For extended models that validate extended relation comprehension
<a name="L308" href="#L308"><span class="linenumber">308</span></a>     (and consequently the predecessor axiom), we specify which
<a name="L309" href="#L309"><span class="linenumber">309</span></a>     abstract objects are distinguished by <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">term</span></span> <span class="quoted"><span class="quoted">ασ'</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>.›</span></span>
<a name="L310" href="#L310"><span class="linenumber">310</span></a>
<a name="L311" href="#L311"><span class="linenumber">311</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">urrel_to_ωrel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel <span class="main">⇒</span> <span class="main">(</span>ω <span class="main">⇒</span> w <span class="main">⇒</span> bool<span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L312" href="#L312"><span class="linenumber">312</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">urrel_to_ωrel</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">r</span> <span class="bound">u</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>ωυ <span class="bound">u</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L313" href="#L313"><span class="linenumber">313</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">ωrel_to_urrel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span>ω <span class="main">⇒</span> w <span class="main">⇒</span> bool<span class="main">)</span> <span class="main">⇒</span> urrel›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L314" href="#L314"><span class="linenumber">314</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">ωrel_to_urrel</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> Abs_urrel
<a name="L315" href="#L315"><span class="linenumber">315</span></a>    <span class="main">(</span><span class="main">λ</span> <span class="bound">u</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="keyword1">case</span> <span class="bound">u</span> <span class="keyword1">of</span> ωυ <span class="bound">x</span> <span class="main">⇒</span> <span class="bound">φ</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">|</span> <span class="main"><span class="bound">_</span></span> <span class="main">⇒</span> False<span class="main">)</span>›</span></span>
<a name="L316" href="#L316"><span class="linenumber">316</span></a>
<a name="L317" href="#L317"><span class="linenumber">317</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_urrel_ωequiv</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel <span class="main">⇒</span> urrel <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L318" href="#L318"><span class="linenumber">318</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_urrel_ωequiv</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">r</span> <span class="bound">s</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">u</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>ωυ <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L319" href="#L319"><span class="linenumber">319</span></a>                                       AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="bound">s</span> <span class="main">(</span>ωυ <span class="bound">u</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L320" href="#L320"><span class="linenumber">320</span></a>
<a name="L321" href="#L321"><span class="linenumber">321</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_ωrel_quot<span class="main">:</span> <span class="quoted"><span class="quoted">‹Quotient3 AOT_urrel_ωequiv urrel_to_ωrel ωrel_to_urrel›</span></span>
<a name="L322" href="#L322"><span class="linenumber">322</span></a><span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> Quotient3I<span class="main">)</span>
<a name="L323" href="#L323"><span class="linenumber">323</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="main">(</span>ωrel_to_urrel <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">a</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L324" href="#L324"><span class="linenumber">324</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> ωrel_to_urrel_def urrel_to_ωrel_def
<a name="L325" href="#L325"><span class="linenumber">325</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> ext<span class="main">)</span>
<a name="L326" href="#L326"><span class="linenumber">326</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L327" href="#L327"><span class="linenumber">327</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L328" href="#L328"><span class="linenumber">328</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L329" href="#L329"><span class="linenumber">329</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_urrel_ωequiv <span class="main">(</span>ωrel_to_urrel <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>ωrel_to_urrel <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L330" href="#L330"><span class="linenumber">330</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> ωrel_to_urrel_def AOT_urrel_ωequiv_def
<a name="L331" href="#L331"><span class="linenumber">331</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span>1 2<span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L332" href="#L332"><span class="linenumber">332</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L333" href="#L333"><span class="linenumber">333</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L334" href="#L334"><span class="linenumber">334</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_urrel_ωequiv <span class="skolem">r</span> <span class="skolem">s</span> <span class="main">=</span> <span class="main">(</span>AOT_urrel_ωequiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">∧</span> AOT_urrel_ωequiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">∧</span>
<a name="L335" href="#L335"><span class="linenumber">335</span></a>                                urrel_to_ωrel <span class="skolem">r</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">s</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span> <span class="skolem">s</span>
<a name="L336" href="#L336"><span class="linenumber">336</span></a>  <span class="keyword1"><span class="command">proof</span></span>
<a name="L337" href="#L337"><span class="linenumber">337</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_urrel_ωequiv <span class="skolem">r</span> <span class="skolem">s</span>›</span></span>
<a name="L338" href="#L338"><span class="linenumber">338</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ωυ <span class="skolem">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L339" href="#L339"><span class="linenumber">339</span></a>           AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">s</span> <span class="main">(</span>ωυ <span class="skolem">u</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">u</span> <span class="skolem">v</span>
<a name="L340" href="#L340"><span class="linenumber">340</span></a>      <span class="keyword1"><span class="command">using</span></span> AOT_urrel_ωequiv_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<a name="L341" href="#L341"><span class="linenumber">341</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">r</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">s</span>›</span></span>
<a name="L342" href="#L342"><span class="linenumber">342</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> urrel_to_ωrel_def
<a name="L343" href="#L343"><span class="linenumber">343</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<a name="L344" href="#L344"><span class="linenumber">344</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_urrel_ωequiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">∧</span> AOT_urrel_ωequiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">∧</span>
<a name="L345" href="#L345"><span class="linenumber">345</span></a>          urrel_to_ωrel <span class="skolem">r</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">s</span>›</span></span>
<a name="L346" href="#L346"><span class="linenumber">346</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> AOT_urrel_ωequiv_def
<a name="L347" href="#L347"><span class="linenumber">347</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L348" href="#L348"><span class="linenumber">348</span></a>  <span class="keyword1"><span class="command">next</span></span>
<a name="L349" href="#L349"><span class="linenumber">349</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_urrel_ωequiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">∧</span> AOT_urrel_ωequiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">∧</span>
<a name="L350" href="#L350"><span class="linenumber">350</span></a>            urrel_to_ωrel <span class="skolem">r</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">s</span>›</span></span>
<a name="L351" href="#L351"><span class="linenumber">351</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ωυ <span class="skolem">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L352" href="#L352"><span class="linenumber">352</span></a>           AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">s</span> <span class="main">(</span>ωυ <span class="skolem">u</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">u</span> <span class="skolem">v</span>
<a name="L353" href="#L353"><span class="linenumber">353</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> urrel_to_ωrel_def<span class="main">)</span>
<a name="L354" href="#L354"><span class="linenumber">354</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_urrel_ωequiv <span class="skolem">r</span> <span class="skolem">s</span>›</span></span>
<a name="L355" href="#L355"><span class="linenumber">355</span></a>      <span class="keyword1"><span class="command">using</span></span> AOT_urrel_ωequiv_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L356" href="#L356"><span class="linenumber">356</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L357" href="#L357"><span class="linenumber">357</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L358" href="#L358"><span class="linenumber">358</span></a>
<a name="L359" href="#L359"><span class="linenumber">359</span></a><span class="keyword1"><span class="command">specification</span></span> <span class="main">(</span><span class="quoted">ασ'</span><span class="main">)</span>
<a name="L360" href="#L360"><span class="linenumber">360</span></a>  ασ_eq_ord_exts_all<span class="main">:</span>
<a name="L361" href="#L361"><span class="linenumber">361</span></a>    <span class="quoted"><span class="quoted">‹ασ' <span class="free">a</span> <span class="main">=</span> ασ' <span class="free">b</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span><span class="bound">s</span> <span class="main">.</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="free">r</span> <span class="main">⟹</span> <span class="bound">s</span> <span class="main">∈</span> <span class="free">a</span><span class="main">)</span>
<a name="L362" href="#L362"><span class="linenumber">362</span></a>      <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">s</span> <span class="main">.</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="free">r</span> <span class="main">⟹</span> <span class="bound">s</span> <span class="main">∈</span> <span class="free">b</span><span class="main">)</span>›</span></span>
<a name="L363" href="#L363"><span class="linenumber">363</span></a>  ασ_eq_ord_exts_ex<span class="main">:</span>
<a name="L364" href="#L364"><span class="linenumber">364</span></a>    <span class="quoted"><span class="quoted">‹ασ' <span class="free">a</span> <span class="main">=</span> ασ' <span class="free">b</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">s</span> <span class="main">.</span> <span class="bound">s</span> <span class="main">∈</span> <span class="free">a</span> <span class="main">∧</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="free">r</span><span class="main">)</span>
<a name="L365" href="#L365"><span class="linenumber">365</span></a>      <span class="main">⟹</span> <span class="main">(</span><span class="main">∃</span><span class="bound">s</span> <span class="main">.</span> <span class="bound">s</span> <span class="main">∈</span> <span class="free">b</span> <span class="main">∧</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="free">r</span><span class="main">)</span>›</span></span>
<a name="L366" href="#L366"><span class="linenumber">366</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L367" href="#L367"><span class="linenumber">367</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">ασ_wit_intersection</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L368" href="#L368"><span class="linenumber">368</span></a>      <span class="quoted"><span class="quoted">‹<span class="skolem">ασ_wit_intersection</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">urrels</span> <span class="main">.</span>
<a name="L369" href="#L369"><span class="linenumber">369</span></a>        <span class="main">{</span><span class="bound">ordext</span> <span class="main">.</span> <span class="main">∀</span><span class="bound">urrel</span> <span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">⟶</span> <span class="bound">urrel</span> <span class="main">∈</span> <span class="bound">urrels</span><span class="main">}</span>›</span></span>
<a name="L370" href="#L370"><span class="linenumber">370</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">ασ_wit_union</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L371" href="#L371"><span class="linenumber">371</span></a>      <span class="quoted"><span class="quoted">‹<span class="skolem">ασ_wit_union</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">urrels</span> <span class="main">.</span>
<a name="L372" href="#L372"><span class="linenumber">372</span></a>        <span class="main">{</span><span class="bound">ordext</span> <span class="main">.</span> <span class="main">∃</span><span class="bound">urrel</span><span class="main">∈</span><span class="bound">urrels</span> <span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>›</span></span>
<a name="L373" href="#L373"><span class="linenumber">373</span></a>
<a name="L374" href="#L374"><span class="linenumber">374</span></a>  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ασ_wit</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">urrels</span> <span class="main">.</span> 
<a name="L375" href="#L375"><span class="linenumber">375</span></a>    <span class="keyword1">let</span> <span class="bound">ordexts</span> <span class="main">=</span> <span class="skolem">ασ_wit_intersection</span> <span class="bound">urrels</span> <span class="keyword1">in</span>
<a name="L376" href="#L376"><span class="linenumber">376</span></a>    <span class="keyword1">let</span> <span class="bound">ordexts'</span> <span class="main">=</span> <span class="skolem">ασ_wit_union</span> <span class="bound">urrels</span> <span class="keyword1">in</span>
<a name="L377" href="#L377"><span class="linenumber">377</span></a>    <span class="main">(</span><span class="bound">ordexts</span><span class="main">,</span> <span class="bound">ordexts'</span><span class="main">,</span> undefined<span class="main">)</span>›</span></span>
<a name="L378" href="#L378"><span class="linenumber">378</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">ασ_wit</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set <span class="main">⇒</span> σ›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L379" href="#L379"><span class="linenumber">379</span></a>    <span class="quoted"><span class="quoted">‹<span class="skolem">ασ_wit</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">urrels</span> <span class="main">.</span> Abs_σ <span class="main">(</span><span class="var">?ασ_wit</span> <span class="bound">urrels</span><span class="main">)</span>›</span></span>
<a name="L380" href="#L380"><span class="linenumber">380</span></a>  <span class="keyword1"><span class="command">{</span></span>
<a name="L381" href="#L381"><span class="linenumber">381</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">b</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">r</span> <span class="skolem">s</span>
<a name="L382" href="#L382"><span class="linenumber">382</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ασ_wit</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ασ_wit</span> <span class="skolem">b</span>›</span></span>
<a name="L383" href="#L383"><span class="linenumber">383</span></a>    <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∀</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">⟶</span> <span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">a</span><span class="main">}</span> <span class="main">=</span>
<a name="L384" href="#L384"><span class="linenumber">384</span></a>              <span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∀</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">⟶</span> <span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">b</span><span class="main">}</span>›</span></span>
<a name="L385" href="#L385"><span class="linenumber">385</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> ασ_wit_def Let_def
<a name="L386" href="#L386"><span class="linenumber">386</span></a>      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> Abs_σ_inject<span class="main">)</span>
<a name="L387" href="#L387"><span class="linenumber">387</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> ασ_wit_intersection_def ασ_wit_union_def<span class="main">)</span>
<a name="L388" href="#L388"><span class="linenumber">388</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">s</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">r</span> <span class="main">⟹</span> <span class="skolem">s</span> <span class="main">∈</span> <span class="skolem">a</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">s</span>
<a name="L389" href="#L389"><span class="linenumber">389</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">r</span> <span class="main">∈</span>
<a name="L390" href="#L390"><span class="linenumber">390</span></a>           <span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∀</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">⟶</span> <span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">a</span><span class="main">}</span>›</span></span>
<a name="L391" href="#L391"><span class="linenumber">391</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L392" href="#L392"><span class="linenumber">392</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">r</span> <span class="main">∈</span>
<a name="L393" href="#L393"><span class="linenumber">393</span></a>           <span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∀</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">⟶</span> <span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">b</span><span class="main">}</span>›</span></span>
<a name="L394" href="#L394"><span class="linenumber">394</span></a>      <span class="keyword1"><span class="command">using</span></span> 0 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L395" href="#L395"><span class="linenumber">395</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">s</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">r</span>›</span></span>
<a name="L396" href="#L396"><span class="linenumber">396</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">∈</span> <span class="skolem">b</span>›</span></span>
<a name="L397" href="#L397"><span class="linenumber">397</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L398" href="#L398"><span class="linenumber">398</span></a>  <span class="keyword1"><span class="command">}</span></span>
<a name="L399" href="#L399"><span class="linenumber">399</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L400" href="#L400"><span class="linenumber">400</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">b</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel set›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">s</span> <span class="skolem">r</span>
<a name="L401" href="#L401"><span class="linenumber">401</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">ασ_wit</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">ασ_wit</span> <span class="skolem">b</span>›</span></span>
<a name="L402" href="#L402"><span class="linenumber">402</span></a>    <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∃</span><span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">a</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span> <span class="main">=</span>
<a name="L403" href="#L403"><span class="linenumber">403</span></a>              <span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∃</span><span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">b</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>›</span></span>
<a name="L404" href="#L404"><span class="linenumber">404</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> ασ_wit_def
<a name="L405" href="#L405"><span class="linenumber">405</span></a>      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> Abs_σ_inject<span class="main">)</span>
<a name="L406" href="#L406"><span class="linenumber">406</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Let_def ασ_wit_intersection_def ασ_wit_union_def<span class="main">)</span>
<a name="L407" href="#L407"><span class="linenumber">407</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">∈</span> <span class="skolem">a</span>›</span></span>
<a name="L408" href="#L408"><span class="linenumber">408</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">s</span> <span class="main">∈</span> <span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∃</span><span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">a</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>›</span></span>
<a name="L409" href="#L409"><span class="linenumber">409</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L410" href="#L410"><span class="linenumber">410</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">s</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">r</span>›</span></span>
<a name="L411" href="#L411"><span class="linenumber">411</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="skolem">r</span> <span class="main">∈</span>
<a name="L412" href="#L412"><span class="linenumber">412</span></a>                     <span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">∃</span><span class="bound">urrel</span> <span class="main">∈</span> <span class="skolem">b</span><span class="main">.</span> urrel_to_ωrel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>›</span></span>
<a name="L413" href="#L413"><span class="linenumber">413</span></a>      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"0"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
<a name="L414" href="#L414"><span class="linenumber">414</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">s</span><span class="main">.</span> <span class="bound">s</span> <span class="main">∈</span> <span class="skolem">b</span> <span class="main">∧</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">r</span>›</span></span>
<a name="L415" href="#L415"><span class="linenumber">415</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L416" href="#L416"><span class="linenumber">416</span></a>  <span class="keyword1"><span class="command">}</span></span>
<a name="L417" href="#L417"><span class="linenumber">417</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L418" href="#L418"><span class="linenumber">418</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">ασ_wit</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span><span class="main">)</span>
<a name="L419" href="#L419"><span class="linenumber">419</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L420" href="#L420"><span class="linenumber">420</span></a>
<a name="L421" href="#L421"><span class="linenumber">421</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We enable the extended model version.›</span></span>
<a name="L422" href="#L422"><span class="linenumber">422</span></a><span class="keyword1"><span class="command">abbreviation</span></span> <span class="main">(</span>input<span class="main">)</span> <span class="entity">AOT_ExtendedModel</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">AOT_ExtendedModel</span> <span class="main">≡</span> True›</span></span>
<a name="L423" href="#L423"><span class="linenumber">423</span></a><span class="comment1">(*
<a name="L424" href="#L424"><span class="linenumber">424</span></a>abbreviation (input) AOT_ExtendedModel where ‹AOT_ExtendedModel ≡ False›
<a name="L425" href="#L425"><span class="linenumber">425</span></a>*)</span>
<a name="L426" href="#L426"><span class="linenumber">426</span></a>
<a name="L427" href="#L427"><span class="linenumber">427</span></a>
<a name="L428" href="#L428"><span class="linenumber">428</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Individual terms are either ordinary objects, represented by ordinary urelements,
<a name="L429" href="#L429"><span class="linenumber">429</span></a>     abstract objects, modelled as sets of urrelations, or null objects, used to
<a name="L430" href="#L430"><span class="linenumber">430</span></a>     represent non-denoting definite <span title="(47)">descriptions</span>.›</span></span>
<a name="L431" href="#L431"><span class="linenumber">431</span></a><span class="keyword1"><span class="command">datatype</span></span> κ <span class="main">=</span> ωκ <span class="quoted">ω</span> <span class="main">|</span> ακ <span class="quoted"><span class="quoted">‹urrel set›</span></span> <span class="main">|</span> <span class="entity">is_nullκ</span><span class="main">:</span> nullκ <span class="quoted">null</span>
<a name="L432" href="#L432"><span class="linenumber">432</span></a>
<a name="L433" href="#L433"><span class="linenumber">433</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The mapping from abstract objects to urelements can be naturally
<a name="L434" href="#L434"><span class="linenumber">434</span></a>     lifted to a surjective mapping from individual terms to urelements.›</span></span>
<a name="L435" href="#L435"><span class="linenumber">435</span></a><span class="keyword1"><span class="command">primrec</span></span> <span class="entity">κυ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ<span class="main">⇒</span>υ›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L436" href="#L436"><span class="linenumber">436</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">κυ</span> <span class="main">(</span>ωκ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> ωυ <span class="free"><span class="bound"><span class="entity">x</span></span></span>›</span></span>
<a name="L437" href="#L437"><span class="linenumber">437</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="free">κυ</span> <span class="main">(</span>ακ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> συ <span class="main">(</span>ασ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span>›</span></span>
<a name="L438" href="#L438"><span class="linenumber">438</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="free">κυ</span> <span class="main">(</span>nullκ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> nullυ <span class="free"><span class="bound"><span class="entity">x</span></span></span>›</span></span>
<a name="L439" href="#L439"><span class="linenumber">439</span></a>
<a name="L440" href="#L440"><span class="linenumber">440</span></a><span class="keyword1"><span class="command">lemma</span></span> κυ_surj<span class="main">:</span> <span class="quoted"><span class="quoted">‹surj κυ›</span></span>
<a name="L441" href="#L441"><span class="linenumber">441</span></a>  <span class="keyword1"><span class="command">using</span></span> ασ_surj <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> κυ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> κυ.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> υ.exhaust surj_def<span class="main">)</span>
<a name="L442" href="#L442"><span class="linenumber">442</span></a>
<a name="L443" href="#L443"><span class="linenumber">443</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹By construction if the urelement of an individual term is exemplified by
<a name="L444" href="#L444"><span class="linenumber">444</span></a>     an (ur-)relation, it cannot be a null-object.›</span></span>
<a name="L445" href="#L445"><span class="linenumber">445</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_null_false<span class="main">:</span>
<a name="L446" href="#L446"><span class="linenumber">446</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="free">w</span> <span class="main">(</span>Rep_urrel <span class="free">f</span> <span class="main">(</span>κυ <span class="free">x</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L447" href="#L447"><span class="linenumber">447</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>is_nullκ <span class="free">x</span>›</span></span>
<a name="L448" href="#L448"><span class="linenumber">448</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> assms Rep_urrel κ.collapse<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> κυ.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span>
<a name="L449" href="#L449"><span class="linenumber">449</span></a>        mem_Collect_eq<span class="main">)</span>
<a name="L450" href="#L450"><span class="linenumber">450</span></a>
<a name="L451" href="#L451"><span class="linenumber">451</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹AOT requires any ordinary object to be <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">emph</span></span> ‹possibly concrete›<span class="antiquote"><span class="antiquote">}</span></span></span></span> and that
<a name="L452" href="#L452"><span class="linenumber">452</span></a>     there is an object that is not actually, but possibly concrete.›</span></span>
<a name="L453" href="#L453"><span class="linenumber">453</span></a><span class="keyword1"><span class="command">consts</span></span> AOT_model_concreteω <span class="main">::</span> <span class="quoted"><span class="quoted">‹ω <span class="main">⇒</span> w <span class="main">⇒</span>  bool›</span></span>
<a name="L454" href="#L454"><span class="linenumber">454</span></a><span class="keyword1"><span class="command">specification</span></span> <span class="main">(</span><span class="quoted">AOT_model_concreteω</span><span class="main">)</span>
<a name="L455" href="#L455"><span class="linenumber">455</span></a>  AOT_model_ω_concrete_in_some_world<span class="main">:</span>
<a name="L456" href="#L456"><span class="linenumber">456</span></a>  <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concreteω <span class="free">x</span> <span class="bound">w</span>›</span></span>
<a name="L457" href="#L457"><span class="linenumber">457</span></a>  AOT_model_contingent_object<span class="main">:</span>
<a name="L458" href="#L458"><span class="linenumber">458</span></a>  <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concreteω <span class="bound">x</span> <span class="bound">w</span> <span class="main">∧</span> <span class="main">¬</span>AOT_model_concreteω <span class="bound">x</span> w<span class="hidden">⇩</span><sub>0</sub>›</span></span>
<a name="L459" href="#L459"><span class="linenumber">459</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">‹<span class="main"><span class="main"><span class="main">λ</span></span></span><span class="main"><span class="bound"><span class="main"><span class="bound"><span class="main"><span class="bound">_</span></span></span></span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span><span class="main"><span class="main"><span class="main">.</span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span> <span class="main"><span class="main"><span class="main">≠</span></span></span> w<span class="hidden">⇩</span><sub>0</sub>›</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_nonactual_world<span class="main">)</span>
<a name="L460" href="#L460"><span class="linenumber">460</span></a>
<a name="L461" href="#L461"><span class="linenumber">461</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We define a type class for AOT's terms specifying the conditions under which
<a name="L462" href="#L462"><span class="linenumber">462</span></a>     objects of that type denote and require the set of denoting terms to be
<a name="L463" href="#L463"><span class="linenumber">463</span></a>     non-empty.›</span></span>
<a name="L464" href="#L464"><span class="linenumber">464</span></a><span class="keyword1"><span class="command">class</span></span> AOT_Term <span class="main">=</span>
<a name="L465" href="#L465"><span class="linenumber">465</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_denotes</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> bool›</span></span>
<a name="L466" href="#L466"><span class="linenumber">466</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_denoting_ex<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">x</span> <span class="main">.</span> <span class="free">AOT_model_denotes</span> <span class="bound">x</span>›</span></span>
<a name="L467" href="#L467"><span class="linenumber">467</span></a>
<a name="L468" href="#L468"><span class="linenumber">468</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹All types except the type of <span title="(192)">propositions</span> involve non-denoting terms. We
<a name="L469" href="#L469"><span class="linenumber">469</span></a>     define a refined type class for those.›</span></span>
<a name="L470" href="#L470"><span class="linenumber">470</span></a><span class="keyword1"><span class="command">class</span></span> AOT_IncompleteTerm <span class="main">=</span> AOT_Term <span class="main">+</span>
<a name="L471" href="#L471"><span class="linenumber">471</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_nondenoting_ex<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">¬</span>AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L472" href="#L472"><span class="linenumber">472</span></a>
<a name="L473" href="#L473"><span class="linenumber">473</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Generic non-denoting term.›</span></span>
<a name="L474" href="#L474"><span class="linenumber">474</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_nondenoting</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">::</span>AOT_IncompleteTerm›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L475" href="#L475"><span class="linenumber">475</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_nondenoting</span> <span class="main">≡</span> <span class="keyword1">SOME</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">¬</span>AOT_model_denotes <span class="bound">τ</span>›</span></span>
<a name="L476" href="#L476"><span class="linenumber">476</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_nondenoing<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="main">(</span>AOT_model_nondenoting<span class="main">)</span>›</span></span>
<a name="L477" href="#L477"><span class="linenumber">477</span></a>  <span class="keyword1"><span class="command">using</span></span> someI_ex<span class="main">[</span><span class="operator">OF</span> AOT_model_nondenoting_ex<span class="main">]</span>
<a name="L478" href="#L478"><span class="linenumber">478</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_nondenoting_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L479" href="#L479"><span class="linenumber">479</span></a>
<a name="L480" href="#L480"><span class="linenumber">480</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹<span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">const</span></span> AOT_model_denotes<span class="antiquote"><span class="antiquote">}</span></span></span></span> can trivially be extended to products of types.›</span></span>
<a name="L481" href="#L481"><span class="linenumber">481</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> prod <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_Term</span><span class="main">,</span> <span class="quoted">AOT_Term</span><span class="main">)</span> <span class="quoted">AOT_Term</span>
<a name="L482" href="#L482"><span class="linenumber">482</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L483" href="#L483"><span class="linenumber">483</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L484" href="#L484"><span class="linenumber">484</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_denotes_prod</span> <span class="main">≡</span> <span class="main">λ</span><span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">y</span>›</span></span>
<a name="L485" href="#L485"><span class="linenumber">485</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L486" href="#L486"><span class="linenumber">486</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">.</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L487" href="#L487"><span class="linenumber">487</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_prod_def AOT_model_denoting_ex<span class="main">)</span>
<a name="L488" href="#L488"><span class="linenumber">488</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L489" href="#L489"><span class="linenumber">489</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L490" href="#L490"><span class="linenumber">490</span></a>
<a name="L491" href="#L491"><span class="linenumber">491</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We specify a transformation of proposition-valued functions on terms, s.t.
<a name="L492" href="#L492"><span class="linenumber">492</span></a>     the result is fully determined by <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">emph</span></span> ‹regular›<span class="antiquote"><span class="antiquote">}</span></span></span></span> terms. This will be required
<a name="L493" href="#L493"><span class="linenumber">493</span></a>     for modelling n-ary relations as functions on tuples while preserving AOT's
<a name="L494" href="#L494"><span class="linenumber">494</span></a>     definition of n-ary relation identity.›</span></span>
<a name="L495" href="#L495"><span class="linenumber">495</span></a><span class="keyword1"><span class="command">locale</span></span> AOT_model_irregular_spec <span class="main">=</span>
<a name="L496" href="#L496"><span class="linenumber">496</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">AOT_model_irregular</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'a</span> <span class="main">⇒</span> 𝗈›</span></span>
<a name="L497" href="#L497"><span class="linenumber">497</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="free">AOT_model_regular</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> bool›</span></span>
<a name="L498" href="#L498"><span class="linenumber">498</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="free">AOT_model_term_equiv</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> <span class="tfree">'a</span> <span class="main">⇒</span> bool›</span></span>
<a name="L499" href="#L499"><span class="linenumber">499</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular_false<span class="main">:</span>
<a name="L500" href="#L500"><span class="linenumber">500</span></a>    <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_valid_in <span class="free">w</span> <span class="main">(</span><span class="free">AOT_model_irregular</span> <span class="free">φ</span> <span class="free">x</span><span class="main">)</span>›</span></span>
<a name="L501" href="#L501"><span class="linenumber">501</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular_equiv<span class="main">:</span>
<a name="L502" href="#L502"><span class="linenumber">502</span></a>    <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_term_equiv</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span>
<a name="L503" href="#L503"><span class="linenumber">503</span></a>     <span class="free">AOT_model_irregular</span> <span class="free">φ</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_irregular</span> <span class="free">φ</span> <span class="free">y</span>›</span></span>
<a name="L504" href="#L504"><span class="linenumber">504</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular_eqI<span class="main">:</span>
<a name="L505" href="#L505"><span class="linenumber">505</span></a>    <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">⋀</span> <span class="bound">x</span> <span class="main">.</span> <span class="free">AOT_model_regular</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="free">φ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">ψ</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L506" href="#L506"><span class="linenumber">506</span></a>     <span class="free">AOT_model_irregular</span> <span class="free">φ</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_irregular</span> <span class="free">ψ</span> <span class="free">x</span>›</span></span>
<a name="L507" href="#L507"><span class="linenumber">507</span></a>
<a name="L508" href="#L508"><span class="linenumber">508</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We introduce a type class for individual terms that specifies being regular,
<a name="L509" href="#L509"><span class="linenumber">509</span></a>     being equivalent (i.e. conceptually <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">emph</span></span> ‹sharing urelements›<span class="antiquote"><span class="antiquote">}</span></span></span></span>) and the
<a name="L510" href="#L510"><span class="linenumber">510</span></a>     transformation on proposition-valued functions as specified above.›</span></span>
<a name="L511" href="#L511"><span class="linenumber">511</span></a><span class="keyword1"><span class="command">class</span></span> AOT_IndividualTerm <span class="main">=</span> AOT_IncompleteTerm <span class="main">+</span>
<a name="L512" href="#L512"><span class="linenumber">512</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_regular</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> bool›</span></span>
<a name="L513" href="#L513"><span class="linenumber">513</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_term_equiv</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> <span class="tfree">'a</span> <span class="main">⇒</span> bool›</span></span>
<a name="L514" href="#L514"><span class="linenumber">514</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_irregular</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'a</span> <span class="main">⇒</span> 𝗈›</span></span>
<a name="L515" href="#L515"><span class="linenumber">515</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular_nondenoting<span class="main">:</span>
<a name="L516" href="#L516"><span class="linenumber">516</span></a>    <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">AOT_model_regular</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">¬</span>AOT_model_denotes <span class="free">x</span>›</span></span>
<a name="L517" href="#L517"><span class="linenumber">517</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_term_equiv_part_equivp<span class="main">:</span>
<a name="L518" href="#L518"><span class="linenumber">518</span></a>    <span class="quoted"><span class="quoted">‹equivp <span class="free">AOT_model_term_equiv</span>›</span></span>
<a name="L519" href="#L519"><span class="linenumber">519</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_term_equiv_denotes<span class="main">:</span>
<a name="L520" href="#L520"><span class="linenumber">520</span></a>    <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_term_equiv</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span>AOT_model_denotes <span class="free">x</span> <span class="main">=</span> AOT_model_denotes <span class="free">y</span><span class="main">)</span>›</span></span>
<a name="L521" href="#L521"><span class="linenumber">521</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_term_equiv_regular<span class="main">:</span>
<a name="L522" href="#L522"><span class="linenumber">522</span></a>    <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_term_equiv</span> <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span> <span class="main">(</span><span class="free">AOT_model_regular</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_regular</span> <span class="free">y</span><span class="main">)</span>›</span></span>
<a name="L523" href="#L523"><span class="linenumber">523</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular<span class="main">:</span>
<a name="L524" href="#L524"><span class="linenumber">524</span></a>    <span class="quoted"><span class="quoted">‹AOT_model_irregular_spec <span class="free">AOT_model_irregular</span> <span class="free">AOT_model_regular</span>
<a name="L525" href="#L525"><span class="linenumber">525</span></a>                              <span class="free">AOT_model_term_equiv</span>›</span></span>
<a name="L526" href="#L526"><span class="linenumber">526</span></a>
<a name="L527" href="#L527"><span class="linenumber">527</span></a><span class="keyword1"><span class="command">interpretation</span></span> AOT_model_irregular_spec <span class="quoted">AOT_model_irregular</span> <span class="quoted">AOT_model_regular</span>
<a name="L528" href="#L528"><span class="linenumber">528</span></a>                                        <span class="quoted">AOT_model_term_equiv</span>
<a name="L529" href="#L529"><span class="linenumber">529</span></a>  <span class="keyword1"><span class="command">using</span></span> AOT_model_irregular <span class="keyword1"><span class="command">.</span></span>
<a name="L530" href="#L530"><span class="linenumber">530</span></a>
<a name="L531" href="#L531"><span class="linenumber">531</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Our concrete type for individual terms satisfies the type class of
<a name="L532" href="#L532"><span class="linenumber">532</span></a>     individual terms.
<a name="L533" href="#L533"><span class="linenumber">533</span></a>     Note that all unary individuals are regular. In general an individual term
<a name="L534" href="#L534"><span class="linenumber">534</span></a>     may be a tuple and is regular, if at most one tuple element does not denote.›</span></span>
<a name="L535" href="#L535"><span class="linenumber">535</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> κ <span class="main">::</span> <span class="quoted">AOT_IndividualTerm</span>
<a name="L536" href="#L536"><span class="linenumber">536</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L537" href="#L537"><span class="linenumber">537</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_term_equiv_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> κ <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L538" href="#L538"><span class="linenumber">538</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_term_equiv_κ</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> κυ <span class="bound">y</span>›</span></span>
<a name="L539" href="#L539"><span class="linenumber">539</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L540" href="#L540"><span class="linenumber">540</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_denotes_κ</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">¬</span>is_nullκ <span class="bound">x</span>›</span></span>
<a name="L541" href="#L541"><span class="linenumber">541</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_regular_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L542" href="#L542"><span class="linenumber">542</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_regular_κ</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> True›</span></span>
<a name="L543" href="#L543"><span class="linenumber">543</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_irregular_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span>κ <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> κ <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L544" href="#L544"><span class="linenumber">544</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_irregular_κ</span> <span class="main">≡</span> <span class="keyword1">SOME</span> <span class="bound">φ</span> <span class="main">.</span> AOT_model_irregular_spec <span class="bound">φ</span>
<a name="L545" href="#L545"><span class="linenumber">545</span></a>                                        AOT_model_regular AOT_model_term_equiv›</span></span>
<a name="L546" href="#L546"><span class="linenumber">546</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L547" href="#L547"><span class="linenumber">547</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">::</span> κ<span class="main">.</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L548" href="#L548"><span class="linenumber">548</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">‹ωκ undefined›</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L549" href="#L549"><span class="linenumber">549</span></a>       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def<span class="main">)</span>
<a name="L550" href="#L550"><span class="linenumber">550</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L551" href="#L551"><span class="linenumber">551</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">::</span> κ<span class="main">.</span> <span class="main">¬</span>AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L552" href="#L552"><span class="linenumber">552</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">‹nullκ undefined›</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L553" href="#L553"><span class="linenumber">553</span></a>       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def AOT_model_regular_κ_def<span class="main">)</span>
<a name="L554" href="#L554"><span class="linenumber">554</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L555" href="#L555"><span class="linenumber">555</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>AOT_model_regular <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">¬</span> AOT_model_denotes <span class="skolem">x</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">κ</span>
<a name="L556" href="#L556"><span class="linenumber">556</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_κ_def<span class="main">)</span>
<a name="L557" href="#L557"><span class="linenumber">557</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L558" href="#L558"><span class="linenumber">558</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹equivp <span class="main">(</span>AOT_model_term_equiv <span class="main">::</span> κ <span class="main">⇒</span> κ <span class="main">⇒</span> bool<span class="main">)</span>›</span></span>
<a name="L559" href="#L559"><span class="linenumber">559</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> equivpI<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> reflpI exI sympI transpI<span class="main">)</span>
<a name="L560" href="#L560"><span class="linenumber">560</span></a>       <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_κ_def<span class="main">)</span>
<a name="L561" href="#L561"><span class="linenumber">561</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L562" href="#L562"><span class="linenumber">562</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted">κ</span>
<a name="L563" href="#L563"><span class="linenumber">563</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> AOT_model_denotes <span class="skolem">x</span> <span class="main">=</span> AOT_model_denotes <span class="skolem">y</span>›</span></span>
<a name="L564" href="#L564"><span class="linenumber">564</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_denotes_κ_def AOT_model_term_equiv_κ_def κ.exhaust_disc
<a name="L565" href="#L565"><span class="linenumber">565</span></a>              κυ.simps υ.disc<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>3<span class="main"><span class="main">,</span></span>5<span class="main"><span class="main">,</span></span>6<span class="main"><span class="main">)</span></span> is_ακ_def is_ωκ_def is_nullκ_def<span class="main">)</span>
<a name="L566" href="#L566"><span class="linenumber">566</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L567" href="#L567"><span class="linenumber">567</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted">κ</span>
<a name="L568" href="#L568"><span class="linenumber">568</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> AOT_model_regular <span class="skolem">x</span> <span class="main">=</span> AOT_model_regular <span class="skolem">y</span>›</span></span>
<a name="L569" href="#L569"><span class="linenumber">569</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_κ_def<span class="main">)</span>
<a name="L570" href="#L570"><span class="linenumber">570</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L571" href="#L571"><span class="linenumber">571</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"AOT_model_irregular_spec <span class="main">(</span><span class="main">λ</span> <span class="bound">φ</span> <span class="main">(</span><span class="bound">x</span><span class="main">::</span>κ<span class="main">)</span> <span class="main">.</span>  <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> False<span class="main">)</span>
<a name="L572" href="#L572"><span class="linenumber">572</span></a>          AOT_model_regular AOT_model_term_equiv"</span></span>
<a name="L573" href="#L573"><span class="linenumber">573</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L574" href="#L574"><span class="linenumber">574</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular_spec <span class="main">(</span>AOT_model_irregular<span class="main">::</span><span class="main">(</span>κ<span class="main">⇒</span>𝗈<span class="main">)</span> <span class="main">⇒</span> κ <span class="main">⇒</span> 𝗈<span class="main">)</span>
<a name="L575" href="#L575"><span class="linenumber">575</span></a>          AOT_model_regular AOT_model_term_equiv›</span></span>
<a name="L576" href="#L576"><span class="linenumber">576</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_irregular_κ_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> someI_ex<span class="main">)</span>
<a name="L577" href="#L577"><span class="linenumber">577</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L578" href="#L578"><span class="linenumber">578</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L579" href="#L579"><span class="linenumber">579</span></a>
<a name="L580" href="#L580"><span class="linenumber">580</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We define relations among individuals as proposition valued functions.
<a name="L581" href="#L581"><span class="linenumber">581</span></a>     <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">emph</span></span> ‹Denoting›<span class="antiquote"><span class="antiquote">}</span></span></span></span> relations among single individuals will match the
<a name="L582" href="#L582"><span class="linenumber">582</span></a>     urrelations introduced above.›</span></span>
<a name="L583" href="#L583"><span class="linenumber">583</span></a><span class="keyword1"><span class="command">typedef</span></span> <span class="tfree">'a</span> rel <span class="main">(</span><span class="quoted">‹<span class="keyword1">&lt;</span>_<span class="keyword1">&gt;</span>›</span><span class="main">)</span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹UNIV<span class="main">::</span><span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm <span class="main">⇒</span> 𝗈<span class="main">)</span> set›</span></span> <span class="keyword1"><span class="command">..</span></span>
<a name="L584" href="#L584"><span class="linenumber">584</span></a><span class="keyword1"><span class="command">setup_lifting</span></span> type_definition_rel
<a name="L585" href="#L585"><span class="linenumber">585</span></a>
<a name="L586" href="#L586"><span class="linenumber">586</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹We use the transformation specified above to "fix" the behaviour of
<a name="L587" href="#L587"><span class="linenumber">587</span></a>     functions on irregular terms.›</span></span>
<a name="L588" href="#L588"><span class="linenumber">588</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">fix_irregular</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span> <span class="main">⇒</span> 𝗈<span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L589" href="#L589"><span class="linenumber">589</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">fix_irregular</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">if</span> AOT_model_regular <span class="bound">x</span>
<a name="L590" href="#L590"><span class="linenumber">590</span></a>                          <span class="keyword1">then</span> <span class="bound">φ</span> <span class="bound">x</span> <span class="keyword1">else</span> AOT_model_irregular <span class="bound">φ</span> <span class="bound">x</span>›</span></span>
<a name="L591" href="#L591"><span class="linenumber">591</span></a><span class="keyword1"><span class="command">lemma</span></span> fix_irregular_denoting<span class="main">:</span>
<a name="L592" href="#L592"><span class="linenumber">592</span></a>  <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="free">x</span> <span class="main">⟹</span> fix_irregular <span class="free">φ</span> <span class="free">x</span> <span class="main">=</span> <span class="free">φ</span> <span class="free">x</span>›</span></span>
<a name="L593" href="#L593"><span class="linenumber">593</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_nondenoting fix_irregular_def<span class="main">)</span>
<a name="L594" href="#L594"><span class="linenumber">594</span></a><span class="keyword1"><span class="command">lemma</span></span> fix_irregular_regular<span class="main">:</span>
<a name="L595" href="#L595"><span class="linenumber">595</span></a>  <span class="quoted"><span class="quoted">‹AOT_model_regular <span class="free">x</span> <span class="main">⟹</span> fix_irregular <span class="free">φ</span> <span class="free">x</span> <span class="main">=</span> <span class="free">φ</span> <span class="free">x</span>›</span></span>
<a name="L596" href="#L596"><span class="linenumber">596</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_nondenoting fix_irregular_def<span class="main">)</span>
<a name="L597" href="#L597"><span class="linenumber">597</span></a><span class="keyword1"><span class="command">lemma</span></span> fix_irregular_irregular<span class="main">:</span>
<a name="L598" href="#L598"><span class="linenumber">598</span></a>  <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_regular <span class="free">x</span> <span class="main">⟹</span> fix_irregular <span class="free">φ</span> <span class="free">x</span> <span class="main">=</span> AOT_model_irregular <span class="free">φ</span> <span class="free">x</span>›</span></span>
<a name="L599" href="#L599"><span class="linenumber">599</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fix_irregular_def<span class="main">)</span>
<a name="L600" href="#L600"><span class="linenumber">600</span></a>
<a name="L601" href="#L601"><span class="linenumber">601</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Relations among individual terms are (potentially non-denoting) terms.
<a name="L602" href="#L602"><span class="linenumber">602</span></a>     A relation denotes, if it agrees on all equivalent terms (i.e. terms sharing
<a name="L603" href="#L603"><span class="linenumber">603</span></a>     urelements), is necessarily false on all non-denoting terms and is
<a name="L604" href="#L604"><span class="linenumber">604</span></a>     well-behaved on irregular terms.›</span></span>
<a name="L605" href="#L605"><span class="linenumber">605</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> rel <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_IndividualTerm</span><span class="main">)</span> <span class="quoted">AOT_IncompleteTerm</span>
<a name="L606" href="#L606"><span class="linenumber">606</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L607" href="#L607"><span class="linenumber">607</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹\linelabel{AOT_model_denotes_rel}›</span></span>
<a name="L608" href="#L608"><span class="linenumber">608</span></a><span class="keyword1"><span class="command">lift_definition</span></span> <span class="class_parameter">AOT_model_denotes_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">is</span></span>
<a name="L609" href="#L609"><span class="linenumber">609</span></a>  <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="bound">φ</span> <span class="bound">x</span> <span class="main">=</span> <span class="bound">φ</span> <span class="bound">y</span><span class="main">)</span> <span class="main">∧</span>
<a name="L610" href="#L610"><span class="linenumber">610</span></a>         <span class="main">(</span><span class="main">∀</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> AOT_model_denotes <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span>
<a name="L611" href="#L611"><span class="linenumber">611</span></a>         <span class="main">(</span><span class="main">∀</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">¬</span>AOT_model_regular <span class="bound">x</span> <span class="main">⟶</span> <span class="bound">φ</span> <span class="bound">x</span> <span class="main">=</span> AOT_model_irregular <span class="bound">φ</span> <span class="bound">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">.</span></span>
<a name="L612" href="#L612"><span class="linenumber">612</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L613" href="#L613"><span class="linenumber">613</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="main">(</span>fix_irregular <span class="skolem">φ</span><span class="main">)</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">φ</span> <span class="skolem">x</span>›</span></span>
<a name="L614" href="#L614"><span class="linenumber">614</span></a>    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">φ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span>
<a name="L615" href="#L615"><span class="linenumber">615</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_model_irregular_eqI<span class="main">)</span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fix_irregular_def<span class="main">)</span>
<a name="L616" href="#L616"><span class="linenumber">616</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">x</span> <span class="main">::</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L617" href="#L617"><span class="linenumber">617</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹Abs_rel <span class="main">(</span>fix_irregular <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> False<span class="main">)</span><span class="main">)</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L618" href="#L618"><span class="linenumber">618</span></a>       <span class="main">(</span><span class="operator">transfer</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp fix_irregular_def
<a name="L619" href="#L619"><span class="linenumber">619</span></a>                             AOT_model_irregular_equiv AOT_model_term_equiv_regular
<a name="L620" href="#L620"><span class="linenumber">620</span></a>                             AOT_model_irregular_false<span class="main">)</span>
<a name="L621" href="#L621"><span class="linenumber">621</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L622" href="#L622"><span class="linenumber">622</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">f</span> <span class="main">::</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">.</span> <span class="main">¬</span>AOT_model_denotes <span class="bound">f</span>›</span></span>
<a name="L623" href="#L623"><span class="linenumber">623</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">‹Abs_rel <span class="main"><span class="main"><span class="main">(</span></span></span><span class="main"><span class="main"><span class="main">λ</span></span></span><span class="bound"><span class="bound"><span class="bound">x</span></span></span><span class="main"><span class="main"><span class="main">.</span></span></span> <span class="keyword1"><span class="keyword1"><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> True<span class="main"><span class="main"><span class="main">)</span></span></span>›</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span>
<a name="L624" href="#L624"><span class="linenumber">624</span></a>        <span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_rel.abs_eq AOT_model_nondenoting_ex
<a name="L625" href="#L625"><span class="linenumber">625</span></a>                   AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L626" href="#L626"><span class="linenumber">626</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L627" href="#L627"><span class="linenumber">627</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L628" href="#L628"><span class="linenumber">628</span></a>
<a name="L629" href="#L629"><span class="linenumber">629</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Auxiliary lemmata.›</span></span>
<a name="L630" href="#L630"><span class="linenumber">630</span></a>
<a name="L631" href="#L631"><span class="linenumber">631</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_term_equiv_eps<span class="main">:</span>
<a name="L632" href="#L632"><span class="linenumber">632</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">κ</span><span class="main">)</span><span class="main">)</span> <span class="free">κ</span>›</span></span>
<a name="L633" href="#L633"><span class="linenumber">633</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="free">κ</span> <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">κ</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L634" href="#L634"><span class="linenumber">634</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="free">κ</span> <span class="free">κ'</span> <span class="main">⟹</span>
<a name="L635" href="#L635"><span class="linenumber">635</span></a>         <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">κ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">κ'</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L636" href="#L636"><span class="linenumber">636</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_term_equiv_part_equivp equivp_def someI_ex<span class="main">)</span>
<a name="L637" href="#L637"><span class="linenumber">637</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_term_equiv_part_equivp equivp_def someI_ex<span class="main">)</span>
<a name="L638" href="#L638"><span class="linenumber">638</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_term_equiv_part_equivp equivp_def<span class="main">)</span>
<a name="L639" href="#L639"><span class="linenumber">639</span></a>
<a name="L640" href="#L640"><span class="linenumber">640</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_denotes_Abs_rel_fix_irregularI<span class="main">:</span>
<a name="L641" href="#L641"><span class="linenumber">641</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟹</span> <span class="free">φ</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">φ</span> <span class="bound">y</span>›</span></span>
<a name="L642" href="#L642"><span class="linenumber">642</span></a>      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="free">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟹</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L643" href="#L643"><span class="linenumber">643</span></a>    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span>fix_irregular <span class="free">φ</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L644" href="#L644"><span class="linenumber">644</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L645" href="#L645"><span class="linenumber">645</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="free">φ</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular
<a name="L646" href="#L646"><span class="linenumber">646</span></a>          <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">if</span> AOT_model_regular <span class="bound">x</span> <span class="keyword1">then</span> <span class="free">φ</span> <span class="bound">x</span> <span class="keyword1">else</span> AOT_model_irregular <span class="free">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="skolem">x</span>›</span></span>
<a name="L647" href="#L647"><span class="linenumber">647</span></a>    <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span> AOT_model_regular <span class="skolem">x</span>›</span></span>
<a name="L648" href="#L648"><span class="linenumber">648</span></a>    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L649" href="#L649"><span class="linenumber">649</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_model_irregular_eqI<span class="main">)</span> <span class="operator">auto</span>
<a name="L650" href="#L650"><span class="linenumber">650</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L651" href="#L651"><span class="linenumber">651</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_denotes_rel.rep_eq
<a name="L652" href="#L652"><span class="linenumber">652</span></a>  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_false Abs_rel_inverse
<a name="L653" href="#L653"><span class="linenumber">653</span></a>                             AOT_model_irregular_equiv fix_irregular_def
<a name="L654" href="#L654"><span class="linenumber">654</span></a>                             AOT_model_term_equiv_regular<span class="main">)</span>
<a name="L655" href="#L655"><span class="linenumber">655</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L656" href="#L656"><span class="linenumber">656</span></a>
<a name="L657" href="#L657"><span class="linenumber">657</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_term_equiv_rel_equiv<span class="main">:</span>
<a name="L658" href="#L658"><span class="linenumber">658</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="free">x</span>›</span></span>
<a name="L659" href="#L659"><span class="linenumber">659</span></a>      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="free">y</span>›</span></span>
<a name="L660" href="#L660"><span class="linenumber">660</span></a>    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span>
<a name="L661" href="#L661"><span class="linenumber">661</span></a>            AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Π</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Π</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L662" href="#L662"><span class="linenumber">662</span></a><span class="keyword1"><span class="command">proof</span></span>
<a name="L663" href="#L663"><span class="linenumber">663</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span>›</span></span>
<a name="L664" href="#L664"><span class="linenumber">664</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">Π</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Π</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L665" href="#L665"><span class="linenumber">665</span></a>                                         AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Π</span> <span class="free">y</span><span class="main">)</span>›</span></span>
<a name="L666" href="#L666"><span class="linenumber">666</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_rel.rep_eq<span class="main">)</span>
<a name="L667" href="#L667"><span class="linenumber">667</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L668" href="#L668"><span class="linenumber">668</span></a>  <span class="keyword1"><span class="command">have</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span>AOT_model_denotes <span class="skolem">x'</span> <span class="main">∧</span> AOT_model_term_equiv <span class="skolem">x'</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span>
<a name="L669" href="#L669"><span class="linenumber">669</span></a>           <span class="main">(</span>AOT_model_denotes <span class="skolem">y'</span> <span class="main">∧</span> AOT_model_term_equiv <span class="skolem">y'</span> <span class="free">y</span><span class="main">)</span>›</span></span>
<a name="L670" href="#L670"><span class="linenumber">670</span></a>    <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x'</span> <span class="skolem">y'</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x'</span> <span class="skolem">y'</span>
<a name="L671" href="#L671"><span class="linenumber">671</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> that AOT_model_term_equiv_denotes AOT_model_term_equiv_part_equivp
<a name="L672" href="#L672"><span class="linenumber">672</span></a>              equivp_def<span class="main">)</span>
<a name="L673" href="#L673"><span class="linenumber">673</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">Π</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Π</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L674" href="#L674"><span class="linenumber">674</span></a>                                           AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Π</span> <span class="free">y</span><span class="main">)</span>›</span></span>
<a name="L675" href="#L675"><span class="linenumber">675</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span>fix_irregular
<a name="L676" href="#L676"><span class="linenumber">676</span></a>    <span class="main">(</span><span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">x</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L677" href="#L677"><span class="linenumber">677</span></a>    <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="var">?r</span>"</span></span><span class="main">)</span>
<a name="L678" href="#L678"><span class="linenumber">678</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_model_denotes_Abs_rel_fix_irregularI<span class="main">)</span>
<a name="L679" href="#L679"><span class="linenumber">679</span></a>       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> 0 AOT_model_denotes_rel.rep_eq Abs_rel_inverse fix_irregular_def
<a name="L680" href="#L680"><span class="linenumber">680</span></a>                   AOT_model_proposition_choice_simp AOT_model_irregular_false<span class="main">)</span>
<a name="L681" href="#L681"><span class="linenumber">681</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="var">?r</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L682" href="#L682"><span class="linenumber">682</span></a>                   AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="var">?r</span> <span class="free">y</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span>
<a name="L683" href="#L683"><span class="linenumber">683</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L684" href="#L684"><span class="linenumber">684</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span>›</span></span>
<a name="L685" href="#L685"><span class="linenumber">685</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inverse AOT_model_proposition_choice_simp
<a name="L686" href="#L686"><span class="linenumber">686</span></a>                  fix_irregular_denoting<span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> AOT_model_term_equiv_part_equivp
<a name="L687" href="#L687"><span class="linenumber">687</span></a>                  fix_irregular_denoting<span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> assms equivp_reflp<span class="main">)</span>
<a name="L688" href="#L688"><span class="linenumber">688</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L689" href="#L689"><span class="linenumber">689</span></a>
<a name="L690" href="#L690"><span class="linenumber">690</span></a>
<a name="L691" href="#L691"><span class="linenumber">691</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Denoting relations among terms of type <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">typ</span></span> <span class="quoted"><span class="quoted">κ</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span> correspond to urrelations.›</span></span>
<a name="L692" href="#L692"><span class="linenumber">692</span></a>
<a name="L693" href="#L693"><span class="linenumber">693</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">rel_to_urrel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span> <span class="main">⇒</span> urrel›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L694" href="#L694"><span class="linenumber">694</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">rel_to_urrel</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> Abs_urrel <span class="main">(</span><span class="main">λ</span> <span class="bound">u</span> <span class="main">.</span> Rep_rel <span class="bound">Π</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span> <span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L695" href="#L695"><span class="linenumber">695</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">urrel_to_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹urrel <span class="main">⇒</span> <span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L696" href="#L696"><span class="linenumber">696</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">urrel_to_rel</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> Abs_rel <span class="main">(</span><span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> Rep_urrel <span class="bound">φ</span> <span class="main">(</span>κυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L697" href="#L697"><span class="linenumber">697</span></a>
<a name="L698" href="#L698"><span class="linenumber">698</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_rel_equiv</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm<span class="main">&gt;</span> <span class="main">⇒</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L699" href="#L699"><span class="linenumber">699</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_rel_equiv</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">f</span> <span class="bound">g</span> <span class="main">.</span> AOT_model_denotes <span class="bound">f</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">g</span> <span class="main">∧</span> <span class="bound">f</span> <span class="main">=</span> <span class="bound">g</span>›</span></span>
<a name="L700" href="#L700"><span class="linenumber">700</span></a>
<a name="L701" href="#L701"><span class="linenumber">701</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_quotient3<span class="main">:</span> <span class="quoted"><span class="quoted">‹Quotient3 AOT_rel_equiv rel_to_urrel urrel_to_rel›</span></span>
<a name="L702" href="#L702"><span class="linenumber">702</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Quotient3I<span class="main">)</span>
<a name="L703" href="#L703"><span class="linenumber">703</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> Rep_urrel <span class="skolem">a</span> <span class="main">(</span>κυ <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> Rep_urrel <span class="skolem">a</span> <span class="bound">u</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L704" href="#L704"><span class="linenumber">704</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ext<span class="main">)</span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> κυ_surj surj_f_inv_f verit_sko_ex'<span class="main">)</span>
<a name="L705" href="#L705"><span class="linenumber">705</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹rel_to_urrel <span class="main">(</span>urrel_to_rel <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">a</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L706" href="#L706"><span class="linenumber">706</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inverse rel_to_urrel_def urrel_to_rel_def
<a name="L707" href="#L707"><span class="linenumber">707</span></a>                  Rep_urrel_inverse<span class="main">)</span>
<a name="L708" href="#L708"><span class="linenumber">708</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L709" href="#L709"><span class="linenumber">709</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_rel_equiv <span class="main">(</span>urrel_to_rel <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>urrel_to_rel <span class="skolem">a</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L710" href="#L710"><span class="linenumber">710</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_rel_equiv_def urrel_to_rel_def
<a name="L711" href="#L711"><span class="linenumber">711</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_κ_def AOT_model_denotes_κ_def
<a name="L712" href="#L712"><span class="linenumber">712</span></a>                           AOT_model_term_equiv_κ_def urrel_null_false<span class="main">)</span>
<a name="L713" href="#L713"><span class="linenumber">713</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L714" href="#L714"><span class="linenumber">714</span></a>  <span class="keyword1"><span class="command">{</span></span>
<a name="L715" href="#L715"><span class="linenumber">715</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span>
<a name="L716" href="#L716"><span class="linenumber">716</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">w</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="skolem">a</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">¬</span> is_nullκ <span class="bound">x</span>›</span></span>
<a name="L717" href="#L717"><span class="linenumber">717</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">a</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span>
<a name="L718" href="#L718"><span class="linenumber">718</span></a>           <span class="main">{</span><span class="bound">φ</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">φ</span> <span class="main">(</span>nullυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span>
<a name="L719" href="#L719"><span class="linenumber">719</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> κ.exhaust_disc κυ.simps υ.disc<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>3<span class="main"><span class="main">,</span></span>5<span class="main"><span class="main">)</span></span>
<a name="L720" href="#L720"><span class="linenumber">720</span></a>                                           υ.disc<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> is_ακ_def is_ωκ_def someI_ex<span class="main">)</span>
<a name="L721" href="#L721"><span class="linenumber">721</span></a>  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 1 <span class="main">=</span> this
<a name="L722" href="#L722"><span class="linenumber">722</span></a>  <span class="keyword1"><span class="command">{</span></span>
<a name="L723" href="#L723"><span class="linenumber">723</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">r</span> <span class="skolem">s</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> 𝗈›</span></span>
<a name="L724" href="#L724"><span class="linenumber">724</span></a>    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="skolem">r</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">r</span> <span class="bound">y</span>›</span></span>
<a name="L725" href="#L725"><span class="linenumber">725</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">w</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="skolem">r</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L726" href="#L726"><span class="linenumber">726</span></a>    <span class="keyword1"><span class="command">hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span>
<a name="L727" href="#L727"><span class="linenumber">727</span></a>              <span class="main">{</span><span class="bound">φ</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">φ</span> <span class="main">(</span>nullυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span>
<a name="L728" href="#L728"><span class="linenumber">728</span></a>      <span class="keyword1"><span class="command">using</span></span> 1 AOT_model_denotes_κ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
<a name="L729" href="#L729"><span class="linenumber">729</span></a>    <span class="keyword3"><span class="command">assume</span></span> B<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="skolem">s</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">s</span> <span class="bound">y</span>›</span></span>
<a name="L730" href="#L730"><span class="linenumber">730</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">w</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="skolem">s</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L731" href="#L731"><span class="linenumber">731</span></a>    <span class="keyword1"><span class="command">hence</span></span> 3<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">s</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">∈</span>
<a name="L732" href="#L732"><span class="linenumber">732</span></a>              <span class="main">{</span><span class="bound">φ</span><span class="main">.</span> <span class="main">∀</span><span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">φ</span> <span class="main">(</span>nullυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>›</span></span>
<a name="L733" href="#L733"><span class="linenumber">733</span></a>      <span class="keyword1"><span class="command">using</span></span> 1 AOT_model_denotes_κ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
<a name="L734" href="#L734"><span class="linenumber">734</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹Abs_urrel <span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L735" href="#L735"><span class="linenumber">735</span></a>            Abs_urrel <span class="main">(</span><span class="main">λ</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">s</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L736" href="#L736"><span class="linenumber">736</span></a>    <span class="keyword1"><span class="command">hence</span></span> 4<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="skolem">u</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">::</span>κ<span class="main">.</span> κυ <span class="bound">x</span> <span class="main">=</span> <span class="skolem">u</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">u</span>
<a name="L737" href="#L737"><span class="linenumber">737</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> Abs_urrel_inject<span class="main">[</span><span class="operator">OF</span> 2 3<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<a name="L738" href="#L738"><span class="linenumber">738</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">s</span> <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L739" href="#L739"><span class="linenumber">739</span></a>      <span class="keyword1"><span class="command">using</span></span> 4<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">‹κυ <span class="skolem">x</span>›</span></span><span class="main">]</span>
<a name="L740" href="#L740"><span class="linenumber">740</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> A B AOT_model_term_equiv_κ_def someI_ex<span class="main">)</span>
<a name="L741" href="#L741"><span class="linenumber">741</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L742" href="#L742"><span class="linenumber">742</span></a>  <span class="keyword1"><span class="command">}</span></span> 
<a name="L743" href="#L743"><span class="linenumber">743</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_rel_equiv <span class="skolem">r</span> <span class="skolem">s</span> <span class="main">=</span> <span class="main">(</span>AOT_rel_equiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">∧</span> AOT_rel_equiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">∧</span>
<a name="L744" href="#L744"><span class="linenumber">744</span></a>                             rel_to_urrel <span class="skolem">r</span> <span class="main">=</span> rel_to_urrel <span class="skolem">s</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span> <span class="skolem">s</span>
<a name="L745" href="#L745"><span class="linenumber">745</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_rel_equiv_def rel_to_urrel_def
<a name="L746" href="#L746"><span class="linenumber">746</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">auto</span>
<a name="L747" href="#L747"><span class="linenumber">747</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L748" href="#L748"><span class="linenumber">748</span></a>
<a name="L749" href="#L749"><span class="linenumber">749</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_quotient<span class="main">:</span>
<a name="L750" href="#L750"><span class="linenumber">750</span></a>  <span class="quoted"><span class="quoted">‹Quotient AOT_rel_equiv rel_to_urrel urrel_to_rel
<a name="L751" href="#L751"><span class="linenumber">751</span></a>            <span class="main">(</span><span class="main">λ</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> AOT_rel_equiv <span class="bound">x</span> <span class="bound">x</span> <span class="main">∧</span> rel_to_urrel <span class="bound">x</span> <span class="main">=</span> <span class="bound">y</span><span class="main">)</span>›</span></span>
<a name="L752" href="#L752"><span class="linenumber">752</span></a>  <span class="keyword1"><span class="command">using</span></span> Quotient3_to_Quotient<span class="main">[</span><span class="operator">OF</span> urrel_quotient3<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L753" href="#L753"><span class="linenumber">753</span></a>
<a name="L754" href="#L754"><span class="linenumber">754</span></a>
<a name="L755" href="#L755"><span class="linenumber">755</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Unary individual terms are always regular and equipped with <span title="(51)">encoding</span> and
<a name="L756" href="#L756"><span class="linenumber">756</span></a>     concreteness. The specification of the type class anticipates the required
<a name="L757" href="#L757"><span class="linenumber">757</span></a>     properties for deriving the axiom system.›</span></span>
<a name="L758" href="#L758"><span class="linenumber">758</span></a><span class="keyword1"><span class="command">class</span></span> AOT_UnaryIndividualTerm <span class="main">=</span>
<a name="L759" href="#L759"><span class="linenumber">759</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_enc</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm<span class="main">&gt;</span> <span class="main">⇒</span> bool›</span></span>
<a name="L760" href="#L760"><span class="linenumber">760</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="free"><span class="free"><span class="free">AOT_model_concrete</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹w <span class="main">⇒</span> <span class="tfree">'a</span> <span class="main">⇒</span> bool›</span></span>
<a name="L761" href="#L761"><span class="linenumber">761</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_unary_regular<span class="main">:</span>
<a name="L762" href="#L762"><span class="linenumber">762</span></a>      <span class="quoted"><span class="quoted">‹AOT_model_regular <span class="free">x</span>›</span></span> <span class="comment1">― ‹All unary individual terms are regular.›</span>
<a name="L763" href="#L763"><span class="linenumber">763</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_enc_relid<span class="main">:</span>
<a name="L764" href="#L764"><span class="linenumber">764</span></a>        <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="free">F</span> <span class="main">⟹</span>
<a name="L765" href="#L765"><span class="linenumber">765</span></a>         AOT_model_denotes <span class="free">G</span> <span class="main">⟹</span>
<a name="L766" href="#L766"><span class="linenumber">766</span></a>         <span class="main">(</span><span class="main">⋀</span> <span class="bound">x</span> <span class="main">.</span> <span class="free">AOT_model_enc</span> <span class="bound">x</span> <span class="free">F</span> <span class="main">⟷</span> <span class="free">AOT_model_enc</span> <span class="bound">x</span> <span class="free">G</span><span class="main">)</span>
<a name="L767" href="#L767"><span class="linenumber">767</span></a>         <span class="main">⟹</span> <span class="free">F</span> <span class="main">=</span> <span class="free">G</span>›</span></span>
<a name="L768" href="#L768"><span class="linenumber">768</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_A_objects<span class="main">:</span>
<a name="L769" href="#L769"><span class="linenumber">769</span></a>        <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span>
<a name="L770" href="#L770"><span class="linenumber">770</span></a>              <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span>
<a name="L771" href="#L771"><span class="linenumber">771</span></a>              <span class="main">(</span><span class="main">∀</span><span class="bound">F</span><span class="main">.</span> AOT_model_denotes <span class="bound">F</span> <span class="main">⟶</span> <span class="free">AOT_model_enc</span> <span class="bound">x</span> <span class="bound">F</span> <span class="main">=</span> <span class="free">φ</span> <span class="bound">F</span><span class="main">)</span>›</span></span>
<a name="L772" href="#L772"><span class="linenumber">772</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_contingent<span class="main">:</span>
<a name="L773" href="#L773"><span class="linenumber">773</span></a>        <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">∧</span> <span class="main">¬</span> <span class="free">AOT_model_concrete</span> w<span class="hidden">⇩</span><sub>0</sub> <span class="bound">x</span>›</span></span>
<a name="L774" href="#L774"><span class="linenumber">774</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_nocoder<span class="main">:</span>
<a name="L775" href="#L775"><span class="linenumber">775</span></a>        <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">x</span> <span class="main">⟹</span> <span class="main">¬</span><span class="free">AOT_model_enc</span> <span class="free">x</span> <span class="free">F</span>›</span></span>
<a name="L776" href="#L776"><span class="linenumber">776</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_concrete_equiv<span class="main">:</span>
<a name="L777" href="#L777"><span class="linenumber">777</span></a>        <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span> <span class="main">⟹</span>
<a name="L778" href="#L778"><span class="linenumber">778</span></a>          <span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">y</span>›</span></span>
<a name="L779" href="#L779"><span class="linenumber">779</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_concrete_denotes<span class="main">:</span>
<a name="L780" href="#L780"><span class="linenumber">780</span></a>        <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">x</span> <span class="main">⟹</span> AOT_model_denotes <span class="free">x</span>›</span></span>
<a name="L781" href="#L781"><span class="linenumber">781</span></a>      <span class="comment1">― ‹The following are properties that will only hold in the extended models.›</span>
<a name="L782" href="#L782"><span class="linenumber">782</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_enc_indistinguishable_all<span class="main">:</span>
<a name="L783" href="#L783"><span class="linenumber">783</span></a>       <span class="quoted"><span class="quoted">‹AOT_ExtendedModel <span class="main">⟹</span>
<a name="L784" href="#L784"><span class="linenumber">784</span></a>        AOT_model_denotes <span class="free">a</span> <span class="main">⟹</span> <span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">a</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L785" href="#L785"><span class="linenumber">785</span></a>        AOT_model_denotes <span class="free">b</span> <span class="main">⟹</span> <span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">b</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L786" href="#L786"><span class="linenumber">786</span></a>        AOT_model_denotes <span class="free">Π</span> <span class="main">⟹</span>
<a name="L787" href="#L787"><span class="linenumber">787</span></a>        <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">⟹</span>
<a name="L788" href="#L788"><span class="linenumber">788</span></a>          <span class="main">(</span><span class="main">⋀</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="free">a</span><span class="main">)</span> <span class="main">=</span>
<a name="L789" href="#L789"><span class="linenumber">789</span></a>                 AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="free">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L790" href="#L790"><span class="linenumber">790</span></a>        <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">⟹</span>
<a name="L791" href="#L791"><span class="linenumber">791</span></a>            <span class="main">(</span><span class="main">⋀</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">⟹</span>
<a name="L792" href="#L792"><span class="linenumber">792</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L793" href="#L793"><span class="linenumber">793</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Π</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L794" href="#L794"><span class="linenumber">794</span></a>            <span class="free">AOT_model_enc</span> <span class="free">a</span> <span class="bound">Π'</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L795" href="#L795"><span class="linenumber">795</span></a>        <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">⟹</span>
<a name="L796" href="#L796"><span class="linenumber">796</span></a>            <span class="main">(</span><span class="main">⋀</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">⟹</span>
<a name="L797" href="#L797"><span class="linenumber">797</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L798" href="#L798"><span class="linenumber">798</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Π</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L799" href="#L799"><span class="linenumber">799</span></a>            <span class="free">AOT_model_enc</span> <span class="free">b</span> <span class="bound">Π'</span><span class="main">)</span>›</span></span>
<a name="L800" href="#L800"><span class="linenumber">800</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_enc_indistinguishable_ex<span class="main">:</span>
<a name="L801" href="#L801"><span class="linenumber">801</span></a>       <span class="quoted"><span class="quoted">‹AOT_ExtendedModel <span class="main">⟹</span>
<a name="L802" href="#L802"><span class="linenumber">802</span></a>        AOT_model_denotes <span class="free">a</span> <span class="main">⟹</span> <span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">a</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L803" href="#L803"><span class="linenumber">803</span></a>        AOT_model_denotes <span class="free">b</span> <span class="main">⟹</span> <span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">b</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L804" href="#L804"><span class="linenumber">804</span></a>        AOT_model_denotes <span class="free">Π</span> <span class="main">⟹</span>
<a name="L805" href="#L805"><span class="linenumber">805</span></a>        <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">⟹</span>
<a name="L806" href="#L806"><span class="linenumber">806</span></a>          <span class="main">(</span><span class="main">⋀</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="free">a</span><span class="main">)</span> <span class="main">=</span>
<a name="L807" href="#L807"><span class="linenumber">807</span></a>                 AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="free">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L808" href="#L808"><span class="linenumber">808</span></a>        <span class="main">(</span><span class="main">∃</span> <span class="bound">Π'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">∧</span> <span class="free">AOT_model_enc</span> <span class="free">a</span> <span class="bound">Π'</span> <span class="main">∧</span>
<a name="L809" href="#L809"><span class="linenumber">809</span></a>            <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span>
<a name="L810" href="#L810"><span class="linenumber">810</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L811" href="#L811"><span class="linenumber">811</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Π</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
<a name="L812" href="#L812"><span class="linenumber">812</span></a>        <span class="main">(</span><span class="main">∃</span> <span class="bound">Π'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">∧</span> <span class="free">AOT_model_enc</span> <span class="free">b</span> <span class="bound">Π'</span> <span class="main">∧</span>
<a name="L813" href="#L813"><span class="linenumber">813</span></a>            <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span>
<a name="L814" href="#L814"><span class="linenumber">814</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L815" href="#L815"><span class="linenumber">815</span></a>                AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Π</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L816" href="#L816"><span class="linenumber">816</span></a>
<a name="L817" href="#L817"><span class="linenumber">817</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Instantiate the class of unary individual terms for our concrete type of
<a name="L818" href="#L818"><span class="linenumber">818</span></a>     individual terms <span class="antiquoted"><span class="antiquoted"><span class="antiquote"><span class="antiquote">@{</span></span><span class="operator"><span class="operator">typ</span></span> <span class="quoted"><span class="quoted">κ</span></span><span class="antiquote"><span class="antiquote">}</span></span></span></span>.›</span></span>
<a name="L819" href="#L819"><span class="linenumber">819</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> κ <span class="main">::</span> <span class="quoted">AOT_UnaryIndividualTerm</span>
<a name="L820" href="#L820"><span class="linenumber">820</span></a><span class="keyword2"><span class="keyword">begin</span></span>                          
<a name="L821" href="#L821"><span class="linenumber">821</span></a>
<a name="L822" href="#L822"><span class="linenumber">822</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_enc_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> <span class="main">&lt;</span>κ<span class="main">&gt;</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L823" href="#L823"><span class="linenumber">823</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_enc_κ</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">x</span> <span class="bound">F</span> <span class="main">.</span>
<a name="L824" href="#L824"><span class="linenumber">824</span></a>      <span class="keyword1">case</span> <span class="bound">x</span> <span class="keyword1">of</span> ακ <span class="bound">a</span> <span class="main">⇒</span> AOT_model_denotes <span class="bound">F</span> <span class="main">∧</span> rel_to_urrel <span class="bound">F</span> <span class="main">∈</span> <span class="bound">a</span>
<a name="L825" href="#L825"><span class="linenumber">825</span></a>              <span class="main">|</span> <span class="main"><span class="bound">_</span></span> <span class="main">⇒</span> False›</span></span>
<a name="L826" href="#L826"><span class="linenumber">826</span></a><span class="keyword1"><span class="command">primrec</span></span> <span class="entity"><span class="class_parameter">AOT_model_concrete_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹w <span class="main">⇒</span> κ <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L827" href="#L827"><span class="linenumber">827</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_concrete_κ</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="main">(</span>ωκ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> AOT_model_concreteω <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="free"><span class="bound"><span class="entity">w</span></span></span>›</span></span>
<a name="L828" href="#L828"><span class="linenumber">828</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_concrete_κ</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="main">(</span>ακ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> False›</span></span>
<a name="L829" href="#L829"><span class="linenumber">829</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_concrete_κ</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="main">(</span>nullκ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> False›</span></span>
<a name="L830" href="#L830"><span class="linenumber">830</span></a>
<a name="L831" href="#L831"><span class="linenumber">831</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_meta_A_objects_κ<span class="main">:</span>
<a name="L832" href="#L832"><span class="linenumber">832</span></a>  <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">::</span> κ<span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span>
<a name="L833" href="#L833"><span class="linenumber">833</span></a>            <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span>
<a name="L834" href="#L834"><span class="linenumber">834</span></a>            <span class="main">(</span><span class="main">∀</span><span class="bound">F</span><span class="main">.</span> AOT_model_denotes <span class="bound">F</span> <span class="main">⟶</span> AOT_model_enc <span class="bound">x</span> <span class="bound">F</span> <span class="main">=</span> <span class="free">φ</span> <span class="bound">F</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="free">φ</span>
<a name="L835" href="#L835"><span class="linenumber">835</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">‹ακ <span class="main"><span class="main">{</span></span><span class="bound"><span class="bound">f</span></span> <span class="main"><span class="main">.</span></span> <span class="free"><span class="free">φ</span></span> <span class="main"><span class="main">(</span></span>urrel_to_rel <span class="bound"><span class="bound">f</span></span><span class="main"><span class="main">)</span></span><span class="main"><span class="main">}</span></span>›</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L836" href="#L836"><span class="linenumber">836</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_enc_κ_def AOT_model_denotes_κ_def<span class="main">)</span>
<a name="L837" href="#L837"><span class="linenumber">837</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def urrel_quotient
<a name="L838" href="#L838"><span class="linenumber">838</span></a>                                Quotient_rep_abs_fold_unmap<span class="main">)</span>
<a name="L839" href="#L839"><span class="linenumber">839</span></a>
<a name="L840" href="#L840"><span class="linenumber">840</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L841" href="#L841"><span class="linenumber">841</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_regular <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">κ</span>
<a name="L842" href="#L842"><span class="linenumber">842</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_κ_def<span class="main">)</span>
<a name="L843" href="#L843"><span class="linenumber">843</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L844" href="#L844"><span class="linenumber">844</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span> <span class="skolem">G</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span>
<a name="L845" href="#L845"><span class="linenumber">845</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">F</span>›</span></span>
<a name="L846" href="#L846"><span class="linenumber">846</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">G</span>›</span></span>
<a name="L847" href="#L847"><span class="linenumber">847</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">x</span><span class="main">.</span> AOT_model_enc <span class="bound">x</span> <span class="skolem">F</span> <span class="main">=</span> AOT_model_enc <span class="bound">x</span> <span class="skolem">G</span>›</span></span>
<a name="L848" href="#L848"><span class="linenumber">848</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">G</span><span class="main">.</span> AOT_model_denotes <span class="bound">G</span> <span class="main">⟶</span> AOT_model_enc <span class="skolem">x</span> <span class="bound">G</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="bound">G</span><span class="main">)</span>›</span></span>
<a name="L849" href="#L849"><span class="linenumber">849</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_meta_A_objects_κ <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L850" href="#L850"><span class="linenumber">850</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="skolem">G</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L851" href="#L851"><span class="linenumber">851</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L852" href="#L852"><span class="linenumber">852</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">::</span> κ<span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span>
<a name="L853" href="#L853"><span class="linenumber">853</span></a>                 <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">¬</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">∧</span>
<a name="L854" href="#L854"><span class="linenumber">854</span></a>                 <span class="main">(</span><span class="main">∀</span><span class="bound">F</span><span class="main">.</span> AOT_model_denotes <span class="bound">F</span> <span class="main">⟶</span> AOT_model_enc <span class="bound">x</span> <span class="bound">F</span> <span class="main">=</span> <span class="skolem">φ</span> <span class="bound">F</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">φ</span>
<a name="L855" href="#L855"><span class="linenumber">855</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_meta_A_objects_κ <span class="keyword1"><span class="command">.</span></span>
<a name="L856" href="#L856"><span class="linenumber">856</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L857" href="#L857"><span class="linenumber">857</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="main">(</span><span class="bound">x</span><span class="main">::</span>κ<span class="main">)</span> <span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span> <span class="main">∧</span> <span class="main">¬</span> AOT_model_concrete w<span class="hidden">⇩</span><sub>0</sub> <span class="bound">x</span>›</span></span>
<a name="L858" href="#L858"><span class="linenumber">858</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_concrete_κ.simps<span class="main">(</span>1<span class="main">)</span> AOT_model_contingent_object <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L859" href="#L859"><span class="linenumber">859</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L860" href="#L860"><span class="linenumber">860</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_concrete <span class="skolem">w</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">¬</span> AOT_model_enc <span class="skolem">x</span> <span class="skolem">F</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">F</span>
<a name="L861" href="#L861"><span class="linenumber">861</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_enc_κ_def κ.case_eq_if
<a name="L862" href="#L862"><span class="linenumber">862</span></a>              κ.collapse<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L863" href="#L863"><span class="linenumber">863</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L864" href="#L864"><span class="linenumber">864</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_concrete <span class="skolem">w</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_concrete <span class="skolem">w</span> <span class="skolem">y</span>›</span></span>
<a name="L865" href="#L865"><span class="linenumber">865</span></a>    <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span>›</span></span>
<a name="L866" href="#L866"><span class="linenumber">866</span></a>    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">w</span>
<a name="L867" href="#L867"><span class="linenumber">867</span></a>    <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">induct</span> <span class="quoted"><span class="skolem">y</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_κ_def<span class="main">)</span>
<a name="L868" href="#L868"><span class="linenumber">868</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L869" href="#L869"><span class="linenumber">869</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_concrete <span class="skolem">w</span> <span class="skolem">x</span> <span class="main">⟹</span> AOT_model_denotes <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">κ</span>
<a name="L870" href="#L870"><span class="linenumber">870</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def κ.collapse<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L871" href="#L871"><span class="linenumber">871</span></a><span class="comment1">(* Extended models only *)</span>
<a name="L872" href="#L872"><span class="linenumber">872</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L873" href="#L873"><span class="linenumber">873</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">w</span> <span class="main">::</span> <span class="quoted">w</span>
<a name="L874" href="#L874"><span class="linenumber">874</span></a>  <span class="keyword3"><span class="command">assume</span></span> ext<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_ExtendedModel›</span></span>
<a name="L875" href="#L875"><span class="linenumber">875</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span>
<a name="L876" href="#L876"><span class="linenumber">876</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∄</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ</span>›</span></span>
<a name="L877" href="#L877"><span class="linenumber">877</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> a_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹ακ <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">κ</span>›</span></span>
<a name="L878" href="#L878"><span class="linenumber">878</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span>
<a name="L879" href="#L879"><span class="linenumber">879</span></a>              AOT_model_denotes_κ_def κ.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> κ.exhaust_sel<span class="main">)</span>
<a name="L880" href="#L880"><span class="linenumber">880</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ'</span>›</span></span>
<a name="L881" href="#L881"><span class="linenumber">881</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∄</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ'</span>›</span></span>
<a name="L882" href="#L882"><span class="linenumber">882</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="keyword2"><span class="keyword">where</span></span> b_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹ακ <span class="skolem">b</span> <span class="main">=</span> <span class="skolem">κ'</span>›</span></span>
<a name="L883" href="#L883"><span class="linenumber">883</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span>
<a name="L884" href="#L884"><span class="linenumber">884</span></a>              AOT_model_denotes_κ_def κ.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> κ.exhaust_sel<span class="main">)</span>
<a name="L885" href="#L885"><span class="linenumber">885</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span> <span class="main">⟹</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ</span><span class="main">)</span> <span class="main">=</span>
<a name="L886" href="#L886"><span class="linenumber">886</span></a>                                   AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ'</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span> <span class="skolem">w</span>
<a name="L887" href="#L887"><span class="linenumber">887</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>κυ <span class="skolem">κ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L888" href="#L888"><span class="linenumber">888</span></a>         AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>κυ <span class="skolem">κ'</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span>
<a name="L889" href="#L889"><span class="linenumber">889</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_rel_rep
<a name="L890" href="#L890"><span class="linenumber">890</span></a>              iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L891" href="#L891"><span class="linenumber">891</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">let</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>Abs_urrel <span class="main">(</span><span class="main">λ</span> <span class="bound">u</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">=</span> κυ <span class="skolem">κ</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">in</span>
<a name="L892" href="#L892"><span class="linenumber">892</span></a>         AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>κυ <span class="skolem">κ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L893" href="#L893"><span class="linenumber">893</span></a>         AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>κυ <span class="skolem">κ'</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L894" href="#L894"><span class="linenumber">894</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L895" href="#L895"><span class="linenumber">895</span></a>  <span class="keyword1"><span class="command">hence</span></span> ασ_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹ασ <span class="skolem">a</span> <span class="main">=</span> ασ <span class="skolem">b</span>›</span></span>
<a name="L896" href="#L896"><span class="linenumber">896</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> Let_def
<a name="L897" href="#L897"><span class="linenumber">897</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> <span class="main"><span class="main">(</span></span>1 2<span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L898" href="#L898"><span class="linenumber">898</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_proposition_choice_simp a_def b_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span><span class="main"><span class="keyword3">+</span></span>
<a name="L899" href="#L899"><span class="linenumber">899</span></a>  <span class="keyword3"><span class="command">assume</span></span> Π_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span>
<a name="L900" href="#L900"><span class="linenumber">900</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">r</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">x</span> <span class="main">.</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="bound">r</span> <span class="main">(</span>ωυ <span class="bound">x</span><span class="main">)</span>›</span></span>
<a name="L901" href="#L901"><span class="linenumber">901</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">‹rel_to_urrel <span class="skolem"><span class="skolem">Π</span></span>›</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L902" href="#L902"><span class="linenumber">902</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L903" href="#L903"><span class="linenumber">903</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> rel_to_urrel_def
<a name="L904" href="#L904"><span class="linenumber">904</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L905" href="#L905"><span class="linenumber">905</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L906" href="#L906"><span class="linenumber">906</span></a>     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def
<a name="L907" href="#L907"><span class="linenumber">907</span></a>              AOT_model_denotes_rel.rep_eq κ.exhaust_disc κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>2<span class="main"><span class="main">,</span></span>3<span class="main"><span class="main">)</span></span>
<a name="L908" href="#L908"><span class="linenumber">908</span></a>              <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span> υ.disc<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">,</span></span>9<span class="main"><span class="main">)</span></span> υ.distinct<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span>
<a name="L909" href="#L909"><span class="linenumber">909</span></a>              is_ακ_def is_ωκ_def verit_sko_ex'<span class="main">)</span>
<a name="L910" href="#L910"><span class="linenumber">910</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq
<a name="L911" href="#L911"><span class="linenumber">911</span></a>          AOT_model_term_equiv_κ_def κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> Π_den verit_sko_ex'<span class="main">)</span>
<a name="L912" href="#L912"><span class="linenumber">912</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> r_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ωυ <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L913" href="#L913"><span class="linenumber">913</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L914" href="#L914"><span class="linenumber">914</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span> <span class="main">⟹</span>
<a name="L915" href="#L915"><span class="linenumber">915</span></a>    <span class="main">(</span><span class="main">⋀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span> <span class="main">⟹</span>
<a name="L916" href="#L916"><span class="linenumber">916</span></a>        AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L917" href="#L917"><span class="linenumber">917</span></a>        AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> AOT_model_enc <span class="skolem">κ</span> <span class="skolem">Π'</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span>
<a name="L918" href="#L918"><span class="linenumber">918</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span> <span class="main">⟹</span>
<a name="L919" href="#L919"><span class="linenumber">919</span></a>    <span class="main">(</span><span class="main">⋀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="main">(</span>ωκ <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L920" href="#L920"><span class="linenumber">920</span></a>            AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> AOT_model_enc <span class="skolem">κ</span> <span class="skolem">Π'</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span>
<a name="L921" href="#L921"><span class="linenumber">921</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span>
<a name="L922" href="#L922"><span class="linenumber">922</span></a>              κ.exhaust_disc is_ακ_def is_ωκ_def is_nullκ_def<span class="main">)</span>
<a name="L923" href="#L923"><span class="linenumber">923</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">⋀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ωυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L924" href="#L924"><span class="linenumber">924</span></a>                 AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">r</span> <span class="main">∈</span> <span class="skolem">a</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span>
<a name="L925" href="#L925"><span class="linenumber">925</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> a_def<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> AOT_model_enc_κ_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L926" href="#L926"><span class="linenumber">926</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def
<a name="L927" href="#L927"><span class="linenumber">927</span></a>            κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L928" href="#L928"><span class="linenumber">928</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">⋀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r'</span> <span class="main">(</span>ωυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L929" href="#L929"><span class="linenumber">929</span></a>                 AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ωυ <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">r'</span> <span class="main">∈</span> <span class="skolem">a</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r'</span>
<a name="L930" href="#L930"><span class="linenumber">930</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> r_prop<span class="keyword1"><span class="command">.</span></span>
<a name="L931" href="#L931"><span class="linenumber">931</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">s</span><span class="main">.</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">r</span> <span class="main">⟹</span> <span class="bound">s</span> <span class="main">∈</span> <span class="skolem">a</span>›</span></span>
<a name="L932" href="#L932"><span class="linenumber">932</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> urrel_to_ωrel_def<span class="main">)</span>
<a name="L933" href="#L933"><span class="linenumber">933</span></a>  <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">s</span><span class="main">.</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">r</span> <span class="main">⟹</span> <span class="bound">s</span> <span class="main">∈</span> <span class="skolem">b</span>›</span></span>
<a name="L934" href="#L934"><span class="linenumber">934</span></a>    <span class="keyword1"><span class="command">using</span></span> ασ_eq_ord_exts_all ασ_eq ext ασ_ασ' <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L935" href="#L935"><span class="linenumber">935</span></a>
<a name="L936" href="#L936"><span class="linenumber">936</span></a>  <span class="keyword3"><span class="command">assume</span></span> Π'_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span>›</span></span>
<a name="L937" href="#L937"><span class="linenumber">937</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span> <span class="main">⟹</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L938" href="#L938"><span class="linenumber">938</span></a>                                         AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L939" href="#L939"><span class="linenumber">939</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L940" href="#L940"><span class="linenumber">940</span></a>         AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L941" href="#L941"><span class="linenumber">941</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main">(</span>1<span class="main">)</span>
<a name="L942" href="#L942"><span class="linenumber">942</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L943" href="#L943"><span class="linenumber">943</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="main">(</span>rel_to_urrel <span class="skolem">Π'</span><span class="main">)</span> <span class="main">(</span>ωυ <span class="skolem">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L944" href="#L944"><span class="linenumber">944</span></a>         AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ωυ <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L945" href="#L945"><span class="linenumber">945</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def
<a name="L946" href="#L946"><span class="linenumber">946</span></a>          κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I r_prop urrel_quotient3 urrel_to_rel_def Π'_den<span class="main">)</span>
<a name="L947" href="#L947"><span class="linenumber">947</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="main">(</span>rel_to_urrel <span class="skolem">Π'</span><span class="main">)</span> <span class="main">=</span> urrel_to_ωrel <span class="skolem">r</span>›</span></span>
<a name="L948" href="#L948"><span class="linenumber">948</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> AOT_urrel_ωequiv_def Quotient3_def urrel_ωrel_quot<span class="main">)</span>
<a name="L949" href="#L949"><span class="linenumber">949</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹rel_to_urrel <span class="skolem">Π'</span> <span class="main">∈</span> <span class="skolem">b</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L950" href="#L950"><span class="linenumber">950</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_model_enc <span class="skolem">κ'</span> <span class="skolem">Π'</span>›</span></span>
<a name="L951" href="#L951"><span class="linenumber">951</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> b_def<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> AOT_model_enc_κ_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Π'_den<span class="main">)</span>
<a name="L952" href="#L952"><span class="linenumber">952</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L953" href="#L953"><span class="linenumber">953</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">w</span> <span class="main">::</span> <span class="quoted">w</span>
<a name="L954" href="#L954"><span class="linenumber">954</span></a>  <span class="keyword3"><span class="command">assume</span></span> ext<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_ExtendedModel›</span></span>
<a name="L955" href="#L955"><span class="linenumber">955</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span>
<a name="L956" href="#L956"><span class="linenumber">956</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∄</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ</span>›</span></span>
<a name="L957" href="#L957"><span class="linenumber">957</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> a_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹ακ <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">κ</span>›</span></span>
<a name="L958" href="#L958"><span class="linenumber">958</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span>
<a name="L959" href="#L959"><span class="linenumber">959</span></a>          AOT_model_denotes_κ_def κ.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> κ.exhaust_sel<span class="main">)</span>
<a name="L960" href="#L960"><span class="linenumber">960</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ'</span>›</span></span>
<a name="L961" href="#L961"><span class="linenumber">961</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∄</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ'</span>›</span></span>
<a name="L962" href="#L962"><span class="linenumber">962</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="keyword2"><span class="keyword">where</span></span> b_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹ακ <span class="skolem">b</span> <span class="main">=</span> <span class="skolem">κ'</span>›</span></span>
<a name="L963" href="#L963"><span class="linenumber">963</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span>
<a name="L964" href="#L964"><span class="linenumber">964</span></a>              AOT_model_denotes_κ_def κ.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> κ.exhaust_sel<span class="main">)</span>
<a name="L965" href="#L965"><span class="linenumber">965</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span> <span class="main">⟹</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ</span><span class="main">)</span> <span class="main">=</span>
<a name="L966" href="#L966"><span class="linenumber">966</span></a>                                   AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ'</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span> <span class="skolem">w</span>
<a name="L967" href="#L967"><span class="linenumber">967</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>κυ <span class="skolem">κ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L968" href="#L968"><span class="linenumber">968</span></a>         AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>κυ <span class="skolem">κ'</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span>
<a name="L969" href="#L969"><span class="linenumber">969</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_rel_rep
<a name="L970" href="#L970"><span class="linenumber">970</span></a>              iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L971" href="#L971"><span class="linenumber">971</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">let</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>Abs_urrel <span class="main">(</span><span class="main">λ</span> <span class="bound">u</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">=</span> κυ <span class="skolem">κ</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">in</span>
<a name="L972" href="#L972"><span class="linenumber">972</span></a>         AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>κυ <span class="skolem">κ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L973" href="#L973"><span class="linenumber">973</span></a>         AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>κυ <span class="skolem">κ'</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L974" href="#L974"><span class="linenumber">974</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L975" href="#L975"><span class="linenumber">975</span></a>  <span class="keyword1"><span class="command">hence</span></span> ασ_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹ασ <span class="skolem">a</span> <span class="main">=</span> ασ <span class="skolem">b</span>›</span></span>
<a name="L976" href="#L976"><span class="linenumber">976</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> Let_def
<a name="L977" href="#L977"><span class="linenumber">977</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> <span class="main"><span class="main">(</span></span>1 2<span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L978" href="#L978"><span class="linenumber">978</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_proposition_choice_simp a_def b_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span><span class="main"><span class="keyword3">+</span></span>
<a name="L979" href="#L979"><span class="linenumber">979</span></a>  <span class="keyword3"><span class="command">assume</span></span> Π_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span>
<a name="L980" href="#L980"><span class="linenumber">980</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">r</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">x</span> <span class="main">.</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="bound">r</span> <span class="main">(</span>ωυ <span class="bound">x</span><span class="main">)</span>›</span></span>
<a name="L981" href="#L981"><span class="linenumber">981</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">‹rel_to_urrel <span class="skolem"><span class="skolem">Π</span></span>›</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L982" href="#L982"><span class="linenumber">982</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L983" href="#L983"><span class="linenumber">983</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> rel_to_urrel_def
<a name="L984" href="#L984"><span class="linenumber">984</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L985" href="#L985"><span class="linenumber">985</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L986" href="#L986"><span class="linenumber">986</span></a>     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def
<a name="L987" href="#L987"><span class="linenumber">987</span></a>          AOT_model_denotes_rel.rep_eq κ.exhaust_disc κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>2<span class="main"><span class="main">,</span></span>3<span class="main"><span class="main">)</span></span>
<a name="L988" href="#L988"><span class="linenumber">988</span></a>          <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span> υ.disc<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> υ.disc<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> υ.distinct<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span>
<a name="L989" href="#L989"><span class="linenumber">989</span></a>          is_ακ_def is_ωκ_def verit_sko_ex'<span class="main">)</span>
<a name="L990" href="#L990"><span class="linenumber">990</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq
<a name="L991" href="#L991"><span class="linenumber">991</span></a>          AOT_model_term_equiv_κ_def κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> Π_den verit_sko_ex'<span class="main">)</span>
<a name="L992" href="#L992"><span class="linenumber">992</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> r_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ωυ <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L993" href="#L993"><span class="linenumber">993</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L994" href="#L994"><span class="linenumber">994</span></a>
<a name="L995" href="#L995"><span class="linenumber">995</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Π'</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">∧</span>
<a name="L996" href="#L996"><span class="linenumber">996</span></a>    AOT_model_enc <span class="skolem">κ</span> <span class="bound">Π'</span> <span class="main">∧</span>
<a name="L997" href="#L997"><span class="linenumber">997</span></a>    <span class="main">(</span><span class="main">∀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L998" href="#L998"><span class="linenumber">998</span></a>                                            AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L999" href="#L999"><span class="linenumber">999</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Π'</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1000" href="#L1000"><span class="linenumber">1000</span></a>      Π'_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span>
<a name="L1001" href="#L1001"><span class="linenumber">1001</span></a>      κ_enc_Π'<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_enc <span class="skolem">κ</span> <span class="skolem">Π'</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span>
<a name="L1002" href="#L1002"><span class="linenumber">1002</span></a>      Π'_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span> <span class="main">⟹</span>
<a name="L1003" href="#L1003"><span class="linenumber">1003</span></a>                    AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L1004" href="#L1004"><span class="linenumber">1004</span></a>                    AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L1005" href="#L1005"><span class="linenumber">1005</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1006" href="#L1006"><span class="linenumber">1006</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π'</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
<a name="L1007" href="#L1007"><span class="linenumber">1007</span></a>        AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">v</span>
<a name="L1008" href="#L1008"><span class="linenumber">1008</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_ω_concrete_in_some_world Π'_prop<span class="main">)</span>
<a name="L1009" href="#L1009"><span class="linenumber">1009</span></a>  <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_urrel_ωequiv <span class="main">(</span>rel_to_urrel <span class="skolem">Π'</span><span class="main">)</span> <span class="main">(</span>rel_to_urrel <span class="skolem">Π</span><span class="main">)</span>›</span></span>
<a name="L1010" href="#L1010"><span class="linenumber">1010</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_urrel_ωequiv_def
<a name="L1011" href="#L1011"><span class="linenumber">1011</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def
<a name="L1012" href="#L1012"><span class="linenumber">1012</span></a>                    κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def
<a name="L1013" href="#L1013"><span class="linenumber">1013</span></a>                    Π_den Π'_den<span class="main">)</span>
<a name="L1014" href="#L1014"><span class="linenumber">1014</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹rel_to_urrel <span class="skolem">Π'</span> <span class="main">∈</span> <span class="skolem">a</span>›</span></span>
<a name="L1015" href="#L1015"><span class="linenumber">1015</span></a>   <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹urrel_to_ωrel <span class="main">(</span>rel_to_urrel <span class="skolem">Π'</span><span class="main">)</span> <span class="main">=</span> urrel_to_ωrel <span class="main">(</span>rel_to_urrel <span class="skolem">Π</span><span class="main">)</span>›</span></span>
<a name="L1016" href="#L1016"><span class="linenumber">1016</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_enc_κ_def κ.simps<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> κ_enc_Π' a_def<span class="main">)</span>
<a name="L1017" href="#L1017"><span class="linenumber">1017</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Quotient3_rel 0 urrel_ωrel_quot<span class="main">)</span>
<a name="L1018" href="#L1018"><span class="linenumber">1018</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">s</span><span class="main">.</span> <span class="bound">s</span> <span class="main">∈</span> <span class="skolem">b</span> <span class="main">∧</span> urrel_to_ωrel <span class="bound">s</span> <span class="main">=</span> urrel_to_ωrel <span class="main">(</span>rel_to_urrel <span class="skolem">Π</span><span class="main">)</span>›</span></span>
<a name="L1019" href="#L1019"><span class="linenumber">1019</span></a>    <span class="keyword1"><span class="command">using</span></span> ασ_eq_ord_exts_ex ασ_eq ext ασ_ασ' <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1020" href="#L1020"><span class="linenumber">1020</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1021" href="#L1021"><span class="linenumber">1021</span></a>    s_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">∈</span> <span class="skolem">b</span> <span class="main">∧</span> urrel_to_ωrel <span class="skolem">s</span> <span class="main">=</span> urrel_to_ωrel <span class="main">(</span>rel_to_urrel <span class="skolem">Π</span><span class="main">)</span>›</span></span>
<a name="L1022" href="#L1022"><span class="linenumber">1022</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1023" href="#L1023"><span class="linenumber">1023</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Π''</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1024" href="#L1024"><span class="linenumber">1024</span></a>    Π''_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹rel_to_urrel <span class="skolem">Π''</span> <span class="main">=</span> <span class="skolem">s</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> Π''_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π''</span>›</span></span>
<a name="L1025" href="#L1025"><span class="linenumber">1025</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_rel_equiv_def Quotient3_def urrel_quotient3<span class="main">)</span>
<a name="L1026" href="#L1026"><span class="linenumber">1026</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_enc <span class="skolem">κ'</span> <span class="skolem">Π''</span>›</span></span>
<a name="L1027" href="#L1027"><span class="linenumber">1027</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_enc_κ_def Π''_den Π''_prop κ.simps<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> b_def s_prop<span class="main">)</span>
<a name="L1028" href="#L1028"><span class="linenumber">1028</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π''</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L1029" href="#L1029"><span class="linenumber">1029</span></a>                 AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">x</span><span class="main">)</span>›</span></span>
<a name="L1030" href="#L1030"><span class="linenumber">1030</span></a>             <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L1031" href="#L1031"><span class="linenumber">1031</span></a>  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">insert</span> that<span class="main">)</span>
<a name="L1032" href="#L1032"><span class="linenumber">1032</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span>›</span></span>
<a name="L1033" href="#L1033"><span class="linenumber">1033</span></a>    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">u</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> ωκ <span class="skolem">u</span>›</span></span>
<a name="L1034" href="#L1034"><span class="linenumber">1034</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">,</span></span>3<span class="main"><span class="main">)</span></span> κ.exhaust<span class="main">)</span>
<a name="L1035" href="#L1035"><span class="linenumber">1035</span></a>    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π''</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L1036" href="#L1036"><span class="linenumber">1036</span></a>          AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">x</span><span class="main">)</span>›</span></span>
<a name="L1037" href="#L1037"><span class="linenumber">1037</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> x_def
<a name="L1038" href="#L1038"><span class="linenumber">1038</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def
<a name="L1039" href="#L1039"><span class="linenumber">1039</span></a>            Π''_den Π''_prop Π_den κυ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I s_prop
<a name="L1040" href="#L1040"><span class="linenumber">1040</span></a>            urrel_quotient3 urrel_to_ωrel_def urrel_to_rel_def<span class="main">)</span>
<a name="L1041" href="#L1041"><span class="linenumber">1041</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L1042" href="#L1042"><span class="linenumber">1042</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Π'</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">∧</span> AOT_model_enc <span class="skolem">κ'</span> <span class="bound">Π'</span> <span class="main">∧</span>
<a name="L1043" href="#L1043"><span class="linenumber">1043</span></a>     <span class="main">(</span><span class="main">∀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span>
<a name="L1044" href="#L1044"><span class="linenumber">1044</span></a>                                             AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Π</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L1045" href="#L1045"><span class="linenumber">1045</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">Π''</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L1046" href="#L1046"><span class="linenumber">1046</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L1047" href="#L1047"><span class="linenumber">1047</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L1048" href="#L1048"><span class="linenumber">1048</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1049" href="#L1049"><span class="linenumber">1049</span></a>
<a name="L1050" href="#L1050"><span class="linenumber">1050</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Products of unary individual terms and individual terms are individual terms.
<a name="L1051" href="#L1051"><span class="linenumber">1051</span></a>     A tuple is regular, if at most one element does not denote. I.e. a pair is
<a name="L1052" href="#L1052"><span class="linenumber">1052</span></a>     regular, if the first (unary) element denotes and the second is regular (i.e.
<a name="L1053" href="#L1053"><span class="linenumber">1053</span></a>     at most one of its recursive tuple elements does not denote), or the first does
<a name="L1054" href="#L1054"><span class="linenumber">1054</span></a>     not denote, but the second denotes (i.e. all its recursive tuple elements
<a name="L1055" href="#L1055"><span class="linenumber">1055</span></a>     denote).›</span></span>
<a name="L1056" href="#L1056"><span class="linenumber">1056</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> prod <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_UnaryIndividualTerm</span><span class="main">,</span> <span class="quoted">AOT_IndividualTerm</span><span class="main">)</span> <span class="quoted">AOT_IndividualTerm</span>
<a name="L1057" href="#L1057"><span class="linenumber">1057</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L1058" href="#L1058"><span class="linenumber">1058</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_regular_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1059" href="#L1059"><span class="linenumber">1059</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_regular_prod</span> <span class="main">≡</span> <span class="main">λ</span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span> AOT_model_regular <span class="bound">y</span> <span class="main">∨</span>
<a name="L1060" href="#L1060"><span class="linenumber">1060</span></a>                                      <span class="main">¬</span>AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">y</span>›</span></span>
<a name="L1061" href="#L1061"><span class="linenumber">1061</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_term_equiv_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1062" href="#L1062"><span class="linenumber">1062</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_term_equiv_prod</span> <span class="main">≡</span>  <span class="main">λ</span> <span class="main">(</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">(</span><span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">,</span><span class="bound">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">.</span>
<a name="L1063" href="#L1063"><span class="linenumber">1063</span></a>    AOT_model_term_equiv <span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">y<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">y<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
<a name="L1064" href="#L1064"><span class="linenumber">1064</span></a><span class="keyword1"><span class="command">function</span></span> <span class="entity"><span class="class_parameter">AOT_model_irregular_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1065" href="#L1065"><span class="linenumber">1065</span></a>  AOT_model_irregular_proj2<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">⟹</span>
<a name="L1066" href="#L1066"><span class="linenumber">1066</span></a>    AOT_model_irregular <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span> <span class="main">=</span>
<a name="L1067" href="#L1067"><span class="linenumber">1067</span></a>    AOT_model_irregular <span class="main">(</span><span class="main">λ</span><span class="bound">y</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x'</span> <span class="main">.</span> AOT_model_term_equiv <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="bound">x'</span><span class="main">,</span> <span class="bound">y</span><span class="main">)</span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">y</span></span></span>›</span></span>
<a name="L1068" href="#L1068"><span class="linenumber">1068</span></a><span class="main">|</span> AOT_model_irregular_proj1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">∧</span> AOT_model_denotes <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="main">⟹</span>
<a name="L1069" href="#L1069"><span class="linenumber">1069</span></a>    AOT_model_irregular <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span> <span class="main">=</span>
<a name="L1070" href="#L1070"><span class="linenumber">1070</span></a>    AOT_model_irregular <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span> <span class="keyword1">SOME</span> <span class="bound">y'</span> <span class="main">.</span> AOT_model_term_equiv <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="bound">y'</span><span class="main">)</span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span>›</span></span>
<a name="L1071" href="#L1071"><span class="linenumber">1071</span></a><span class="main">|</span> AOT_model_irregular_prod_generic<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">∧</span> <span class="main">¬</span>AOT_model_denotes <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="main">⟹</span>
<a name="L1072" href="#L1072"><span class="linenumber">1072</span></a>    AOT_model_irregular <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span> <span class="main">=</span>
<a name="L1073" href="#L1073"><span class="linenumber">1073</span></a>    <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">Φ</span> <span class="main">.</span> AOT_model_irregular_spec <span class="bound">Φ</span> AOT_model_regular AOT_model_term_equiv<span class="main">)</span>
<a name="L1074" href="#L1074"><span class="linenumber">1074</span></a>      <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span>›</span></span>
<a name="L1075" href="#L1075"><span class="linenumber">1075</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> <span class="operator">blast</span>
<a name="L1076" href="#L1076"><span class="linenumber">1076</span></a><span class="keyword1"><span class="command">termination</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"termination"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1077" href="#L1077"><span class="linenumber">1077</span></a>
<a name="L1078" href="#L1078"><span class="linenumber">1078</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L1079" href="#L1079"><span class="linenumber">1079</span></a>  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1080" href="#L1080"><span class="linenumber">1080</span></a>    <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="skolem">y</span>›</span></span>
<a name="L1081" href="#L1081"><span class="linenumber">1081</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_nondenoting_ex AOT_model_denoting_ex<span class="main">)</span>
<a name="L1082" href="#L1082"><span class="linenumber">1082</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">.</span> <span class="main">¬</span>AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L1083" href="#L1083"><span class="linenumber">1083</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_prod_def AOT_model_regular_prod_def<span class="main">)</span>
<a name="L1084" href="#L1084"><span class="linenumber">1084</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L1085" href="#L1085"><span class="linenumber">1085</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹equivp <span class="main">(</span>AOT_model_term_equiv <span class="main">::</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> bool<span class="main">)</span>›</span></span>
<a name="L1086" href="#L1086"><span class="linenumber">1086</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> equivpI<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> reflpI sympI transpI<span class="main"><span class="keyword3">;</span></span>
<a name="L1087" href="#L1087"><span class="linenumber">1087</span></a>        <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def AOT_model_term_equiv_part_equivp
<a name="L1088" href="#L1088"><span class="linenumber">1088</span></a>                  equivp_reflp prod.case_eq_if case_prod_unfold equivp_symp<span class="main">)</span>
<a name="L1089" href="#L1089"><span class="linenumber">1089</span></a>       <span class="main">(</span><span class="operator">metis</span> equivp_transp<span class="main"><span class="main">[</span></span><span class="operator">OF</span> AOT_model_term_equiv_part_equivp<span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L1090" href="#L1090"><span class="linenumber">1090</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L1091" href="#L1091"><span class="linenumber">1091</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_regular <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">¬</span> AOT_model_denotes <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
<a name="L1092" href="#L1092"><span class="linenumber">1092</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_prod_def case_prod_unfold
<a name="L1093" href="#L1093"><span class="linenumber">1093</span></a>          AOT_model_irregular_nondenoting AOT_model_regular_prod_def<span class="main">)</span>
<a name="L1094" href="#L1094"><span class="linenumber">1094</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L1095" href="#L1095"><span class="linenumber">1095</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
<a name="L1096" href="#L1096"><span class="linenumber">1096</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> AOT_model_denotes <span class="skolem">x</span> <span class="main">=</span> AOT_model_denotes <span class="skolem">y</span>›</span></span>
<a name="L1097" href="#L1097"><span class="linenumber">1097</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_prod_def case_prod_beta
<a name="L1098" href="#L1098"><span class="linenumber">1098</span></a>        AOT_model_term_equiv_denotes AOT_model_term_equiv_prod_def <span class="main">)</span>
<a name="L1099" href="#L1099"><span class="linenumber">1099</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L1100" href="#L1100"><span class="linenumber">1100</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
<a name="L1101" href="#L1101"><span class="linenumber">1101</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span> AOT_model_regular <span class="skolem">x</span> <span class="main">=</span> AOT_model_regular <span class="skolem">y</span>›</span></span>
<a name="L1102" href="#L1102"><span class="linenumber">1102</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">induct</span> <span class="quoted"><span class="skolem">y</span></span><span class="main"><span class="keyword3">;</span></span>
<a name="L1103" href="#L1103"><span class="linenumber">1103</span></a>        <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def AOT_model_regular_prod_def<span class="main">)</span>
<a name="L1104" href="#L1104"><span class="linenumber">1104</span></a>       <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes AOT_model_term_equiv_regular<span class="main">)</span>
<a name="L1105" href="#L1105"><span class="linenumber">1105</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L1106" href="#L1106"><span class="linenumber">1106</span></a>  <span class="keyword1"><span class="command">interpret</span></span> sp<span class="main">:</span> AOT_model_irregular_spec <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">φ</span> <span class="main">(</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">)</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> False›</span></span>
<a name="L1107" href="#L1107"><span class="linenumber">1107</span></a>                    <span class="quoted">AOT_model_regular</span> <span class="quoted">AOT_model_term_equiv</span>
<a name="L1108" href="#L1108"><span class="linenumber">1108</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_spec_def AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L1109" href="#L1109"><span class="linenumber">1109</span></a>  <span class="keyword1"><span class="command">have</span></span> ex_spec<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">φ</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈 <span class="main">.</span>
<a name="L1110" href="#L1110"><span class="linenumber">1110</span></a>    AOT_model_irregular_spec <span class="bound">φ</span> AOT_model_regular AOT_model_term_equiv›</span></span>
<a name="L1111" href="#L1111"><span class="linenumber">1111</span></a>    <span class="keyword1"><span class="command">using</span></span> sp.AOT_model_irregular_spec_axioms <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1112" href="#L1112"><span class="linenumber">1112</span></a>  <span class="keyword1"><span class="command">have</span></span> some_spec<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_irregular_spec
<a name="L1113" href="#L1113"><span class="linenumber">1113</span></a>    <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">φ</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈 <span class="main">.</span>
<a name="L1114" href="#L1114"><span class="linenumber">1114</span></a>        AOT_model_irregular_spec <span class="bound">φ</span> AOT_model_regular AOT_model_term_equiv<span class="main">)</span>
<a name="L1115" href="#L1115"><span class="linenumber">1115</span></a>    AOT_model_regular AOT_model_term_equiv›</span></span>
<a name="L1116" href="#L1116"><span class="linenumber">1116</span></a>    <span class="keyword1"><span class="command">using</span></span> someI_ex<span class="main">[</span><span class="operator">OF</span> ex_spec<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
<a name="L1117" href="#L1117"><span class="linenumber">1117</span></a>  <span class="keyword1"><span class="command">interpret</span></span> sp_some<span class="main">:</span> AOT_model_irregular_spec
<a name="L1118" href="#L1118"><span class="linenumber">1118</span></a>    <span class="quoted"><span class="quoted">‹<span class="keyword1">SOME</span> <span class="bound">φ</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈 <span class="main">.</span>
<a name="L1119" href="#L1119"><span class="linenumber">1119</span></a>        AOT_model_irregular_spec <span class="bound">φ</span> AOT_model_regular AOT_model_term_equiv›</span></span>
<a name="L1120" href="#L1120"><span class="linenumber">1120</span></a>    <span class="quoted">AOT_model_regular</span> <span class="quoted">AOT_model_term_equiv</span>
<a name="L1121" href="#L1121"><span class="linenumber">1121</span></a>    <span class="keyword1"><span class="command">using</span></span> some_spec <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1122" href="#L1122"><span class="linenumber">1122</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular_spec <span class="main">(</span>AOT_model_irregular <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span>
<a name="L1123" href="#L1123"><span class="linenumber">1123</span></a>          AOT_model_regular AOT_model_term_equiv›</span></span>
<a name="L1124" href="#L1124"><span class="linenumber">1124</span></a>  <span class="keyword1"><span class="command">proof</span></span>
<a name="L1125" href="#L1125"><span class="linenumber">1125</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="skolem">b</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L1126" href="#L1126"><span class="linenumber">1126</span></a>      <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">φ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">a</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">b</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
<a name="L1127" href="#L1127"><span class="linenumber">1127</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">φ</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_prod.induct<span class="main">)</span>
<a name="L1128" href="#L1128"><span class="linenumber">1128</span></a>         <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_false sp_some.AOT_model_irregular_false<span class="main">)</span>
<a name="L1129" href="#L1129"><span class="linenumber">1129</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>AOT_model_irregular <span class="skolem">φ</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">φ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
<a name="L1130" href="#L1130"><span class="linenumber">1130</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main">)</span>
<a name="L1131" href="#L1131"><span class="linenumber">1131</span></a>  <span class="keyword1"><span class="command">next</span></span>
<a name="L1132" href="#L1132"><span class="linenumber">1132</span></a>    <span class="keyword1"><span class="command">{</span></span>
<a name="L1133" href="#L1133"><span class="linenumber">1133</span></a>      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">⇒</span>𝗈›</span></span>
<a name="L1134" href="#L1134"><span class="linenumber">1134</span></a>      <span class="keyword3"><span class="command">assume</span></span> x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
<a name="L1135" href="#L1135"><span class="linenumber">1135</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
<a name="L1136" href="#L1136"><span class="linenumber">1136</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> xy_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">(</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1137" href="#L1137"><span class="linenumber">1137</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def<span class="main">)</span>
<a name="L1138" href="#L1138"><span class="linenumber">1138</span></a>      <span class="keyword1"><span class="command">{</span></span>
<a name="L1139" href="#L1139"><span class="linenumber">1139</span></a>        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
<a name="L1140" href="#L1140"><span class="linenumber">1140</span></a>        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command"><span class="improper">hence</span></span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
<a name="L1141" href="#L1141"><span class="linenumber">1141</span></a>          <span class="keyword1"><span class="command">using</span></span> AOT_model_term_equiv_denotes AOT_model_term_equiv_regular
<a name="L1142" href="#L1142"><span class="linenumber">1142</span></a>                x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1143" href="#L1143"><span class="linenumber">1143</span></a>        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span>
<a name="L1144" href="#L1144"><span class="linenumber">1144</span></a>                         AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1145" href="#L1145"><span class="linenumber">1145</span></a>          <span class="keyword1"><span class="command">using</span></span> AOT_model_irregular_equiv AOT_model_term_equiv_eps<span class="main">(</span>3<span class="main">)</span>
<a name="L1146" href="#L1146"><span class="linenumber">1146</span></a>                x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<a name="L1147" href="#L1147"><span class="linenumber">1147</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L1148" href="#L1148"><span class="linenumber">1148</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L1149" href="#L1149"><span class="linenumber">1149</span></a>        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">~</span>AOT_model_denotes <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∧</span> AOT_model_denotes <span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
<a name="L1150" href="#L1150"><span class="linenumber">1150</span></a>        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command"><span class="improper">hence</span></span></span> <span class="quoted"><span class="quoted">‹<span class="main">~</span>AOT_model_denotes <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∧</span> AOT_model_denotes <span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
<a name="L1151" href="#L1151"><span class="linenumber">1151</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L1152" href="#L1152"><span class="linenumber">1152</span></a>        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span>
<a name="L1153" href="#L1153"><span class="linenumber">1153</span></a>                         AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1154" href="#L1154"><span class="linenumber">1154</span></a>          <span class="keyword1"><span class="command">using</span></span> AOT_model_irregular_equiv AOT_model_term_equiv_eps<span class="main">(</span>3<span class="main">)</span>
<a name="L1155" href="#L1155"><span class="linenumber">1155</span></a>                x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<a name="L1156" href="#L1156"><span class="linenumber">1156</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L1157" href="#L1157"><span class="linenumber">1157</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L1158" href="#L1158"><span class="linenumber">1158</span></a>        <span class="keyword3"><span class="command">assume</span></span> denotes_x<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">¬</span>AOT_model_denotes <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∧</span> <span class="main">¬</span>AOT_model_denotes <span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1159" href="#L1159"><span class="linenumber">1159</span></a>        <span class="keyword1"><span class="command">hence</span></span> denotes_y<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">¬</span>AOT_model_denotes <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∧</span> <span class="main">¬</span>AOT_model_denotes <span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1160" href="#L1160"><span class="linenumber">1160</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes AOT_model_term_equiv_regular
<a name="L1161" href="#L1161"><span class="linenumber">1161</span></a>                    x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L1162" href="#L1162"><span class="linenumber">1162</span></a>        <span class="keyword1"><span class="command">have</span></span> eps_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">=</span> Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
<a name="L1163" href="#L1163"><span class="linenumber">1163</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv<span class="main">)</span>
<a name="L1164" href="#L1164"><span class="linenumber">1164</span></a>        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1165" href="#L1165"><span class="linenumber">1165</span></a>          <span class="keyword1"><span class="command">using</span></span> denotes_x denotes_y
<a name="L1166" href="#L1166"><span class="linenumber">1166</span></a>          <span class="keyword1"><span class="command">using</span></span> sp_some.AOT_model_irregular_equiv xy_equiv <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L1167" href="#L1167"><span class="linenumber">1167</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L1168" href="#L1168"><span class="linenumber">1168</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L1169" href="#L1169"><span class="linenumber">1169</span></a>        <span class="keyword3"><span class="command">assume</span></span> denotes_x<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∧</span> AOT_model_denotes <span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
<a name="L1170" href="#L1170"><span class="linenumber">1170</span></a>        <span class="keyword1"><span class="command">hence</span></span> denotes_y<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∧</span> AOT_model_denotes <span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span>›</span></span>
<a name="L1171" href="#L1171"><span class="linenumber">1171</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L1172" href="#L1172"><span class="linenumber">1172</span></a>        <span class="keyword1"><span class="command">have</span></span> eps_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1173" href="#L1173"><span class="linenumber">1173</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L1174" href="#L1174"><span class="linenumber">1174</span></a>        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1175" href="#L1175"><span class="linenumber">1175</span></a>          <span class="keyword1"><span class="command">using</span></span> denotes_x denotes_y
<a name="L1176" href="#L1176"><span class="linenumber">1176</span></a>          <span class="keyword1"><span class="command">using</span></span> AOT_model_irregular_nondenoting calculation<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1177" href="#L1177"><span class="linenumber">1177</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L1178" href="#L1178"><span class="linenumber">1178</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span>›</span></span>
<a name="L1179" href="#L1179"><span class="linenumber">1179</span></a>        <span class="keyword1"><span class="command">using</span></span> AOT_model_term_equiv_denotes AOT_model_term_equiv_regular
<a name="L1180" href="#L1180"><span class="linenumber">1180</span></a>              sp_some.AOT_model_irregular_equiv x<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>1</sub>_equiv x<span class="hidden">⇩</span><sub>2</sub>y<span class="hidden">⇩</span><sub>2</sub>_equiv xy_equiv
<a name="L1181" href="#L1181"><span class="linenumber">1181</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1182" href="#L1182"><span class="linenumber">1182</span></a>    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 0 <span class="main">=</span> this
<a name="L1183" href="#L1183"><span class="linenumber">1183</span></a>    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">⟹</span>
<a name="L1184" href="#L1184"><span class="linenumber">1184</span></a>          AOT_model_irregular <span class="skolem">φ</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">φ</span> <span class="skolem">y</span>›</span></span>
<a name="L1185" href="#L1185"><span class="linenumber">1185</span></a>      <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span>
<a name="L1186" href="#L1186"><span class="linenumber">1186</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">induct</span> <span class="quoted"><span class="skolem">y</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def 0<span class="main">)</span>
<a name="L1187" href="#L1187"><span class="linenumber">1187</span></a>  <span class="keyword1"><span class="command">next</span></span>
<a name="L1188" href="#L1188"><span class="linenumber">1188</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">φ</span> <span class="skolem">ψ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈›</span></span>
<a name="L1189" href="#L1189"><span class="linenumber">1189</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_regular <span class="skolem">x</span> <span class="main">⟹</span> <span class="skolem">φ</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">ψ</span> <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L1190" href="#L1190"><span class="linenumber">1190</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">φ</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span> <span class="skolem">y</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">ψ</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span> <span class="skolem">y</span><span class="main">)</span>›</span></span>
<a name="L1191" href="#L1191"><span class="linenumber">1191</span></a>      <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">x</span> <span class="main">∧</span> AOT_model_regular <span class="skolem">y</span> <span class="main">∨</span>
<a name="L1192" href="#L1192"><span class="linenumber">1192</span></a>          <span class="main">¬</span>AOT_model_denotes <span class="skolem">x</span> <span class="main">∧</span> AOT_model_denotes <span class="skolem">y</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
<a name="L1193" href="#L1193"><span class="linenumber">1193</span></a>      <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_regular_prod_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<a name="L1194" href="#L1194"><span class="linenumber">1194</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="skolem">φ</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">ψ</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">)</span>›</span></span>
<a name="L1195" href="#L1195"><span class="linenumber">1195</span></a>      <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">y</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
<a name="L1196" href="#L1196"><span class="linenumber">1196</span></a>    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">ψ</span></span> <span class="quoted"><span class="skolem">φ</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_prod.induct<span class="main">)</span>
<a name="L1197" href="#L1197"><span class="linenumber">1197</span></a>      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>1 <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">φ</span><span class="main">)</span>
<a name="L1198" href="#L1198"><span class="linenumber">1198</span></a>      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
<a name="L1199" href="#L1199"><span class="linenumber">1199</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L1200" href="#L1200"><span class="linenumber">1200</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_eqI AOT_model_irregular_nondenoting
<a name="L1201" href="#L1201"><span class="linenumber">1201</span></a>                  AOT_model_term_equiv_denotes AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L1202" href="#L1202"><span class="linenumber">1202</span></a>    <span class="keyword1"><span class="command">next</span></span>
<a name="L1203" href="#L1203"><span class="linenumber">1203</span></a>      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>2 <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">φ</span><span class="main">)</span>
<a name="L1204" href="#L1204"><span class="linenumber">1204</span></a>      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
<a name="L1205" href="#L1205"><span class="linenumber">1205</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L1206" href="#L1206"><span class="linenumber">1206</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_nondenoting AOT_model_term_equiv_denotes
<a name="L1207" href="#L1207"><span class="linenumber">1207</span></a>                  AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L1208" href="#L1208"><span class="linenumber">1208</span></a>    <span class="keyword1"><span class="command">next</span></span>
<a name="L1209" href="#L1209"><span class="linenumber">1209</span></a>      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>3 <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">φ</span><span class="main">)</span>
<a name="L1210" href="#L1210"><span class="linenumber">1210</span></a>      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
<a name="L1211" href="#L1211"><span class="linenumber">1211</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L1212" href="#L1212"><span class="linenumber">1212</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_regular_prod_def case_prod_conv
<a name="L1213" href="#L1213"><span class="linenumber">1213</span></a>                                       sp_some.AOT_model_irregular_eqI surj_pair<span class="main">)</span>
<a name="L1214" href="#L1214"><span class="linenumber">1214</span></a>    <span class="keyword1"><span class="command">qed</span></span>
<a name="L1215" href="#L1215"><span class="linenumber">1215</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="skolem">φ</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">ψ</span> <span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span>  <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
<a name="L1216" href="#L1216"><span class="linenumber">1216</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> surjective_pairing<span class="main">)</span>
<a name="L1217" href="#L1217"><span class="linenumber">1217</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L1218" href="#L1218"><span class="linenumber">1218</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L1219" href="#L1219"><span class="linenumber">1219</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1220" href="#L1220"><span class="linenumber">1220</span></a>
<a name="L1221" href="#L1221"><span class="linenumber">1221</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Introduction rules for term equivalence on tuple terms.›</span></span>
<a name="L1222" href="#L1222"><span class="linenumber">1222</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_meta_prod_equivI<span class="main">:</span>
<a name="L1223" href="#L1223"><span class="linenumber">1223</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋀</span> <span class="main">(</span><span class="bound">a</span><span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>AOT_UnaryIndividualTerm<span class="main">)</span> <span class="bound">x</span> <span class="main">(</span><span class="bound">y</span> <span class="main">::</span> <span class="tfree">'b</span><span class="main">::</span>AOT_IndividualTerm<span class="main">)</span> <span class="main">.</span>
<a name="L1224" href="#L1224"><span class="linenumber">1224</span></a>            AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟹</span> AOT_model_term_equiv <span class="main">(</span><span class="bound">a</span><span class="main">,</span><span class="bound">x</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span>"</span></span>
<a name="L1225" href="#L1225"><span class="linenumber">1225</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">⋀</span> <span class="main">(</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>AOT_UnaryIndividualTerm<span class="main">)</span> <span class="bound">y</span> <span class="main">(</span><span class="bound">b</span> <span class="main">::</span> <span class="tfree">'b</span><span class="main">::</span>AOT_IndividualTerm<span class="main">)</span> <span class="main">.</span>
<a name="L1226" href="#L1226"><span class="linenumber">1226</span></a>            AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟹</span> AOT_model_term_equiv <span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span> <span class="main">(</span><span class="bound">y</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span>"</span></span>
<a name="L1227" href="#L1227"><span class="linenumber">1227</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_term_equiv_prod_def
<a name="L1228" href="#L1228"><span class="linenumber">1228</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_part_equivp equivp_reflp<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<a name="L1229" href="#L1229"><span class="linenumber">1229</span></a>
<a name="L1230" href="#L1230"><span class="linenumber">1230</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹The unit type and the type of <span title="(192)">propositions</span> are trivial instances of terms.›</span></span>
<a name="L1231" href="#L1231"><span class="linenumber">1231</span></a>
<a name="L1232" href="#L1232"><span class="linenumber">1232</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> unit <span class="main">::</span> <span class="quoted">AOT_Term</span>
<a name="L1233" href="#L1233"><span class="linenumber">1233</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L1234" href="#L1234"><span class="linenumber">1234</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_unit</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹unit <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1235" href="#L1235"><span class="linenumber">1235</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_denotes_unit</span> <span class="main">≡</span> <span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True›</span></span>
<a name="L1236" href="#L1236"><span class="linenumber">1236</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L1237" href="#L1237"><span class="linenumber">1237</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span><span class="main">::</span>unit<span class="main">.</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L1238" href="#L1238"><span class="linenumber">1238</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_unit_def<span class="main">)</span>
<a name="L1239" href="#L1239"><span class="linenumber">1239</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L1240" href="#L1240"><span class="linenumber">1240</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1241" href="#L1241"><span class="linenumber">1241</span></a>
<a name="L1242" href="#L1242"><span class="linenumber">1242</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> 𝗈 <span class="main">::</span> <span class="quoted">AOT_Term</span>
<a name="L1243" href="#L1243"><span class="linenumber">1243</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L1244" href="#L1244"><span class="linenumber">1244</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_𝗈</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹𝗈 <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1245" href="#L1245"><span class="linenumber">1245</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_denotes_𝗈</span> <span class="main">≡</span> <span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True›</span></span>
<a name="L1246" href="#L1246"><span class="linenumber">1246</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L1247" href="#L1247"><span class="linenumber">1247</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span><span class="main">::</span>𝗈<span class="main">.</span> AOT_model_denotes <span class="bound">x</span>›</span></span>
<a name="L1248" href="#L1248"><span class="linenumber">1248</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_𝗈_def<span class="main">)</span>
<a name="L1249" href="#L1249"><span class="linenumber">1249</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L1250" href="#L1250"><span class="linenumber">1250</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1251" href="#L1251"><span class="linenumber">1251</span></a>
<a name="L1252" href="#L1252"><span class="linenumber">1252</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹AOT's variables are modelled by restricting the type of terms to those terms
<a name="L1253" href="#L1253"><span class="linenumber">1253</span></a>     that denote.›</span></span>
<a name="L1254" href="#L1254"><span class="linenumber">1254</span></a><span class="keyword1"><span class="command">typedef</span></span> <span class="tfree">'a</span> AOT_var <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">{</span> <span class="bound">x</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>AOT_Term <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">}</span>›</span></span>
<a name="L1255" href="#L1255"><span class="linenumber">1255</span></a>  <span class="keyword2"><span class="keyword">morphisms</span></span> AOT_term_of_var AOT_var_of_term
<a name="L1256" href="#L1256"><span class="linenumber">1256</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denoting_ex<span class="main">)</span>
<a name="L1257" href="#L1257"><span class="linenumber">1257</span></a>
<a name="L1258" href="#L1258"><span class="linenumber">1258</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Simplify automatically generated theorems and rules.›</span></span>
<a name="L1259" href="#L1259"><span class="linenumber">1259</span></a><span class="keyword1"><span class="command">declare</span></span> AOT_var_of_term_induct<span class="main">[</span><span class="operator">induct</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1260" href="#L1260"><span class="linenumber">1260</span></a>        AOT_var_of_term_cases<span class="main">[</span><span class="operator">cases</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1261" href="#L1261"><span class="linenumber">1261</span></a>        AOT_term_of_var_induct<span class="main">[</span><span class="operator">induct</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1262" href="#L1262"><span class="linenumber">1262</span></a>        AOT_term_of_var_cases<span class="main">[</span><span class="operator">cases</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1263" href="#L1263"><span class="linenumber">1263</span></a><span class="keyword1"><span class="command">lemmas</span></span> AOT_var_of_term_inverse <span class="main">=</span> AOT_var_of_term_inverse<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1264" href="#L1264"><span class="linenumber">1264</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_var_of_term_inject <span class="main">=</span> AOT_var_of_term_inject<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1265" href="#L1265"><span class="linenumber">1265</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_var_of_term_induct <span class="main">=</span>
<a name="L1266" href="#L1266"><span class="linenumber">1266</span></a>          AOT_var_of_term_induct<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">induct</span> <span class="quasi_keyword">type</span><span class="main"><span class="main">:</span></span> AOT_var<span class="main">]</span>
<a name="L1267" href="#L1267"><span class="linenumber">1267</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_var_of_term_cases <span class="main">=</span>
<a name="L1268" href="#L1268"><span class="linenumber">1268</span></a>          AOT_var_of_term_cases<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">cases</span> <span class="quasi_keyword">type</span><span class="main"><span class="main">:</span></span> AOT_var<span class="main">]</span>
<a name="L1269" href="#L1269"><span class="linenumber">1269</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var <span class="main">=</span> AOT_term_of_var<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1270" href="#L1270"><span class="linenumber">1270</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_cases <span class="main">=</span>
<a name="L1271" href="#L1271"><span class="linenumber">1271</span></a>          AOT_term_of_var_cases<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">induct</span> <span class="quasi_keyword"><span title="(782)">pred</span></span><span class="main"><span class="main">:</span></span> AOT_term_of_var<span class="main">]</span>
<a name="L1272" href="#L1272"><span class="linenumber">1272</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_induct <span class="main">=</span>
<a name="L1273" href="#L1273"><span class="linenumber">1273</span></a>          AOT_term_of_var_induct<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">induct</span> <span class="quasi_keyword"><span title="(782)">pred</span></span><span class="main"><span class="main">:</span></span> AOT_term_of_var<span class="main">]</span>
<a name="L1274" href="#L1274"><span class="linenumber">1274</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_inverse <span class="main">=</span> AOT_term_of_var_inverse<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1275" href="#L1275"><span class="linenumber">1275</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_inject <span class="main">=</span> AOT_term_of_var_inject<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1276" href="#L1276"><span class="linenumber">1276</span></a>
<a name="L1277" href="#L1277"><span class="linenumber">1277</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Equivalence by definition is modelled as necessary equivalence.›</span></span>
<a name="L1278" href="#L1278"><span class="linenumber">1278</span></a><span class="keyword1"><span class="command">consts</span></span> AOT_model_equiv_def <span class="main">::</span> <span class="quoted"><span class="quoted">‹𝗈 <span class="main">⇒</span> 𝗈 <span class="main">⇒</span> bool›</span></span>
<a name="L1279" href="#L1279"><span class="linenumber">1279</span></a><span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_model_equiv_def</span><span class="main">)</span>
<a name="L1280" href="#L1280"><span class="linenumber">1280</span></a>  AOT_model_equiv_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_equiv_def <span class="free">φ</span> <span class="free">ψ</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="free">φ</span> <span class="main">=</span>
<a name="L1281" href="#L1281"><span class="linenumber">1281</span></a>                                                         AOT_model_valid_in <span class="bound">v</span> <span class="free">ψ</span><span class="main">)</span>›</span></span>
<a name="L1282" href="#L1282"><span class="linenumber">1282</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">‹<span class="main"><span class="main"><span class="main">λ</span></span></span> <span class="bound"><span class="bound"><span class="bound">φ</span></span></span> <span class="bound"><span class="bound"><span class="bound">ψ</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">∀</span></span></span> <span class="bound"><span class="bound"><span class="bound">v</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> AOT_model_valid_in <span class="bound"><span class="bound"><span class="bound">v</span></span></span> <span class="bound"><span class="bound"><span class="bound">φ</span></span></span> <span class="main"><span class="main"><span class="main">=</span></span></span>
<a name="L1283" href="#L1283"><span class="linenumber">1283</span></a>                                       AOT_model_valid_in <span class="bound"><span class="bound"><span class="bound">v</span></span></span> <span class="bound"><span class="bound"><span class="bound">ψ</span></span></span>›</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="operator">simp</span>
<a name="L1284" href="#L1284"><span class="linenumber">1284</span></a>
<a name="L1285" href="#L1285"><span class="linenumber">1285</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Identity by definition is modelled as identity for denoting terms plus
<a name="L1286" href="#L1286"><span class="linenumber">1286</span></a>     co-denoting.›</span></span>
<a name="L1287" href="#L1287"><span class="linenumber">1287</span></a><span class="keyword1"><span class="command">consts</span></span> AOT_model_id_def <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'b</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">::</span>AOT_Term<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'b</span> <span class="main">⇒</span> <span class="tfree">'a</span><span class="main">)</span> <span class="main">⇒</span> bool›</span></span>
<a name="L1288" href="#L1288"><span class="linenumber">1288</span></a><span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_model_id_def</span><span class="main">)</span>
<a name="L1289" href="#L1289"><span class="linenumber">1289</span></a>  AOT_model_id_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span>AOT_model_id_def <span class="free">τ</span> <span class="free">σ</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">α</span> <span class="main">.</span> <span class="keyword1">if</span> AOT_model_denotes <span class="main">(</span><span class="free">σ</span> <span class="bound">α</span><span class="main">)</span>
<a name="L1290" href="#L1290"><span class="linenumber">1290</span></a>                                                     <span class="keyword1">then</span> <span class="free">τ</span> <span class="bound">α</span> <span class="main">=</span> <span class="free">σ</span> <span class="bound">α</span>
<a name="L1291" href="#L1291"><span class="linenumber">1291</span></a>                                                     <span class="keyword1">else</span> <span class="main">¬</span>AOT_model_denotes <span class="main">(</span><span class="free">τ</span> <span class="bound">α</span><span class="main">)</span><span class="main">)</span>›</span></span>
<a name="L1292" href="#L1292"><span class="linenumber">1292</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main"><span class="main">λ</span></span></span> <span class="bound"><span class="bound"><span class="bound">τ</span></span></span> <span class="bound"><span class="bound"><span class="bound">σ</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">∀</span></span></span> <span class="bound"><span class="bound"><span class="bound">α</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="keyword1"><span class="keyword1"><span class="keyword1">if</span></span></span> AOT_model_denotes <span class="main"><span class="main"><span class="main">(</span></span></span><span class="bound"><span class="bound"><span class="bound">σ</span></span></span> <span class="bound"><span class="bound"><span class="bound">α</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>
<a name="L1293" href="#L1293"><span class="linenumber">1293</span></a>                                      <span class="keyword1"><span class="keyword1"><span class="keyword1">then</span></span></span> <span class="bound"><span class="bound"><span class="bound">τ</span></span></span> <span class="bound"><span class="bound"><span class="bound">α</span></span></span> <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="bound"><span class="bound"><span class="bound">σ</span></span></span> <span class="bound"><span class="bound"><span class="bound">α</span></span></span>
<a name="L1294" href="#L1294"><span class="linenumber">1294</span></a>                                      <span class="keyword1"><span class="keyword1"><span class="keyword1">else</span></span></span> <span class="main"><span class="main"><span class="main">¬</span></span></span>AOT_model_denotes <span class="main"><span class="main"><span class="main">(</span></span></span><span class="bound"><span class="bound"><span class="bound">τ</span></span></span> <span class="bound"><span class="bound"><span class="bound">α</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L1295" href="#L1295"><span class="linenumber">1295</span></a>     <span class="operator">blast</span>
<a name="L1296" href="#L1296"><span class="linenumber">1296</span></a>
<a name="L1297" href="#L1297"><span class="linenumber">1297</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Models for modally-strict and modally-fragile axioms as necessary,
<a name="L1298" href="#L1298"><span class="linenumber">1298</span></a>     resp. actually valid <span title="(192)">propositions</span>.›</span></span>
<a name="L1299" href="#L1299"><span class="linenumber">1299</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_axiom</span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1300" href="#L1300"><span class="linenumber">1300</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_axiom</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="bound">φ</span>›</span></span>
<a name="L1301" href="#L1301"><span class="linenumber">1301</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_act_axiom</span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1302" href="#L1302"><span class="linenumber">1302</span></a>  <span class="quoted"><span class="quoted">‹<span class="free">AOT_model_act_axiom</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> AOT_model_valid_in w<span class="hidden">⇩</span><sub>0</sub> <span class="bound">φ</span>›</span></span>
<a name="L1303" href="#L1303"><span class="linenumber">1303</span></a>
<a name="L1304" href="#L1304"><span class="linenumber">1304</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_axiomI<span class="main">:</span>
<a name="L1305" href="#L1305"><span class="linenumber">1305</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="free">φ</span>›</span></span>
<a name="L1306" href="#L1306"><span class="linenumber">1306</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_axiom <span class="free">φ</span>›</span></span>
<a name="L1307" href="#L1307"><span class="linenumber">1307</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_axiom_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">..</span></span>
<a name="L1308" href="#L1308"><span class="linenumber">1308</span></a>
<a name="L1309" href="#L1309"><span class="linenumber">1309</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_act_axiomI<span class="main">:</span>
<a name="L1310" href="#L1310"><span class="linenumber">1310</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in w<span class="hidden">⇩</span><sub>0</sub> <span class="free">φ</span>›</span></span>
<a name="L1311" href="#L1311"><span class="linenumber">1311</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_act_axiom <span class="free">φ</span>›</span></span>
<a name="L1312" href="#L1312"><span class="linenumber">1312</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_act_axiom_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">.</span></span>
<a name="L1313" href="#L1313"><span class="linenumber">1313</span></a>
<a name="L1314" href="#L1314"><span class="linenumber">1314</span></a><span class="comment1">(*&lt;*)</span>
<a name="L1315" href="#L1315"><span class="linenumber">1315</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1316" href="#L1316"><span class="linenumber">1316</span></a><span class="comment1">(*&gt;*)</span></pre>
</body>

</html>