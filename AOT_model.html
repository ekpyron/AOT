<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory AOT_model</title>
</head>


<body>
<!--
Github corner taken from: https://github.com/tholman/github-corners/
Licensed as:

The MIT License (MIT)

Copyright (c) 2016 Tim Holman

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//-->
<a href="https://github.com/ekpyron/AOT" class="github-corner" aria-label="View source on GitHub"><svg 
width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: fixed; top: 0; border: 
0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path 
d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 
123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" 
style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 
119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 
154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 
187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 
206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 
156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" 
class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms
ease-in-out}@keyframes
octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@medi
a (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner
.octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<style>
pre .linenumber {
  float:left;
  margin:0 1em 0 -1em;
  border-right:1px solid;
  text-align:right;
  color: black;
  width: 3em;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: moz-none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}

pre .linenumber span {
  display:block;
  padding:0 .5em 0 1em;
}
</style>
<div class="head">
<h1>Theory AOT_model</h1>
</div>

<pre class="source"><a name="L1" href="#L1"><span class="linenumber">1</span></a><span class="comment1">(*&lt;*)</span>
<a name="L2" href="#L2"><span class="linenumber">2</span></a><span class="keyword1"><span class="command">theory</span></span> AOT_model
<a name="L3" href="#L3"><span class="linenumber">3</span></a>  <span class="keyword2"><span class="keyword">imports</span></span> <a href="../../HOL/HOL/Main.html">Main</a>
<a name="L4" href="#L4"><span class="linenumber">4</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L5" href="#L5"><span class="linenumber">5</span></a>
<a name="L6" href="#L6"><span class="linenumber">6</span></a><span class="keyword1"><span class="command">declare</span></span><span class="main">[</span><span class="main">[</span><span class="operator">typedef_overloaded</span><span class="main">]</span><span class="main">]</span>
<a name="L7" href="#L7"><span class="linenumber">7</span></a><span class="comment1">(*&gt;*)</span>
<a name="L8" href="#L8"><span class="linenumber">8</span></a>
<a name="L9" href="#L9"><span class="linenumber">9</span></a><span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">â€¹Model for the Logic of AOTâ€º</span></span>
<a name="L10" href="#L10"><span class="linenumber">10</span></a>
<a name="L11" href="#L11"><span class="linenumber">11</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">â€¹We introduce a primitive type for hyperintensional <span title="(192)">propositions</span>.â€º</span></span>
<a name="L12" href="#L12"><span class="linenumber">12</span></a><span class="keyword1"><span class="command">typedecl</span></span> ğ—ˆ
<a name="L13" href="#L13"><span class="linenumber">13</span></a>
<a name="L14" href="#L14"><span class="linenumber">14</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">â€¹To be able to model modal operators following Kripke semantics, we introduce a primitive
<a name="L15" href="#L15"><span class="linenumber">15</span></a>     type for possible worlds and assert, by axiom, that there is a surjective function mapping
<a name="L16" href="#L16"><span class="linenumber">16</span></a>     <span title="(192)">propositions</span> to the boolean-valued functions acting on possible worlds. We call the result
<a name="L17" href="#L17"><span class="linenumber">17</span></a>     of applying this function to a proposition the Kripke-extension of the proposition.â€º</span></span>
<a name="L18" href="#L18"><span class="linenumber">18</span></a><span class="keyword1"><span class="command">typedecl</span></span> w <span class="comment1">â€•â€¹The primtive type of possible worlds.â€º</span>
<a name="L19" href="#L19"><span class="linenumber">19</span></a><span class="keyword1"><span class="command">axiomatization</span></span> <span class="free">AOT_model_dğ—ˆ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹ğ—ˆ<span class="main">â‡’</span><span class="main">(</span>w<span class="main">â‡’</span>bool<span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">where</span></span> dğ—ˆ_surj<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹surj <span class="free">AOT_model_dğ—ˆ</span>â€º</span></span>
<a name="L20" href="#L20"><span class="linenumber">20</span></a>
<a name="L21" href="#L21"><span class="linenumber">21</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">â€¹Furthermore, the axioms of PLM require the existence of a non-actual world.â€º</span></span>
<a name="L22" href="#L22"><span class="linenumber">22</span></a><span class="keyword1"><span class="command">consts</span></span> w<span class="hidden">â‡©</span><sub>0</sub> <span class="main">::</span> <span class="quoted">w</span> <span class="comment1">â€•â€¹The designated <span title="(481)">actual</span> world.â€º</span>
<a name="L23" href="#L23"><span class="linenumber">23</span></a><span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> AOT_model_nonactual_world<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">w</span> <span class="main">.</span> <span class="bound">w</span> <span class="main">â‰ </span> w<span class="hidden">â‡©</span><sub>0</sub>â€º</span></span>
<a name="L24" href="#L24"><span class="linenumber">24</span></a>
<a name="L25" href="#L25"><span class="linenumber">25</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">â€¹Validity of a proposition in a given world can now be modelled as the result
<a name="L26" href="#L26"><span class="linenumber">26</span></a>     of applying that world to the Kripke-extension of the proposition.â€º</span></span>
<a name="L27" href="#L27"><span class="linenumber">27</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_valid_in</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹w<span class="main">â‡’</span>ğ—ˆ<span class="main">â‡’</span>boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_valid_in</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="main">â‰¡</span> AOT_model_dğ—ˆ <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="free"><span class="bound"><span class="entity">w</span></span></span>â€º</span></span>
<a name="L28" href="#L28"><span class="linenumber">28</span></a>
<a name="L29" href="#L29"><span class="linenumber">29</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">â€¹By construction, we can choose a proposition for any given Kripke-extension, s.t.
<a name="L30" href="#L30"><span class="linenumber">30</span></a>     the proposition is valid in a possible world is its Kripke-extension evaluates to true
<a name="L31" href="#L31"><span class="linenumber">31</span></a>     at that world.â€º</span></span>
<a name="L32" href="#L32"><span class="linenumber">32</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_proposition_choice</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>w<span class="main">â‡’</span>bool<span class="main">)</span> <span class="main">â‡’</span> ğ—ˆâ€º</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">binder</span></span> <span class="quoted">â€¹<span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> â€º</span> 8<span class="main">)</span>
<a name="L33" href="#L33"><span class="linenumber">33</span></a>  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="keyword1"><span class="free">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span></span> <span class="bound">w</span><span class="main"><span class="free">.</span></span> <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="bound">w</span> <span class="main">â‰¡</span> <span class="main">(</span>inv AOT_model_dğ—ˆ<span class="main">)</span> <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span>â€º</span></span>
<a name="L34" href="#L34"><span class="linenumber">34</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_proposition_choice_simp<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="free">w</span> <span class="main">(</span><span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="free">Ï†</span> <span class="bound">w</span><span class="main">)</span> <span class="main">=</span> <span class="free">Ï†</span> <span class="free">w</span>â€º</span></span>
<a name="L35" href="#L35"><span class="linenumber">35</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> surj_f_inv_f<span class="main"><span class="main">[</span></span><span class="operator">OF</span> dğ—ˆ_surj<span class="main"><span class="main">]</span></span> AOT_model_valid_in_def AOT_model_proposition_choice_def<span class="main">)</span>
<a name="L36" href="#L36"><span class="linenumber">36</span></a>
<a name="L37" href="#L37"><span class="linenumber">37</span></a><span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">â€¹Nitpick can trivially show that there are models for the axioms above.â€º</span></span>
<a name="L38" href="#L38"><span class="linenumber">38</span></a><span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">â€¹Trueâ€º</span></span> <span class="keyword1"><span class="command">nitpick</span></span><span class="main">[</span>satisfy<span class="main">,</span> user_axioms<span class="main">,</span> expect <span class="main">=</span> genuine<span class="main">]</span> <span class="keyword1"><span class="command">..</span></span>
<a name="L39" href="#L39"><span class="linenumber">39</span></a>
<a name="L40" href="#L40"><span class="linenumber">40</span></a><span class="keyword1"><span class="command">typedecl</span></span> Ï‰
<a name="L41" href="#L41"><span class="linenumber">41</span></a>
<a name="L42" href="#L42"><span class="linenumber">42</span></a><span class="keyword1"><span class="command">typedecl</span></span> Ïƒ'
<a name="L43" href="#L43"><span class="linenumber">43</span></a><span class="keyword1"><span class="command">consts</span></span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub> <span class="main">::</span> <span class="quoted">Ïƒ'</span>
<a name="L44" href="#L44"><span class="linenumber">44</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">Ïƒcond</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> <span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> Ïƒ' <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L45" href="#L45"><span class="linenumber">45</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">Ïƒcond</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="main">(</span><span class="bound">intersection_set</span><span class="main">,</span> <span class="bound">union_set</span><span class="main">,</span> <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">.</span>
<a name="L46" href="#L46"><span class="linenumber">46</span></a>          <span class="main">(</span><span class="bound">intersection_set</span> <span class="main">âŠ†</span> <span class="bound">union_set</span><span class="main">)</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="bound">union_set</span> <span class="main">=</span> <span class="bound">intersection_set</span> <span class="main">âŸ¶</span> <span class="bound">Ïƒ'</span> <span class="main">=</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub><span class="main">)</span>â€º</span></span>
<a name="L47" href="#L47"><span class="linenumber">47</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">Ïƒset</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">Ïƒset</span> <span class="main">â‰¡</span> Collect Ïƒcondâ€º</span></span>
<a name="L48" href="#L48"><span class="linenumber">48</span></a><span class="keyword1"><span class="command">abbreviation</span></span> <span class="main">(</span>input<span class="main">)</span> <span class="entity">ordext_intersection</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> <span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> Ïƒ' <span class="main">â‡’</span> <span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L49" href="#L49"><span class="linenumber">49</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">ordext_intersection</span> <span class="main">â‰¡</span> fstâ€º</span></span>
<a name="L50" href="#L50"><span class="linenumber">50</span></a><span class="keyword1"><span class="command">abbreviation</span></span> <span class="main">(</span>input<span class="main">)</span> <span class="entity">ordext_union</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> <span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> Ïƒ' <span class="main">â‡’</span> <span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L51" href="#L51"><span class="linenumber">51</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">ordext_union</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">set</span> <span class="main">.</span> fst <span class="main">(</span>snd <span class="bound">set</span><span class="main">)</span>â€º</span></span>
<a name="L52" href="#L52"><span class="linenumber">52</span></a><span class="keyword1"><span class="command">abbreviation</span></span> <span class="main">(</span>input<span class="main">)</span> <span class="entity">ÏƒÏƒ'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> <span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> set <span class="main">Ã—</span> Ïƒ' <span class="main">â‡’</span> Ïƒ'â€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L53" href="#L53"><span class="linenumber">53</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">ÏƒÏƒ'</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">set</span> <span class="main">.</span> snd <span class="main">(</span>snd <span class="bound">set</span><span class="main">)</span>â€º</span></span>
<a name="L54" href="#L54"><span class="linenumber">54</span></a><span class="keyword1"><span class="command">lemma</span></span> ÏƒcondI<span class="main">:</span>
<a name="L55" href="#L55"><span class="linenumber">55</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span> <span class="bound">x</span> <span class="main">âˆˆ</span> ordext_intersection <span class="free">Ïƒ</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">âˆˆ</span> ordext_union <span class="free">Ïƒ</span>â€º</span></span>
<a name="L56" href="#L56"><span class="linenumber">56</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹ordext_union <span class="free">Ïƒ</span> <span class="main">=</span> <span class="main">{}</span> <span class="main">âŸ¹</span> ÏƒÏƒ' <span class="free">Ïƒ</span> <span class="main">=</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub>â€º</span></span>
<a name="L57" href="#L57"><span class="linenumber">57</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹ordext_union <span class="free">Ïƒ</span> <span class="main">â‰ </span> <span class="main">{}</span> <span class="main">âŸ¹</span> ordext_intersection <span class="free">Ïƒ</span> <span class="main">=</span> ordext_union <span class="free">Ïƒ</span> <span class="main">âŸ¹</span> ÏƒÏƒ' <span class="free">Ïƒ</span> <span class="main">=</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub>â€º</span></span>
<a name="L58" href="#L58"><span class="linenumber">58</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹Ïƒcond <span class="free">Ïƒ</span>â€º</span></span>
<a name="L59" href="#L59"><span class="linenumber">59</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> Ïƒcond_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<a name="L60" href="#L60"><span class="linenumber">60</span></a><span class="keyword1"><span class="command">typedef</span></span> Ïƒ <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹Ïƒsetâ€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> Ïƒset_def Ïƒcond_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L61" href="#L61"><span class="linenumber">61</span></a>
<a name="L62" href="#L62"><span class="linenumber">62</span></a><span class="keyword1"><span class="command">typedecl</span></span> null
<a name="L63" href="#L63"><span class="linenumber">63</span></a><span class="keyword1"><span class="command">datatype</span></span> Ï… <span class="main">=</span> Ï‰Ï… <span class="quoted">Ï‰</span> <span class="main">|</span> ÏƒÏ… <span class="quoted">Ïƒ</span> <span class="main">|</span> <span class="entity">is_nullÏ…</span><span class="main">:</span> nullÏ… <span class="quoted">null</span>
<a name="L64" href="#L64"><span class="linenumber">64</span></a>
<a name="L65" href="#L65"><span class="linenumber">65</span></a><span class="keyword1"><span class="command">consts</span></span> AOT_model_concreteÏ‰ <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span>  boolâ€º</span></span>
<a name="L66" href="#L66"><span class="linenumber">66</span></a><span class="keyword1"><span class="command">specification</span></span> <span class="main">(</span><span class="quoted">AOT_model_concreteÏ‰</span><span class="main">)</span>
<a name="L67" href="#L67"><span class="linenumber">67</span></a>  AOT_model_Ï‰_concrete_in_some_world<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concreteÏ‰ <span class="free">x</span> <span class="bound">w</span>â€º</span></span>
<a name="L68" href="#L68"><span class="linenumber">68</span></a>  AOT_model_contingent_object<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concreteÏ‰ <span class="bound">x</span> <span class="bound">w</span> <span class="main">âˆ§</span> <span class="main">Â¬</span>AOT_model_concreteÏ‰ <span class="bound">x</span> w<span class="hidden">â‡©</span><sub>0</sub>â€º</span></span>
<a name="L69" href="#L69"><span class="linenumber">69</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">â€¹<span class="main"><span class="main"><span class="main">Î»</span></span></span><span class="main"><span class="bound"><span class="main"><span class="bound"><span class="main"><span class="bound">_</span></span></span></span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span><span class="main"><span class="main"><span class="main">.</span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span> <span class="main"><span class="main"><span class="main">â‰ </span></span></span> w<span class="hidden">â‡©</span><sub>0</sub>â€º</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_nonactual_world<span class="main">)</span>
<a name="L70" href="#L70"><span class="linenumber">70</span></a>
<a name="L71" href="#L71"><span class="linenumber">71</span></a><span class="keyword1"><span class="command">typedef</span></span> urrel <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span> <span class="bound">Ï†</span> <span class="main">.</span> <span class="main">âˆ€</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">Â¬</span>AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">Ï†</span> <span class="main">(</span>nullÏ… <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">}</span>â€º</span></span>
<a name="L72" href="#L72"><span class="linenumber">72</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">â€¹<span class="main"><span class="main"><span class="main">Î»</span></span></span> <span class="bound"><span class="bound"><span class="bound">x</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="keyword1"><span class="keyword1"><span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">Â¬</span></span></span>is_nullÏ… <span class="bound"><span class="bound"><span class="bound">x</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>â€º</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L73" href="#L73"><span class="linenumber">73</span></a>
<a name="L74" href="#L74"><span class="linenumber">74</span></a><span class="keyword1"><span class="command">datatype</span></span> Îº <span class="main">=</span> Ï‰Îº <span class="quoted">Ï‰</span> <span class="main">|</span> Î±Îº <span class="quoted"><span class="quoted">â€¹urrel setâ€º</span></span> <span class="main">|</span> <span class="entity">is_nullÎº</span><span class="main">:</span> nullÎº <span class="quoted">null</span>
<a name="L75" href="#L75"><span class="linenumber">75</span></a>
<a name="L76" href="#L76"><span class="linenumber">76</span></a><span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">â€¹Extended model versionâ€º</span></span>
<a name="L77" href="#L77"><span class="linenumber">77</span></a>
<a name="L78" href="#L78"><span class="linenumber">78</span></a><span class="keyword1"><span class="command">consts</span></span> Î±Ïƒ_ext <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel set <span class="main">â‡’</span> Ïƒâ€º</span></span>
<a name="L79" href="#L79"><span class="linenumber">79</span></a>
<a name="L80" href="#L80"><span class="linenumber">80</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">urrel_to_Ï‰rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel <span class="main">â‡’</span> <span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L81" href="#L81"><span class="linenumber">81</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">urrel_to_Ï‰rel</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">r</span> <span class="bound">u</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>Ï‰Ï… <span class="bound">u</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L82" href="#L82"><span class="linenumber">82</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">Ï‰rel_to_urrel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">)</span> <span class="main">â‡’</span> urrelâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L83" href="#L83"><span class="linenumber">83</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">Ï‰rel_to_urrel</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">Ï†</span> <span class="main">.</span> Abs_urrel <span class="main">(</span><span class="main">Î»</span> <span class="bound">u</span> <span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="keyword1">case</span> <span class="bound">u</span> <span class="keyword1">of</span> Ï‰Ï… <span class="bound">x</span> <span class="main">â‡’</span> <span class="bound">Ï†</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">|</span> <span class="main"><span class="bound">_</span></span> <span class="main">â‡’</span> False<span class="main">)</span>â€º</span></span>
<a name="L84" href="#L84"><span class="linenumber">84</span></a>
<a name="L85" href="#L85"><span class="linenumber">85</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_urrel_Ï‰equiv</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel <span class="main">â‡’</span> urrel <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L86" href="#L86"><span class="linenumber">86</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_urrel_Ï‰equiv</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">r</span> <span class="bound">s</span> <span class="main">.</span> <span class="main">âˆ€</span> <span class="bound">u</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>Ï‰Ï… <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="bound">s</span> <span class="main">(</span>Ï‰Ï… <span class="bound">u</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L87" href="#L87"><span class="linenumber">87</span></a>
<a name="L88" href="#L88"><span class="linenumber">88</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_Ï‰rel_quot<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Quotient3 AOT_urrel_Ï‰equiv urrel_to_Ï‰rel Ï‰rel_to_urrelâ€º</span></span>
<a name="L89" href="#L89"><span class="linenumber">89</span></a><span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> Quotient3I<span class="main">)</span>
<a name="L90" href="#L90"><span class="linenumber">90</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="main">(</span>Ï‰rel_to_urrel <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">a</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L91" href="#L91"><span class="linenumber">91</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> Ï‰rel_to_urrel_def urrel_to_Ï‰rel_def
<a name="L92" href="#L92"><span class="linenumber">92</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> ext<span class="main">)</span>
<a name="L93" href="#L93"><span class="linenumber">93</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L94" href="#L94"><span class="linenumber">94</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L95" href="#L95"><span class="linenumber">95</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L96" href="#L96"><span class="linenumber">96</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="main">(</span>Ï‰rel_to_urrel <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>Ï‰rel_to_urrel <span class="skolem">a</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L97" href="#L97"><span class="linenumber">97</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> Ï‰rel_to_urrel_def AOT_urrel_Ï‰equiv_def
<a name="L98" href="#L98"><span class="linenumber">98</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span>1 2<span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L99" href="#L99"><span class="linenumber">99</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L100" href="#L100"><span class="linenumber">100</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L101" href="#L101"><span class="linenumber">101</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="skolem">r</span> <span class="skolem">s</span> <span class="main">=</span> <span class="main">(</span>AOT_urrel_Ï‰equiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">âˆ§</span> AOT_urrel_Ï‰equiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">s</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span> <span class="skolem">s</span>
<a name="L102" href="#L102"><span class="linenumber">102</span></a>  <span class="keyword1"><span class="command">proof</span></span>
<a name="L103" href="#L103"><span class="linenumber">103</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="skolem">r</span> <span class="skolem">s</span>â€º</span></span>
<a name="L104" href="#L104"><span class="linenumber">104</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">s</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">u</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">u</span> <span class="skolem">v</span>
<a name="L105" href="#L105"><span class="linenumber">105</span></a>      <span class="keyword1"><span class="command">using</span></span> AOT_urrel_Ï‰equiv_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<a name="L106" href="#L106"><span class="linenumber">106</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">s</span>â€º</span></span>
<a name="L107" href="#L107"><span class="linenumber">107</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> urrel_to_Ï‰rel_def
<a name="L108" href="#L108"><span class="linenumber">108</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<a name="L109" href="#L109"><span class="linenumber">109</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">âˆ§</span> AOT_urrel_Ï‰equiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">s</span>â€º</span></span>
<a name="L110" href="#L110"><span class="linenumber">110</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> AOT_urrel_Ï‰equiv_def
<a name="L111" href="#L111"><span class="linenumber">111</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L112" href="#L112"><span class="linenumber">112</span></a>  <span class="keyword1"><span class="command">next</span></span>
<a name="L113" href="#L113"><span class="linenumber">113</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">âˆ§</span> AOT_urrel_Ï‰equiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">s</span>â€º</span></span>
<a name="L114" href="#L114"><span class="linenumber">114</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">s</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">u</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">u</span> <span class="skolem">v</span>
<a name="L115" href="#L115"><span class="linenumber">115</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> urrel_to_Ï‰rel_def<span class="main">)</span>
<a name="L116" href="#L116"><span class="linenumber">116</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="skolem">r</span> <span class="skolem">s</span>â€º</span></span>
<a name="L117" href="#L117"><span class="linenumber">117</span></a>      <span class="keyword1"><span class="command">using</span></span> AOT_urrel_Ï‰equiv_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L118" href="#L118"><span class="linenumber">118</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L119" href="#L119"><span class="linenumber">119</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L120" href="#L120"><span class="linenumber">120</span></a>
<a name="L121" href="#L121"><span class="linenumber">121</span></a><span class="keyword1"><span class="command">specification</span></span> <span class="main">(</span><span class="quoted">Î±Ïƒ_ext</span><span class="main">)</span>
<a name="L122" href="#L122"><span class="linenumber">122</span></a>  Î±Ïƒ_ext_surj<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹surj Î±Ïƒ_extâ€º</span></span>
<a name="L123" href="#L123"><span class="linenumber">123</span></a>  Î±Ïƒ_eq_ord_exts_all<span class="main">:</span>
<a name="L124" href="#L124"><span class="linenumber">124</span></a>    <span class="quoted"><span class="quoted">â€¹Î±Ïƒ_ext <span class="free">a</span> <span class="main">=</span> Î±Ïƒ_ext <span class="free">b</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">â‹€</span><span class="bound">s</span> <span class="main">.</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="free">r</span> <span class="main">âŸ¹</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="free">a</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">â‹€</span> <span class="bound">s</span> <span class="main">.</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="free">r</span> <span class="main">âŸ¹</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="free">b</span><span class="main">)</span>â€º</span></span>
<a name="L125" href="#L125"><span class="linenumber">125</span></a>  Î±Ïƒ_eq_ord_exts_ex<span class="main">:</span>
<a name="L126" href="#L126"><span class="linenumber">126</span></a>    <span class="quoted"><span class="quoted">â€¹Î±Ïƒ_ext <span class="free">a</span> <span class="main">=</span> Î±Ïƒ_ext <span class="free">b</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">s</span> <span class="main">.</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="free">a</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="free">r</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">âˆƒ</span><span class="bound">s</span> <span class="main">.</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="free">b</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="free">r</span><span class="main">)</span>â€º</span></span>
<a name="L127" href="#L127"><span class="linenumber">127</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L128" href="#L128"><span class="linenumber">128</span></a>  <span class="comment1">(* TODO: find better proof/strategy or simplify *)</span>
<a name="L129" href="#L129"><span class="linenumber">129</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">Î±Ïƒ_wit_intersection</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_intersection</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">urrels</span> <span class="main">.</span> <span class="main">{</span><span class="bound">ordext</span> <span class="main">.</span> <span class="main">âˆ€</span><span class="bound">urrel</span> <span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">âŸ¶</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="bound">urrels</span><span class="main">}</span>â€º</span></span>
<a name="L130" href="#L130"><span class="linenumber">130</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">Î±Ïƒ_wit_union</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_union</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">urrels</span> <span class="main">.</span> <span class="main">{</span><span class="bound">ordext</span> <span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">urrel</span><span class="main">âˆˆ</span><span class="bound">urrels</span> <span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>â€º</span></span>
<a name="L131" href="#L131"><span class="linenumber">131</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">Î±Ïƒ_wit_Ïƒ'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_Ïƒ'</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">urrels</span> <span class="main">.</span> <span class="keyword1">THE</span> <span class="bound">Ïƒ'</span> <span class="main">.</span> <span class="main">âˆƒ</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="bound">urrels</span> <span class="main">.</span>
<a name="L132" href="#L132"><span class="linenumber">132</span></a>          urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆ‰</span> <span class="skolem">Î±Ïƒ_wit_intersection</span> <span class="bound">urrels</span> <span class="main">âˆ§</span>
<a name="L133" href="#L133"><span class="linenumber">133</span></a>          <span class="main">(</span> <span class="main">âˆ€</span> <span class="bound">w</span> <span class="bound">Ïƒ</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¶</span> ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ</span><span class="main">)</span> <span class="main">=</span> <span class="bound">Ïƒ'</span><span class="main">)</span>â€º</span></span>
<a name="L134" href="#L134"><span class="linenumber">134</span></a>
<a name="L135" href="#L135"><span class="linenumber">135</span></a>  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Î±Ïƒ_wit</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Î»</span> <span class="bound">urrels</span> <span class="main">.</span> 
<a name="L136" href="#L136"><span class="linenumber">136</span></a>        <span class="keyword1">let</span> <span class="bound">ordexts</span> <span class="main">=</span> <span class="skolem">Î±Ïƒ_wit_intersection</span> <span class="bound">urrels</span> <span class="keyword1">in</span>
<a name="L137" href="#L137"><span class="linenumber">137</span></a>        <span class="keyword1">let</span> <span class="bound">ordexts'</span> <span class="main">=</span> <span class="skolem">Î±Ïƒ_wit_union</span> <span class="bound">urrels</span> <span class="keyword1">in</span>
<a name="L138" href="#L138"><span class="linenumber">138</span></a>      <span class="main">(</span><span class="bound">ordexts</span><span class="main">,</span> <span class="bound">ordexts'</span><span class="main">,</span> <span class="keyword1">if</span> <span class="main">âˆ€</span> <span class="bound">x</span> <span class="main">âˆˆ</span> <span class="bound">ordexts'</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">âˆˆ</span> <span class="bound">ordexts</span> <span class="keyword1">then</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub> <span class="keyword1">else</span> <span class="skolem">Î±Ïƒ_wit_Ïƒ'</span> <span class="bound">urrels</span><span class="main">)</span>â€º</span></span>
<a name="L139" href="#L139"><span class="linenumber">139</span></a>  <span class="keyword3"><span class="command">define</span></span> <span class="skolem"><span class="skolem">Î±Ïƒ_wit</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel set <span class="main">â‡’</span> Ïƒâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L140" href="#L140"><span class="linenumber">140</span></a>    <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">urrels</span> <span class="main">.</span> Abs_Ïƒ <span class="main">(</span><span class="var">?Î±Ïƒ_wit</span> <span class="bound">urrels</span><span class="main">)</span>â€º</span></span>
<a name="L141" href="#L141"><span class="linenumber">141</span></a>  <span class="keyword1"><span class="command">have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="skolem">y</span> <span class="main">âŸ¶</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="skolem">x</span> <span class="main">âŸ¹</span> <span class="main">âˆƒ</span><span class="bound">urrel</span><span class="main">âˆˆ</span><span class="skolem">x</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="skolem">y</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">y</span> <span class="skolem">x</span>
<a name="L142" href="#L142"><span class="linenumber">142</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> Quotient3_abs_rep urrel_Ï‰rel_quot<span class="main">)</span>
<a name="L143" href="#L143"><span class="linenumber">143</span></a>  <span class="keyword1"><span class="command">have</span></span> wits_in_Ïƒset<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="var">?Î±Ïƒ_wit</span> <span class="skolem">x</span> <span class="main">âˆˆ</span> Ïƒsetâ€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L144" href="#L144"><span class="linenumber">144</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> Ïƒset_def
<a name="L145" href="#L145"><span class="linenumber">145</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L146" href="#L146"><span class="linenumber">146</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> ÏƒcondI<span class="main">)</span>
<a name="L147" href="#L147"><span class="linenumber">147</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Let_def 1 Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L148" href="#L148"><span class="linenumber">148</span></a>
<a name="L149" href="#L149"><span class="linenumber">149</span></a>  <span class="keyword1"><span class="command">{</span></span>
<a name="L150" href="#L150"><span class="linenumber">150</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Ïƒ</span>
<a name="L151" href="#L151"><span class="linenumber">151</span></a>    <span class="keyword1"><span class="command">have</span></span> Ïƒcond<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Ïƒcond <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L152" href="#L152"><span class="linenumber">152</span></a>      <span class="keyword1"><span class="command">using</span></span> Rep_Ïƒ Ïƒset_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L153" href="#L153"><span class="linenumber">153</span></a>    <span class="keyword1"><span class="command">have</span></span> Ïƒcond_empty<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span> <span class="main">âŸ¹</span> <span class="main">(</span>fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span>â€º</span></span>
<a name="L154" href="#L154"><span class="linenumber">154</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Product_Type.Collect_case_prodD Rep_Ïƒ Ïƒcond_def Ïƒset_def curryI curry_case_prod prod.collapse subset_empty<span class="main">)</span>
<a name="L155" href="#L155"><span class="linenumber">155</span></a>    <span class="keyword1"><span class="command">have</span></span> Ïƒcond_univ<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> UNIV <span class="main">âŸ¹</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> UNIVâ€º</span></span>
<a name="L156" href="#L156"><span class="linenumber">156</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Ïƒcond Ïƒcond_def iso_tuple_UNIV_I split_def subsetI subset_antisym<span class="main">)</span>
<a name="L157" href="#L157"><span class="linenumber">157</span></a>    <span class="keyword1"><span class="command">{</span></span>
<a name="L158" href="#L158"><span class="linenumber">158</span></a>      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span>â€º</span></span>
<a name="L159" href="#L159"><span class="linenumber">159</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">=</span> <span class="main">{}</span>â€º</span></span>
<a name="L160" href="#L160"><span class="linenumber">160</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Ïƒcond_empty calculation<span class="main">)</span>
<a name="L161" href="#L161"><span class="linenumber">161</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">=</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub>â€º</span></span>
<a name="L162" href="#L162"><span class="linenumber">162</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Ïƒcond Ïƒcond_def calculation prod.case_eq_if<span class="main">)</span>
<a name="L163" href="#L163"><span class="linenumber">163</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="main">{}</span> <span class="main">=</span> Abs_Ïƒ <span class="main">(</span><span class="main">{}</span><span class="main">,</span><span class="main">{}</span><span class="main">,</span>Ïƒ'<span class="hidden">â‡©</span><sub>0</sub><span class="main">)</span>â€º</span></span>
<a name="L164" href="#L164"><span class="linenumber">164</span></a>        <span class="keyword1"><span class="command">unfolding</span></span> Î±Ïƒ_wit_def
<a name="L165" href="#L165"><span class="linenumber">165</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_Ïƒ_inject<span class="main">)</span>
<a name="L166" href="#L166"><span class="linenumber">166</span></a>        <span class="keyword1"><span class="command">using</span></span> wits_in_Ïƒset <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
<a name="L167" href="#L167"><span class="linenumber">167</span></a>         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> Ïƒcond Ïƒset_def calculation<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> calculation<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> calculation<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> mem_Collect_eq prod.exhaust_sel<span class="main">)</span>
<a name="L168" href="#L168"><span class="linenumber">168</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Let_def Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L169" href="#L169"><span class="linenumber">169</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Quotient3_def urrel_Ï‰rel_quot<span class="main">)</span>
<a name="L170" href="#L170"><span class="linenumber">170</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="main">{}</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span>
<a name="L171" href="#L171"><span class="linenumber">171</span></a>        <span class="keyword1"><span class="command">unfolding</span></span> Î±Ïƒ_wit_def
<a name="L172" href="#L172"><span class="linenumber">172</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Rep_Ïƒ_inverse prod.collapse<span class="main">)</span>
<a name="L173" href="#L173"><span class="linenumber">173</span></a>      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">urrels</span> <span class="main">.</span> <span class="skolem">Î±Ïƒ_wit</span> <span class="bound">urrels</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L174" href="#L174"><span class="linenumber">174</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L175" href="#L175"><span class="linenumber">175</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L176" href="#L176"><span class="linenumber">176</span></a>      <span class="keyword3"><span class="command">assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">â‰ </span> <span class="main">{}</span>â€º</span></span>
<a name="L177" href="#L177"><span class="linenumber">177</span></a>      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">=</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L178" href="#L178"><span class="linenumber">178</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub>â€º</span></span>
<a name="L179" href="#L179"><span class="linenumber">179</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Rep_Ïƒ Ïƒcond_def Ïƒset_def calculation mem_Collect_eq prod.case_eq_if<span class="main">)</span>
<a name="L180" href="#L180"><span class="linenumber">180</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L181" href="#L181"><span class="linenumber">181</span></a>        <span class="keyword1"><span class="command">have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span><span class="bound">ordext</span><span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">urrel</span><span class="main">âˆˆ</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span> <span class="main">â‰ </span> <span class="main">{}</span>â€º</span></span>
<a name="L182" href="#L182"><span class="linenumber">182</span></a>          <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"0"</span> Quotient3_abs_rep calculation urrel_Ï‰rel_quot <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<a name="L183" href="#L183"><span class="linenumber">183</span></a>        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="main">{</span><span class="bound">urrel</span> <span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">=</span> Abs_Ïƒ <span class="main">(</span>ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">,</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">,</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub><span class="main">)</span>â€º</span></span>
<a name="L184" href="#L184"><span class="linenumber">184</span></a>        <span class="keyword1"><span class="command">unfolding</span></span> Î±Ïƒ_wit_def
<a name="L185" href="#L185"><span class="linenumber">185</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_Ïƒ_inject<span class="main">)</span>
<a name="L186" href="#L186"><span class="linenumber">186</span></a>        <span class="keyword1"><span class="command">unfolding</span></span> Ïƒset_def
<a name="L187" href="#L187"><span class="linenumber">187</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L188" href="#L188"><span class="linenumber">188</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> ÏƒcondI<span class="main">)</span>
<a name="L189" href="#L189"><span class="linenumber">189</span></a>            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Let_def Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L190" href="#L190"><span class="linenumber">190</span></a>            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> 1<span class="main">)</span>
<a name="L191" href="#L191"><span class="linenumber">191</span></a>           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Let_def Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L192" href="#L192"><span class="linenumber">192</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Let_def Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L193" href="#L193"><span class="linenumber">193</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> Rep_Ïƒ Ïƒset_def calculation<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> calculation<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> prod.exhaust_sel<span class="main">)</span>
<a name="L194" href="#L194"><span class="linenumber">194</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">only</span><span class="main"><span class="main">:</span></span> Let_def 2 Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L195" href="#L195"><span class="linenumber">195</span></a>        <span class="keyword1"><span class="command">using</span></span> 1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L196" href="#L196"><span class="linenumber">196</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L197" href="#L197"><span class="linenumber">197</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹Ïƒcond <span class="main">(</span>ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">,</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">,</span> Ïƒ'<span class="hidden">â‡©</span><sub>0</sub><span class="main">)</span>â€º</span></span>
<a name="L198" href="#L198"><span class="linenumber">198</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Ïƒcond calculation<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">,</span></span>2<span class="main"><span class="main">)</span></span> surjective_pairing<span class="main">)</span>
<a name="L199" href="#L199"><span class="linenumber">199</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="main">{</span><span class="bound">urrel</span> <span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span>
<a name="L200" href="#L200"><span class="linenumber">200</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Rep_Ïƒ_inverse prod.exhaust_sel<span class="main">)</span>
<a name="L201" href="#L201"><span class="linenumber">201</span></a>      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">urrels</span> <span class="main">.</span> <span class="skolem">Î±Ïƒ_wit</span> <span class="bound">urrels</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L202" href="#L202"><span class="linenumber">202</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L203" href="#L203"><span class="linenumber">203</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L204" href="#L204"><span class="linenumber">204</span></a>      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">â‰ </span> UNIVâ€º</span></span>
<a name="L205" href="#L205"><span class="linenumber">205</span></a>      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">â‰ </span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L206" href="#L206"><span class="linenumber">206</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L207" href="#L207"><span class="linenumber">207</span></a>        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">âŠ†</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L208" href="#L208"><span class="linenumber">208</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Ïƒcond Ïƒcond_def prod.case_eq_if<span class="main">)</span>
<a name="L209" href="#L209"><span class="linenumber">209</span></a>        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">x</span> <span class="main">âˆˆ</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">âˆˆ</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L210" href="#L210"><span class="linenumber">210</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L211" href="#L211"><span class="linenumber">211</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L212" href="#L212"><span class="linenumber">212</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> r_notin_intersection<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">r</span> <span class="main">âˆ‰</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> r_in_union<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">r</span> <span class="main">âˆˆ</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L213" href="#L213"><span class="linenumber">213</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L214" href="#L214"><span class="linenumber">214</span></a>      <span class="keyword1"><span class="command">have</span></span> Î±Ïƒwit_eqI<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span> <span class="keyword2"><span class="keyword">if</span></span>
<a name="L215" href="#L215"><span class="linenumber">215</span></a>        <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_intersection</span> <span class="skolem">x</span> <span class="main">=</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L216" href="#L216"><span class="linenumber">216</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_union</span> <span class="skolem">x</span> <span class="main">=</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L217" href="#L217"><span class="linenumber">217</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_Ïƒ'</span> <span class="skolem">x</span> <span class="main">=</span> ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L218" href="#L218"><span class="linenumber">218</span></a>        <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">unfolding</span></span> Î±Ïƒ_wit_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L219" href="#L219"><span class="linenumber">219</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> emptyE r_in_union r_notin_intersection surjective_pairing type_definition.Rep_inverse type_definition_Ïƒ<span class="main">)</span>
<a name="L220" href="#L220"><span class="linenumber">220</span></a>      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?intersection_part</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span><span class="bound">urrel</span> <span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L221" href="#L221"><span class="linenumber">221</span></a>      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?union_part</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span><span class="bound">urrel</span> <span class="main">.</span> <span class="main">(</span>urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L222" href="#L222"><span class="linenumber">222</span></a>                             <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">Ïƒ'</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ·</span> ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span> <span class="main">=</span> ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L223" href="#L223"><span class="linenumber">223</span></a>      <span class="keyword1"><span class="command">have</span></span> simp0<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel
<a name="L224" href="#L224"><span class="linenumber">224</span></a>           <span class="main">(</span>Abs_urrel <span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">u</span> <span class="keyword1">of</span> Ï‰Ï… <span class="bound">x</span> <span class="main">â‡’</span> <span class="skolem">r</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">|</span> ÏƒÏ… <span class="bound">x</span> <span class="main">â‡’</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">|</span> nullÏ… <span class="bound">null</span> <span class="main">â‡’</span> False<span class="main">)</span><span class="main">)</span>
<a name="L225" href="#L225"><span class="linenumber">225</span></a>            <span class="main">=</span> <span class="skolem">r</span>â€º</span></span>
<a name="L226" href="#L226"><span class="linenumber">226</span></a>        <span class="keyword1"><span class="command">unfolding</span></span> urrel_to_Ï‰rel_def
<a name="L227" href="#L227"><span class="linenumber">227</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L228" href="#L228"><span class="linenumber">228</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L229" href="#L229"><span class="linenumber">229</span></a>      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Ïƒ_part</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Î»</span> <span class="bound">r</span> <span class="main">.</span> Abs_urrel <span class="main">(</span><span class="main">Î»</span><span class="bound">u</span> <span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="keyword1">case</span> <span class="bound">u</span> <span class="keyword1">of</span> <span class="main">(</span>Ï‰Ï… <span class="bound">x</span><span class="main">)</span> <span class="main">â‡’</span> <span class="bound">r</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">|</span> ÏƒÏ… <span class="bound">x</span> <span class="main">â‡’</span> ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">|</span> <span class="main"><span class="bound">_</span></span> <span class="main">â‡’</span> False<span class="main">)</span>â€º</span></span>
<a name="L230" href="#L230"><span class="linenumber">230</span></a>      <span class="keyword1"><span class="command">have</span></span> Ïƒ_part_in_union<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="var">?Ïƒ_part</span> <span class="skolem">r</span> <span class="main">âˆˆ</span> <span class="var">?union_part</span>â€º</span></span>
<a name="L231" href="#L231"><span class="linenumber">231</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> simp0 r_in_union<span class="main">)</span>
<a name="L232" href="#L232"><span class="linenumber">232</span></a>         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L233" href="#L233"><span class="linenumber">233</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L234" href="#L234"><span class="linenumber">234</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L235" href="#L235"><span class="linenumber">235</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L236" href="#L236"><span class="linenumber">236</span></a>      <span class="keyword1"><span class="command">have</span></span> Ïƒ_part_not_in_intersection<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="var">?Ïƒ_part</span> <span class="skolem">r</span> <span class="main">âˆ‰</span> <span class="var">?intersection_part</span>â€º</span></span>
<a name="L237" href="#L237"><span class="linenumber">237</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> urrel_to_Ï‰rel_def<span class="main">)</span>
<a name="L238" href="#L238"><span class="linenumber">238</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L239" href="#L239"><span class="linenumber">239</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp r_notin_intersection<span class="main">)</span>
<a name="L240" href="#L240"><span class="linenumber">240</span></a>      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="main">(</span><span class="var">?intersection_part</span> <span class="main">âˆª</span> <span class="var">?union_part</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span> 
<a name="L241" href="#L241"><span class="linenumber">241</span></a>      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Î±Ïƒwit_eqI<span class="main">)</span>
<a name="L242" href="#L242"><span class="linenumber">242</span></a>        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_intersection</span> <span class="main">(</span><span class="var">?intersection_part</span> <span class="main">âˆª</span> <span class="var">?union_part</span><span class="main">)</span> <span class="main">=</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L243" href="#L243"><span class="linenumber">243</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Î±Ïƒ_wit_intersection_def<span class="main">)</span>
<a name="L244" href="#L244"><span class="linenumber">244</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> AOT_model_proposition_choice_simp Abs_urrel_inverse Quotient3_abs_rep Ï‰rel_to_urrel_def Ï….case<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Ï….simps<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> mem_Collect_eq urrel_Ï‰rel_quot<span class="main">)</span>
<a name="L245" href="#L245"><span class="linenumber">245</span></a>      <span class="keyword1"><span class="command">next</span></span>
<a name="L246" href="#L246"><span class="linenumber">246</span></a>        <span class="keyword1"><span class="command">{</span></span>
<a name="L247" href="#L247"><span class="linenumber">247</span></a>          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">ordext</span>
<a name="L248" href="#L248"><span class="linenumber">248</span></a>          <span class="keyword3"><span class="command">assume</span></span> ordext_in_union<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">ordext</span> <span class="main">âˆˆ</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L249" href="#L249"><span class="linenumber">249</span></a>          <span class="keyword1"><span class="command">have</span></span> ordext_simp<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel
<a name="L250" href="#L250"><span class="linenumber">250</span></a>               <span class="main">(</span>Abs_urrel <span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">u</span> <span class="keyword1">of</span> Ï‰Ï… <span class="bound">x</span> <span class="main">â‡’</span> <span class="skolem">ordext</span> <span class="bound">x</span> <span class="bound">w</span> <span class="main">|</span> ÏƒÏ… <span class="bound">x</span> <span class="main">â‡’</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">|</span> nullÏ… <span class="bound">null</span> <span class="main">â‡’</span> False<span class="main">)</span><span class="main">)</span>
<a name="L251" href="#L251"><span class="linenumber">251</span></a>              <span class="main">=</span> <span class="skolem">ordext</span>â€º</span></span>
<a name="L252" href="#L252"><span class="linenumber">252</span></a>            <span class="keyword1"><span class="command">unfolding</span></span> urrel_to_Ï‰rel_def
<a name="L253" href="#L253"><span class="linenumber">253</span></a>            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L254" href="#L254"><span class="linenumber">254</span></a>            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L255" href="#L255"><span class="linenumber">255</span></a>          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">urrel</span> <span class="main">.</span> <span class="main">(</span><span class="bound">urrel</span>
<a name="L256" href="#L256"><span class="linenumber">256</span></a>          <span class="main">âˆˆ</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> ordext_intersection <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L257" href="#L257"><span class="linenumber">257</span></a>            <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L258" href="#L258"><span class="linenumber">258</span></a>             urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L259" href="#L259"><span class="linenumber">259</span></a>             <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L260" href="#L260"><span class="linenumber">260</span></a>            urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="skolem">ordext</span>â€º</span></span>
<a name="L261" href="#L261"><span class="linenumber">261</span></a>            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">â€¹<span class="var"><span class="var">?Ïƒ_part</span></span> <span class="skolem"><span class="skolem">ordext</span></span>â€º</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L262" href="#L262"><span class="linenumber">262</span></a>            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> ordext_simp ordext_in_union<span class="main">)</span>
<a name="L263" href="#L263"><span class="linenumber">263</span></a>             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L264" href="#L264"><span class="linenumber">264</span></a>            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L265" href="#L265"><span class="linenumber">265</span></a>             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L266" href="#L266"><span class="linenumber">266</span></a>            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L267" href="#L267"><span class="linenumber">267</span></a>        <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 0 <span class="main">=</span> this
<a name="L268" href="#L268"><span class="linenumber">268</span></a>        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_union</span> <span class="main">(</span><span class="var">?intersection_part</span> <span class="main">âˆª</span> <span class="var">?union_part</span><span class="main">)</span> <span class="main">=</span> ordext_union <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L269" href="#L269"><span class="linenumber">269</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L270" href="#L270"><span class="linenumber">270</span></a>           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">x</span><span class="main">âˆˆ</span>fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">.</span> <span class="bound">x</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span>â€º</span></span><span class="main">)</span>
<a name="L271" href="#L271"><span class="linenumber">271</span></a>          <span class="keyword1"><span class="command">using</span></span> 0 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L272" href="#L272"><span class="linenumber">272</span></a>      <span class="keyword1"><span class="command">next</span></span>
<a name="L273" href="#L273"><span class="linenumber">273</span></a>        <span class="keyword1"><span class="command">have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">urrel</span> <span class="main">.</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L274" href="#L274"><span class="linenumber">274</span></a>       <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L275" href="#L275"><span class="linenumber">275</span></a>        urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L276" href="#L276"><span class="linenumber">276</span></a>        <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L277" href="#L277"><span class="linenumber">277</span></a>urrel_to_Ï‰rel <span class="bound">urrel</span>
<a name="L278" href="#L278"><span class="linenumber">278</span></a>       <span class="main">âˆ‰</span> <span class="skolem">Î±Ïƒ_wit_intersection</span>
<a name="L279" href="#L279"><span class="linenumber">279</span></a>           <span class="main">(</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L280" href="#L280"><span class="linenumber">280</span></a>            <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L281" href="#L281"><span class="linenumber">281</span></a>             urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L282" href="#L282"><span class="linenumber">282</span></a>             <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L283" href="#L283"><span class="linenumber">283</span></a>           <span class="main">(</span><span class="main">âˆ€</span><span class="bound">w</span> <span class="bound">Ïƒ'</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¶</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L284" href="#L284"><span class="linenumber">284</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">â€¹<span class="var"><span class="var">?Ïƒ_part</span></span> <span class="skolem"><span class="skolem">r</span></span>â€º</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L285" href="#L285"><span class="linenumber">285</span></a>          <span class="keyword1"><span class="command">using</span></span> Ïƒ_part_in_union Ïƒ_part_not_in_intersection
<a name="L286" href="#L286"><span class="linenumber">286</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> del_insts<span class="main"><span class="main">)</span></span> AOT_model_proposition_choice_simp Abs_urrel_inverse Quotient3_abs_rep UnE UnI2 Î±Ïƒ_wit_intersection_def Ï‰rel_to_urrel_def Ï….simps<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> Ï….simps<span class="main"><span class="main">(</span></span>12<span class="main"><span class="main">)</span></span> mem_Collect_eq r_notin_intersection simp0 urrel_Ï‰rel_quot<span class="main">)</span>
<a name="L287" href="#L287"><span class="linenumber">287</span></a>        <span class="keyword1"><span class="command">{</span></span>
<a name="L288" href="#L288"><span class="linenumber">288</span></a>          <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Ïƒ'</span>
<a name="L289" href="#L289"><span class="linenumber">289</span></a>          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">urrel</span>
<a name="L290" href="#L290"><span class="linenumber">290</span></a>           <span class="main">âˆˆ</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L291" href="#L291"><span class="linenumber">291</span></a>             <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L292" href="#L292"><span class="linenumber">292</span></a>              urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L293" href="#L293"><span class="linenumber">293</span></a>              <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">.</span>
<a name="L294" href="#L294"><span class="linenumber">294</span></a>             urrel_to_Ï‰rel <span class="bound">urrel</span>
<a name="L295" href="#L295"><span class="linenumber">295</span></a>             <span class="main">âˆ‰</span> <span class="skolem">Î±Ïƒ_wit_intersection</span>
<a name="L296" href="#L296"><span class="linenumber">296</span></a>                 <span class="main">(</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L297" href="#L297"><span class="linenumber">297</span></a>                  <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L298" href="#L298"><span class="linenumber">298</span></a>                   urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L299" href="#L299"><span class="linenumber">299</span></a>                   <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L300" href="#L300"><span class="linenumber">300</span></a>             <span class="main">(</span><span class="main">âˆ€</span><span class="bound">w</span> <span class="bound">Ïƒ</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¶</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">Ïƒ'</span><span class="main">)</span>â€º</span></span>
<a name="L301" href="#L301"><span class="linenumber">301</span></a>          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">urrel</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L302" href="#L302"><span class="linenumber">302</span></a>              A<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">urrel</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L303" href="#L303"><span class="linenumber">303</span></a>             <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L304" href="#L304"><span class="linenumber">304</span></a>              urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L305" href="#L305"><span class="linenumber">305</span></a>              <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L306" href="#L306"><span class="linenumber">306</span></a>              <span class="keyword2"><span class="keyword">and</span></span> B<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">urrel</span>
<a name="L307" href="#L307"><span class="linenumber">307</span></a>                           <span class="main">âˆ‰</span> <span class="skolem">Î±Ïƒ_wit_intersection</span>
<a name="L308" href="#L308"><span class="linenumber">308</span></a>                               <span class="main">(</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L309" href="#L309"><span class="linenumber">309</span></a>                                <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L310" href="#L310"><span class="linenumber">310</span></a>                                 urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L311" href="#L311"><span class="linenumber">311</span></a>                                 <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>â€º</span></span>
<a name="L312" href="#L312"><span class="linenumber">312</span></a>              <span class="keyword2"><span class="keyword">and</span></span> C<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">w</span> <span class="bound">Ïƒ</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¶</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">Ïƒ'</span>â€º</span></span>
<a name="L313" href="#L313"><span class="linenumber">313</span></a>            <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L314" href="#L314"><span class="linenumber">314</span></a>          <span class="keyword1"><span class="command">{</span></span>
<a name="L315" href="#L315"><span class="linenumber">315</span></a>            <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">urrel</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L316" href="#L316"><span class="linenumber">316</span></a>            <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">urrel</span>
<a name="L317" href="#L317"><span class="linenumber">317</span></a>                           <span class="main">âˆˆ</span> <span class="skolem">Î±Ïƒ_wit_intersection</span>
<a name="L318" href="#L318"><span class="linenumber">318</span></a>                               <span class="main">(</span><span class="main">{</span><span class="bound">urrel</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆª</span>
<a name="L319" href="#L319"><span class="linenumber">319</span></a>                                <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L320" href="#L320"><span class="linenumber">320</span></a>                                 urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L321" href="#L321"><span class="linenumber">321</span></a>                                 <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>â€º</span></span>
<a name="L322" href="#L322"><span class="linenumber">322</span></a>              <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Î±Ïƒ_wit_intersection_def<span class="main">)</span>
<a name="L323" href="#L323"><span class="linenumber">323</span></a>          <span class="keyword1"><span class="command">}</span></span>
<a name="L324" href="#L324"><span class="linenumber">324</span></a>          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">urrel</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">urrel</span><span class="main">.</span>
<a name="L325" href="#L325"><span class="linenumber">325</span></a>              urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">âˆˆ</span> fst <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L326" href="#L326"><span class="linenumber">326</span></a>              <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Ïƒ'</span> <span class="bound">w</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_urrel <span class="bound">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="bound">Ïƒ'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L327" href="#L327"><span class="linenumber">327</span></a>            <span class="keyword1"><span class="command">using</span></span> A B <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<a name="L328" href="#L328"><span class="linenumber">328</span></a>          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in w<span class="hidden">â‡©</span><sub>0</sub> <span class="main">(</span>Rep_urrel <span class="skolem">urrel</span> <span class="main">(</span>ÏƒÏ… <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¶</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">Ïƒ'</span>â€º</span></span>
<a name="L329" href="#L329"><span class="linenumber">329</span></a>            <span class="keyword1"><span class="command">using</span></span> C calculation <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L330" href="#L330"><span class="linenumber">330</span></a>          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Ïƒ'</span> <span class="main">=</span> snd <span class="main">(</span>snd <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L331" href="#L331"><span class="linenumber">331</span></a>            <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L332" href="#L332"><span class="linenumber">332</span></a>        <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 2 <span class="main">=</span> this
<a name="L333" href="#L333"><span class="linenumber">333</span></a>        <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit_Ïƒ'</span> <span class="main">(</span><span class="var">?intersection_part</span> <span class="main">âˆª</span> <span class="var">?union_part</span><span class="main">)</span> <span class="main">=</span> ÏƒÏƒ' <span class="main">(</span>Rep_Ïƒ <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span>
<a name="L334" href="#L334"><span class="linenumber">334</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Î±Ïƒ_wit_Ïƒ'_def<span class="main">)</span>
<a name="L335" href="#L335"><span class="linenumber">335</span></a>          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> the_equality<span class="main">)</span>
<a name="L336" href="#L336"><span class="linenumber">336</span></a>          <span class="keyword1"><span class="command">using</span></span> 1 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
<a name="L337" href="#L337"><span class="linenumber">337</span></a>          <span class="keyword1"><span class="command">using</span></span> 2 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L338" href="#L338"><span class="linenumber">338</span></a>      <span class="keyword1"><span class="command">qed</span></span>
<a name="L339" href="#L339"><span class="linenumber">339</span></a>      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">urrels</span> <span class="main">.</span> <span class="skolem">Î±Ïƒ_wit</span> <span class="bound">urrels</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L340" href="#L340"><span class="linenumber">340</span></a>    <span class="keyword1"><span class="command">}</span></span>
<a name="L341" href="#L341"><span class="linenumber">341</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">urrels</span> <span class="main">.</span> <span class="skolem">Î±Ïƒ_wit</span> <span class="bound">urrels</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span>
<a name="L342" href="#L342"><span class="linenumber">342</span></a>      <span class="keyword1"><span class="command">using</span></span> Ïƒcond_univ <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L343" href="#L343"><span class="linenumber">343</span></a>  <span class="keyword1"><span class="command">}</span></span>
<a name="L344" href="#L344"><span class="linenumber">344</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹surj <span class="skolem">Î±Ïƒ_wit</span>â€º</span></span>
<a name="L345" href="#L345"><span class="linenumber">345</span></a>    <span class="keyword1"><span class="command">using</span></span> surjI <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<a name="L346" href="#L346"><span class="linenumber">346</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L347" href="#L347"><span class="linenumber">347</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">b</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel setâ€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">r</span> <span class="skolem">s</span>
<a name="L348" href="#L348"><span class="linenumber">348</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Î±Ïƒ_wit</span> <span class="skolem">b</span>â€º</span></span>
<a name="L349" href="#L349"><span class="linenumber">349</span></a>    <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆ€</span><span class="bound">urrel</span><span class="main">::</span>urrel<span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">âŸ¶</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">a</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆ€</span><span class="bound">urrel</span><span class="main">::</span>urrel<span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">âŸ¶</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">b</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L350" href="#L350"><span class="linenumber">350</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> Î±Ïƒ_wit_def Let_def
<a name="L351" href="#L351"><span class="linenumber">351</span></a>      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> Abs_Ïƒ_inject<span class="main">)</span>
<a name="L352" href="#L352"><span class="linenumber">352</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> wits_in_Ïƒset<span class="main">)</span>
<a name="L353" href="#L353"><span class="linenumber">353</span></a>       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> wits_in_Ïƒset<span class="main">)</span>
<a name="L354" href="#L354"><span class="linenumber">354</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L355" href="#L355"><span class="linenumber">355</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">âŸ¹</span> <span class="skolem">s</span> <span class="main">âˆˆ</span> <span class="skolem">a</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">s</span>
<a name="L356" href="#L356"><span class="linenumber">356</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆ€</span><span class="bound">urrel</span><span class="main">::</span>urrel<span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">âŸ¶</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">a</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L357" href="#L357"><span class="linenumber">357</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L358" href="#L358"><span class="linenumber">358</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆ€</span><span class="bound">urrel</span><span class="main">::</span>urrel<span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span> <span class="main">âŸ¶</span> <span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">b</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L359" href="#L359"><span class="linenumber">359</span></a>      <span class="keyword1"><span class="command">using</span></span> 0 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L360" href="#L360"><span class="linenumber">360</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">r</span>â€º</span></span>
<a name="L361" href="#L361"><span class="linenumber">361</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">s</span> <span class="main">âˆˆ</span> <span class="skolem">b</span>â€º</span></span>
<a name="L362" href="#L362"><span class="linenumber">362</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L363" href="#L363"><span class="linenumber">363</span></a>  <span class="keyword1"><span class="command">}</span></span>
<a name="L364" href="#L364"><span class="linenumber">364</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L365" href="#L365"><span class="linenumber">365</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span> <span class="skolem">b</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel setâ€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">s</span> <span class="skolem">r</span>
<a name="L366" href="#L366"><span class="linenumber">366</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Î±Ïƒ_wit</span> <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Î±Ïƒ_wit</span> <span class="skolem">b</span>â€º</span></span>
<a name="L367" href="#L367"><span class="linenumber">367</span></a>    <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">a</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span> <span class="main">=</span>
<a name="L368" href="#L368"><span class="linenumber">368</span></a>              <span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">b</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>â€º</span></span>
<a name="L369" href="#L369"><span class="linenumber">369</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> Î±Ïƒ_wit_def
<a name="L370" href="#L370"><span class="linenumber">370</span></a>      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> Abs_Ïƒ_inject<span class="main">)</span>
<a name="L371" href="#L371"><span class="linenumber">371</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> wits_in_Ïƒset<span class="main">)</span>
<a name="L372" href="#L372"><span class="linenumber">372</span></a>       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> wits_in_Ïƒset<span class="main">)</span>
<a name="L373" href="#L373"><span class="linenumber">373</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Let_def Î±Ïƒ_wit_intersection_def Î±Ïƒ_wit_union_def<span class="main">)</span>
<a name="L374" href="#L374"><span class="linenumber">374</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">s</span> <span class="main">âˆˆ</span> <span class="skolem">a</span>â€º</span></span>
<a name="L375" href="#L375"><span class="linenumber">375</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">s</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">a</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>â€º</span></span>
<a name="L376" href="#L376"><span class="linenumber">376</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L377" href="#L377"><span class="linenumber">377</span></a>    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">r</span>â€º</span></span>
<a name="L378" href="#L378"><span class="linenumber">378</span></a>    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">ordext</span><span class="main">::</span>Ï‰ <span class="main">â‡’</span> w <span class="main">â‡’</span> bool<span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">urrel</span> <span class="main">âˆˆ</span> <span class="main">(</span><span class="skolem">b</span><span class="main">::</span>urrel set<span class="main">)</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">urrel</span> <span class="main">=</span> <span class="bound">ordext</span><span class="main">}</span>â€º</span></span>
<a name="L379" href="#L379"><span class="linenumber">379</span></a>      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"0"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
<a name="L380" href="#L380"><span class="linenumber">380</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="skolem">b</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">r</span>â€º</span></span>
<a name="L381" href="#L381"><span class="linenumber">381</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L382" href="#L382"><span class="linenumber">382</span></a>  <span class="keyword1"><span class="command">}</span></span>
<a name="L383" href="#L383"><span class="linenumber">383</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L384" href="#L384"><span class="linenumber">384</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">Î±Ïƒ_wit</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span><span class="main">)</span>
<a name="L385" href="#L385"><span class="linenumber">385</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L386" href="#L386"><span class="linenumber">386</span></a>
<a name="L387" href="#L387"><span class="linenumber">387</span></a><span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">â€¹Restricted model versionâ€º</span></span>
<a name="L388" href="#L388"><span class="linenumber">388</span></a>
<a name="L389" href="#L389"><span class="linenumber">389</span></a><span class="keyword1"><span class="command">consts</span></span> Î±Ïƒ_restr <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel set <span class="main">â‡’</span> Ïƒâ€º</span></span>
<a name="L390" href="#L390"><span class="linenumber">390</span></a>
<a name="L391" href="#L391"><span class="linenumber">391</span></a><span class="keyword1"><span class="command">specification</span></span> <span class="main">(</span><span class="quoted">Î±Ïƒ_restr</span><span class="main">)</span>
<a name="L392" href="#L392"><span class="linenumber">392</span></a>  Î±Ïƒ_restr_surj<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹surj Î±Ïƒ_restrâ€º</span></span>
<a name="L393" href="#L393"><span class="linenumber">393</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L394" href="#L394"><span class="linenumber">394</span></a>  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Ï†</span></span> <span class="keyword2"><span class="keyword">where</span></span> Ï†_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Ï†</span> <span class="main">=</span> <span class="main">(</span><span class="main">Î»</span> <span class="bound">Ïƒ</span> <span class="bound">u</span><span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="bound">u</span> <span class="main">=</span> ÏƒÏ… <span class="bound">Ïƒ</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L395" href="#L395"><span class="linenumber">395</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L396" href="#L396"><span class="linenumber">396</span></a>  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">â€¹<span class="main">Î»</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">THE</span> <span class="bound">Ïƒ</span> <span class="main">.</span> <span class="bound">x</span> <span class="main">=</span> <span class="main">{</span> Abs_urrel <span class="main">(</span><span class="skolem">Ï†</span> <span class="bound">Ïƒ</span><span class="main">)</span> <span class="main">}</span>â€º</span></span><span class="main"><span class="main">]</span></span>
<a name="L397" href="#L397"><span class="linenumber">397</span></a>         surjI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> f<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">â€¹<span class="main">Î»</span> <span class="bound">Ïƒ</span> <span class="main">.</span> <span class="main">{</span> Abs_urrel <span class="main">(</span><span class="skolem">Ï†</span> <span class="bound">Ïƒ</span><span class="main">)</span> <span class="main">}</span>â€º</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L398" href="#L398"><span class="linenumber">398</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="bound">u</span> <span class="main">=</span> ÏƒÏ… <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="bound">u</span> <span class="main">=</span> ÏƒÏ… <span class="skolem">Ïƒ</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Ïƒ</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">Ïƒ</span>
<a name="L399" href="#L399"><span class="linenumber">399</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">)</span></span> Ï….inject<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L400" href="#L400"><span class="linenumber">400</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">{</span>Abs_urrel <span class="main">(</span><span class="skolem">Ï†</span> <span class="skolem">x</span><span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span>Abs_urrel <span class="main">(</span><span class="skolem">Ï†</span> <span class="skolem">Ïƒ</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Ïƒ</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">Ïƒ</span>
<a name="L401" href="#L401"><span class="linenumber">401</span></a>      <span class="keyword1"><span class="command">using</span></span> Abs_urrel_inject<span class="main">[</span><span class="operator">THEN</span> iffD1<span class="main">,</span> <span class="operator">of</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Ï†</span> <span class="skolem">x</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Ï†</span> <span class="skolem">Ïƒ</span>â€º</span></span><span class="main">]</span>
<a name="L402" href="#L402"><span class="linenumber">402</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Ï†_def AOT_model_proposition_choice_simp<span class="main">)</span> <span class="operator">blast</span>
<a name="L403" href="#L403"><span class="linenumber">403</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="keyword1">THE</span> <span class="bound">Ïƒ</span><span class="main">.</span> <span class="main">{</span>Abs_urrel <span class="main">(</span><span class="skolem">Ï†</span> <span class="skolem">x</span><span class="main">)</span><span class="main">}</span> <span class="main">=</span> <span class="main">{</span>Abs_urrel <span class="main">(</span><span class="skolem">Ï†</span> <span class="bound">Ïƒ</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L404" href="#L404"><span class="linenumber">404</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<a name="L405" href="#L405"><span class="linenumber">405</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L406" href="#L406"><span class="linenumber">406</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L407" href="#L407"><span class="linenumber">407</span></a>
<a name="L408" href="#L408"><span class="linenumber">408</span></a><span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">â€¹Shared for both modelsâ€º</span></span>
<a name="L409" href="#L409"><span class="linenumber">409</span></a>
<a name="L410" href="#L410"><span class="linenumber">410</span></a><span class="keyword1"><span class="command">abbreviation</span></span> <span class="main">(</span>input<span class="main">)</span> <span class="entity">Î±Ïƒ</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">Î±Ïƒ</span> <span class="main">â‰¡</span> Î±Ïƒ_extâ€º</span></span> <span class="comment1">â€• â€¹Choose model kind.â€º</span>
<a name="L411" href="#L411"><span class="linenumber">411</span></a><span class="keyword1"><span class="command">lemmas</span></span> Î±Ïƒ_surj <span class="main">=</span> Î±Ïƒ_ext_surj
<a name="L412" href="#L412"><span class="linenumber">412</span></a>
<a name="L413" href="#L413"><span class="linenumber">413</span></a><span class="keyword1"><span class="command">primrec</span></span> <span class="entity">ÎºÏ…</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹Îº<span class="main">â‡’</span>Ï…â€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L414" href="#L414"><span class="linenumber">414</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">ÎºÏ…</span> <span class="main">(</span>Ï‰Îº <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> Ï‰Ï… <span class="free"><span class="bound"><span class="entity">x</span></span></span>â€º</span></span>
<a name="L415" href="#L415"><span class="linenumber">415</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">ÎºÏ…</span> <span class="main">(</span>Î±Îº <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> ÏƒÏ… <span class="main">(</span>Î±Ïƒ <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span>â€º</span></span>
<a name="L416" href="#L416"><span class="linenumber">416</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">ÎºÏ…</span> <span class="main">(</span>nullÎº <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> nullÏ… <span class="free"><span class="bound"><span class="entity">x</span></span></span>â€º</span></span>
<a name="L417" href="#L417"><span class="linenumber">417</span></a>
<a name="L418" href="#L418"><span class="linenumber">418</span></a><span class="keyword1"><span class="command">lemma</span></span> ÎºÏ…_surj<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹surj ÎºÏ…â€º</span></span>
<a name="L419" href="#L419"><span class="linenumber">419</span></a>  <span class="keyword1"><span class="command">using</span></span> Î±Ïƒ_surj <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Ï….exhaust surj_def<span class="main">)</span>
<a name="L420" href="#L420"><span class="linenumber">420</span></a>
<a name="L421" href="#L421"><span class="linenumber">421</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_null_false<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="free">w</span> <span class="main">(</span>Rep_urrel <span class="free">f</span> <span class="main">(</span>ÎºÏ… <span class="free">x</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>is_nullÎº <span class="free">x</span>â€º</span></span>
<a name="L422" href="#L422"><span class="linenumber">422</span></a>   <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> assms Rep_urrel Îº.collapse<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> mem_Collect_eq<span class="main">)</span>
<a name="L423" href="#L423"><span class="linenumber">423</span></a>
<a name="L424" href="#L424"><span class="linenumber">424</span></a>
<a name="L425" href="#L425"><span class="linenumber">425</span></a><span class="keyword1"><span class="command">class</span></span> AOT_Term <span class="main">=</span>
<a name="L426" href="#L426"><span class="linenumber">426</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_denotes</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L427" href="#L427"><span class="linenumber">427</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_denoting_ex<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span> <span class="bound">x</span> <span class="main">.</span> <span class="free">AOT_model_denotes</span> <span class="bound">x</span>â€º</span></span>
<a name="L428" href="#L428"><span class="linenumber">428</span></a><span class="keyword1"><span class="command">class</span></span> AOT_IncompleteTerm <span class="main">=</span> AOT_Term <span class="main">+</span>
<a name="L429" href="#L429"><span class="linenumber">429</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_nondenoting_ex<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">Â¬</span>AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L430" href="#L430"><span class="linenumber">430</span></a>
<a name="L431" href="#L431"><span class="linenumber">431</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> prod <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_Term</span><span class="main">,</span> <span class="quoted">AOT_Term</span><span class="main">)</span> <span class="quoted">AOT_Term</span>
<a name="L432" href="#L432"><span class="linenumber">432</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L433" href="#L433"><span class="linenumber">433</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L434" href="#L434"><span class="linenumber">434</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_denotes_prod</span> <span class="main">â‰¡</span> <span class="main">Î»</span><span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">âˆ§</span> AOT_model_denotes <span class="bound">y</span>â€º</span></span>
<a name="L435" href="#L435"><span class="linenumber">435</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L436" href="#L436"><span class="linenumber">436</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span><span class="main">.</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L437" href="#L437"><span class="linenumber">437</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_prod_def AOT_model_denoting_ex<span class="main">)</span>
<a name="L438" href="#L438"><span class="linenumber">438</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L439" href="#L439"><span class="linenumber">439</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L440" href="#L440"><span class="linenumber">440</span></a>
<a name="L441" href="#L441"><span class="linenumber">441</span></a><span class="keyword1"><span class="command">locale</span></span> AOT_model_irregular_spec <span class="main">=</span>
<a name="L442" href="#L442"><span class="linenumber">442</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">AOT_model_irregular</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'a</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'a</span> <span class="main">â‡’</span> ğ—ˆâ€º</span></span>
<a name="L443" href="#L443"><span class="linenumber">443</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="free">AOT_model_regular</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L444" href="#L444"><span class="linenumber">444</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="free">AOT_model_term_equiv</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> <span class="main">â‡’</span> <span class="tfree">'a</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L445" href="#L445"><span class="linenumber">445</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular_false<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_valid_in <span class="free">w</span> <span class="main">(</span><span class="free">AOT_model_irregular</span> <span class="free">Ï†</span> <span class="free">x</span><span class="main">)</span>â€º</span></span>
<a name="L446" href="#L446"><span class="linenumber">446</span></a>    <span class="keyword2"><span class="keyword">and</span></span> AOT_model_irregular_equiv<span class="main">:</span>
<a name="L447" href="#L447"><span class="linenumber">447</span></a>      <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_term_equiv</span> <span class="free">x</span> <span class="free">y</span> <span class="main">âŸ¹</span> <span class="free">AOT_model_irregular</span> <span class="free">Ï†</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_irregular</span> <span class="free">Ï†</span> <span class="free">y</span>â€º</span></span>
<a name="L448" href="#L448"><span class="linenumber">448</span></a>    <span class="keyword2"><span class="keyword">and</span></span> AOT_model_irregular_eqI<span class="main">:</span>
<a name="L449" href="#L449"><span class="linenumber">449</span></a>      <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">â‹€</span> <span class="bound">x</span> <span class="main">.</span> <span class="free">AOT_model_regular</span> <span class="bound">x</span> <span class="main">âŸ¹</span> <span class="free">Ï†</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">Ïˆ</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="free">AOT_model_irregular</span> <span class="free">Ï†</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_irregular</span> <span class="free">Ïˆ</span> <span class="free">x</span>â€º</span></span>
<a name="L450" href="#L450"><span class="linenumber">450</span></a>
<a name="L451" href="#L451"><span class="linenumber">451</span></a><span class="keyword1"><span class="command">class</span></span> AOT_IndividualTerm <span class="main">=</span> AOT_IncompleteTerm <span class="main">+</span>
<a name="L452" href="#L452"><span class="linenumber">452</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_regular</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L453" href="#L453"><span class="linenumber">453</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_term_equiv</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> <span class="main">â‡’</span> <span class="tfree">'a</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L454" href="#L454"><span class="linenumber">454</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_irregular</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'a</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'a</span> <span class="main">â‡’</span> ğ—ˆâ€º</span></span>
<a name="L455" href="#L455"><span class="linenumber">455</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular_nondenoting<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span><span class="free">AOT_model_regular</span> <span class="free">x</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span>AOT_model_denotes <span class="free">x</span>â€º</span></span>
<a name="L456" href="#L456"><span class="linenumber">456</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_term_equiv_part_equivp<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹equivp <span class="free">AOT_model_term_equiv</span>â€º</span></span>
<a name="L457" href="#L457"><span class="linenumber">457</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_term_equiv_denotes<span class="main">:</span>
<a name="L458" href="#L458"><span class="linenumber">458</span></a>    <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_term_equiv</span> <span class="free">x</span> <span class="free">y</span> <span class="main">âŸ¹</span> <span class="main">(</span>AOT_model_denotes <span class="free">x</span> <span class="main">=</span> AOT_model_denotes <span class="free">y</span><span class="main">)</span>â€º</span></span>
<a name="L459" href="#L459"><span class="linenumber">459</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_term_equiv_regular<span class="main">:</span>
<a name="L460" href="#L460"><span class="linenumber">460</span></a>    <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_term_equiv</span> <span class="free">x</span> <span class="free">y</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="free">AOT_model_regular</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_regular</span> <span class="free">y</span><span class="main">)</span>â€º</span></span>
<a name="L461" href="#L461"><span class="linenumber">461</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_irregular<span class="main">:</span>
<a name="L462" href="#L462"><span class="linenumber">462</span></a>    <span class="quoted"><span class="quoted">â€¹AOT_model_irregular_spec <span class="free">AOT_model_irregular</span> <span class="free">AOT_model_regular</span> <span class="free">AOT_model_term_equiv</span>â€º</span></span>
<a name="L463" href="#L463"><span class="linenumber">463</span></a>
<a name="L464" href="#L464"><span class="linenumber">464</span></a><span class="keyword1"><span class="command">interpretation</span></span> AOT_model_irregular_spec <span class="quoted">AOT_model_irregular</span> <span class="quoted">AOT_model_regular</span> <span class="quoted">AOT_model_term_equiv</span>
<a name="L465" href="#L465"><span class="linenumber">465</span></a>  <span class="keyword1"><span class="command">using</span></span> AOT_model_irregular <span class="keyword1"><span class="command">.</span></span>
<a name="L466" href="#L466"><span class="linenumber">466</span></a>
<a name="L467" href="#L467"><span class="linenumber">467</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_term_equiv_eps<span class="main">:</span>
<a name="L468" href="#L468"><span class="linenumber">468</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"AOT_model_term_equiv <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">Îº</span><span class="main">)</span><span class="main">)</span> <span class="free">Îº</span>"</span></span>
<a name="L469" href="#L469"><span class="linenumber">469</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"AOT_model_term_equiv <span class="free">Îº</span> <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">Îº</span><span class="main">)</span><span class="main">)</span>"</span></span>
<a name="L470" href="#L470"><span class="linenumber">470</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"AOT_model_term_equiv <span class="free">Îº</span> <span class="free">Îº'</span> <span class="main">âŸ¹</span> <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">Îº</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="free">Îº'</span><span class="main">)</span><span class="main">)</span>"</span></span>
<a name="L471" href="#L471"><span class="linenumber">471</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_term_equiv_part_equivp equivp_def someI_ex<span class="main">)</span>
<a name="L472" href="#L472"><span class="linenumber">472</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_term_equiv_part_equivp equivp_def someI_ex<span class="main">)</span>
<a name="L473" href="#L473"><span class="linenumber">473</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_term_equiv_part_equivp equivp_def<span class="main">)</span>
<a name="L474" href="#L474"><span class="linenumber">474</span></a>
<a name="L475" href="#L475"><span class="linenumber">475</span></a>
<a name="L476" href="#L476"><span class="linenumber">476</span></a><span class="keyword1"><span class="command">typedef</span></span> <span class="tfree">'a</span> rel <span class="main">(</span><span class="quoted">â€¹<span class="keyword1">&lt;</span>_<span class="keyword1">&gt;</span>â€º</span><span class="main">)</span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹UNIV<span class="main">::</span><span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> setâ€º</span></span> <span class="keyword1"><span class="command">..</span></span>
<a name="L477" href="#L477"><span class="linenumber">477</span></a>
<a name="L478" href="#L478"><span class="linenumber">478</span></a><span class="keyword1"><span class="command">setup_lifting</span></span> type_definition_rel
<a name="L479" href="#L479"><span class="linenumber">479</span></a>
<a name="L480" href="#L480"><span class="linenumber">480</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">fix_special</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="main">(</span><span class="tfree">'a</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L481" href="#L481"><span class="linenumber">481</span></a>  <span class="quoted"><span class="quoted">"<span class="free">fix_special</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">Ï†</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">if</span> AOT_model_regular <span class="bound">x</span> <span class="keyword1">then</span> <span class="bound">Ï†</span> <span class="bound">x</span> <span class="keyword1">else</span> AOT_model_irregular <span class="bound">Ï†</span> <span class="bound">x</span>"</span></span>
<a name="L482" href="#L482"><span class="linenumber">482</span></a>
<a name="L483" href="#L483"><span class="linenumber">483</span></a><span class="keyword1"><span class="command">lemma</span></span> fix_special_denoting<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="free">x</span> <span class="main">âŸ¹</span> fix_special <span class="free">Ï†</span> <span class="free">x</span> <span class="main">=</span> <span class="free">Ï†</span> <span class="free">x</span>â€º</span></span>
<a name="L484" href="#L484"><span class="linenumber">484</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_nondenoting fix_special_def<span class="main">)</span>
<a name="L485" href="#L485"><span class="linenumber">485</span></a><span class="keyword1"><span class="command">lemma</span></span> fix_special_non_special<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_regular <span class="free">x</span> <span class="main">âŸ¹</span> fix_special <span class="free">Ï†</span> <span class="free">x</span> <span class="main">=</span> <span class="free">Ï†</span> <span class="free">x</span>â€º</span></span>
<a name="L486" href="#L486"><span class="linenumber">486</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_nondenoting fix_special_def<span class="main">)</span>
<a name="L487" href="#L487"><span class="linenumber">487</span></a><span class="keyword1"><span class="command">lemma</span></span> fix_special_special<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_regular <span class="free">x</span> <span class="main">âŸ¹</span> fix_special <span class="free">Ï†</span> <span class="free">x</span> <span class="main">=</span> AOT_model_irregular <span class="free">Ï†</span> <span class="free">x</span>â€º</span></span>
<a name="L488" href="#L488"><span class="linenumber">488</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fix_special_def<span class="main">)</span>
<a name="L489" href="#L489"><span class="linenumber">489</span></a>
<a name="L490" href="#L490"><span class="linenumber">490</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> rel <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_IndividualTerm</span><span class="main">)</span> <span class="quoted">AOT_IncompleteTerm</span>
<a name="L491" href="#L491"><span class="linenumber">491</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L492" href="#L492"><span class="linenumber">492</span></a><span class="keyword1"><span class="command">lift_definition</span></span> <span class="class_parameter">AOT_model_denotes_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">is</span></span>
<a name="L493" href="#L493"><span class="linenumber">493</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="main">Î»</span> <span class="bound">Ï†</span> <span class="main">.</span> <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">âŸ¶</span> <span class="bound">Ï†</span> <span class="bound">x</span> <span class="main">=</span> <span class="bound">Ï†</span> <span class="bound">y</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L494" href="#L494"><span class="linenumber">494</span></a>         <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">Ï†</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> AOT_model_denotes <span class="bound">x</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L495" href="#L495"><span class="linenumber">495</span></a>         <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">Â¬</span>AOT_model_regular <span class="bound">x</span> <span class="main">âŸ¶</span> <span class="bound">Ï†</span> <span class="bound">x</span> <span class="main">=</span> AOT_model_irregular <span class="bound">Ï†</span> <span class="bound">x</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">.</span></span>
<a name="L496" href="#L496"><span class="linenumber">496</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_term_equiv_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">â‡’</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L497" href="#L497"><span class="linenumber">497</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_term_equiv_rel</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">f</span> <span class="bound">g</span> <span class="main">.</span> AOT_model_denotes <span class="bound">f</span> <span class="main">âˆ§</span> AOT_model_denotes <span class="bound">g</span> <span class="main">âˆ§</span> <span class="bound">f</span> <span class="main">=</span> <span class="bound">g</span>â€º</span></span>
<a name="L498" href="#L498"><span class="linenumber">498</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_regular_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L499" href="#L499"><span class="linenumber">499</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_regular_rel</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">r</span> <span class="main">.</span> Trueâ€º</span></span>
<a name="L500" href="#L500"><span class="linenumber">500</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L501" href="#L501"><span class="linenumber">501</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="main">(</span>fix_special <span class="skolem">Ï†</span><span class="main">)</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Ï†</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span>
<a name="L502" href="#L502"><span class="linenumber">502</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_model_irregular_eqI<span class="main">)</span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> fix_special_def<span class="main">)</span>
<a name="L503" href="#L503"><span class="linenumber">503</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span> <span class="bound">x</span> <span class="main">::</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L504" href="#L504"><span class="linenumber">504</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">â€¹Abs_rel <span class="main">(</span>fix_special <span class="main">(</span><span class="main">Î»</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> False<span class="main">)</span><span class="main">)</span>â€º</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">transfer</span><span class="main">)</span>
<a name="L505" href="#L505"><span class="linenumber">505</span></a>       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp fix_special_def AOT_model_irregular_equiv
<a name="L506" href="#L506"><span class="linenumber">506</span></a>                    AOT_model_term_equiv_regular AOT_model_irregular_false<span class="main">)</span>
<a name="L507" href="#L507"><span class="linenumber">507</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L508" href="#L508"><span class="linenumber">508</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span> <span class="main">::</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">.</span> <span class="main">Â¬</span>AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L509" href="#L509"><span class="linenumber">509</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">â€¹Abs_rel <span class="main"><span class="main"><span class="main">(</span></span></span><span class="main"><span class="main"><span class="main">Î»</span></span></span><span class="bound"><span class="bound"><span class="bound">x</span></span></span><span class="main"><span class="main"><span class="main">.</span></span></span> <span class="keyword1"><span class="keyword1"><span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span></span></span> <span class="bound"><span class="bound"><span class="bound">w</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> True<span class="main"><span class="main"><span class="main">)</span></span></span>â€º</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span>
<a name="L510" href="#L510"><span class="linenumber">510</span></a>        <span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_rel.abs_eq AOT_model_nondenoting_ex AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L511" href="#L511"><span class="linenumber">511</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L512" href="#L512"><span class="linenumber">512</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L513" href="#L513"><span class="linenumber">513</span></a>
<a name="L514" href="#L514"><span class="linenumber">514</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_denotes_Abs_rel_fix_specialI<span class="main">:</span>
<a name="L515" href="#L515"><span class="linenumber">515</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">â‹€</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">âŸ¹</span> <span class="free">Ï†</span> <span class="bound">x</span> <span class="main">=</span> <span class="free">Ï†</span> <span class="bound">y</span>â€º</span></span>
<a name="L516" href="#L516"><span class="linenumber">516</span></a>      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">â‹€</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="free">Ï†</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¹</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L517" href="#L517"><span class="linenumber">517</span></a>    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span>fix_special <span class="free">Ï†</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L518" href="#L518"><span class="linenumber">518</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L519" href="#L519"><span class="linenumber">519</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> AOT_model_regular <span class="skolem">x</span> <span class="main">âŸ¹</span>
<a name="L520" href="#L520"><span class="linenumber">520</span></a>         AOT_model_irregular <span class="free">Ï†</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular <span class="main">(</span><span class="main">Î»</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">if</span> AOT_model_regular <span class="bound">x</span> <span class="keyword1">then</span> <span class="free">Ï†</span> <span class="bound">x</span> <span class="keyword1">else</span> AOT_model_irregular <span class="free">Ï†</span> <span class="bound">x</span><span class="main">)</span> <span class="skolem">x</span>â€º</span></span>
<a name="L521" href="#L521"><span class="linenumber">521</span></a>    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L522" href="#L522"><span class="linenumber">522</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_model_irregular_eqI<span class="main">)</span> <span class="operator">auto</span>
<a name="L523" href="#L523"><span class="linenumber">523</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
<a name="L524" href="#L524"><span class="linenumber">524</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_denotes_rel.rep_eq
<a name="L525" href="#L525"><span class="linenumber">525</span></a>  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_false Abs_rel_inverse AOT_model_irregular_equiv fix_special_def AOT_model_term_equiv_regular<span class="main">)</span>
<a name="L526" href="#L526"><span class="linenumber">526</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L527" href="#L527"><span class="linenumber">527</span></a>
<a name="L528" href="#L528"><span class="linenumber">528</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_term_equiv_rel_equiv<span class="main">:</span>
<a name="L529" href="#L529"><span class="linenumber">529</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="free">x</span>â€º</span></span>
<a name="L530" href="#L530"><span class="linenumber">530</span></a>      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="free">y</span>â€º</span></span>
<a name="L531" href="#L531"><span class="linenumber">531</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span> <span class="main">=</span> <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">Î </span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î </span> <span class="main">âŸ¶</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Î </span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Î </span> <span class="free">y</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L532" href="#L532"><span class="linenumber">532</span></a><span class="keyword1"><span class="command">proof</span></span>
<a name="L533" href="#L533"><span class="linenumber">533</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span>â€º</span></span>
<a name="L534" href="#L534"><span class="linenumber">534</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span> <span class="bound">Î </span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î </span> <span class="main">âŸ¶</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Î </span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Î </span> <span class="free">y</span><span class="main">)</span>â€º</span></span>
<a name="L535" href="#L535"><span class="linenumber">535</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_rel.rep_eq<span class="main">)</span>
<a name="L536" href="#L536"><span class="linenumber">536</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L537" href="#L537"><span class="linenumber">537</span></a>  <span class="keyword1"><span class="command">have</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x'</span> <span class="skolem">y'</span> <span class="main">âŸ¹</span> <span class="main">(</span>AOT_model_denotes <span class="skolem">x'</span> <span class="main">âˆ§</span> AOT_model_term_equiv <span class="skolem">x'</span> <span class="free">y</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span>AOT_model_denotes <span class="skolem">y'</span> <span class="main">âˆ§</span> AOT_model_term_equiv <span class="skolem">y'</span> <span class="free">y</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x'</span> <span class="skolem">y'</span>
<a name="L538" href="#L538"><span class="linenumber">538</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_term_equiv_denotes AOT_model_term_equiv_part_equivp equivp_def<span class="main">)</span>
<a name="L539" href="#L539"><span class="linenumber">539</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span> <span class="bound">Î </span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î </span> <span class="main">âŸ¶</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Î </span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span>Rep_rel <span class="bound">Î </span> <span class="free">y</span><span class="main">)</span>â€º</span></span>
<a name="L540" href="#L540"><span class="linenumber">540</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span>fix_special <span class="main">(</span><span class="main">Î»</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">âˆ§</span> AOT_model_term_equiv <span class="bound">x</span> <span class="free">y</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="var">?r</span>"</span></span><span class="main">)</span>
<a name="L541" href="#L541"><span class="linenumber">541</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_model_denotes_Abs_rel_fix_specialI<span class="main">)</span>
<a name="L542" href="#L542"><span class="linenumber">542</span></a>       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> 0 AOT_model_denotes_rel.rep_eq Abs_rel_inverse fix_special_def
<a name="L543" href="#L543"><span class="linenumber">543</span></a>                   AOT_model_proposition_choice_simp AOT_model_irregular_false<span class="main">)</span>
<a name="L544" href="#L544"><span class="linenumber">544</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="var">?r</span> <span class="free">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="var">?r</span> <span class="free">y</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span>
<a name="L545" href="#L545"><span class="linenumber">545</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L546" href="#L546"><span class="linenumber">546</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span>â€º</span></span>
<a name="L547" href="#L547"><span class="linenumber">547</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inverse AOT_model_proposition_choice_simp fix_special_denoting<span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> fix_special_denoting<span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> assms AOT_model_term_equiv_part_equivp equivp_reflp<span class="main">)</span>
<a name="L548" href="#L548"><span class="linenumber">548</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L549" href="#L549"><span class="linenumber">549</span></a>
<a name="L550" href="#L550"><span class="linenumber">550</span></a><span class="keyword1"><span class="command">class</span></span> AOT_UnaryIndividualTerm <span class="main">=</span>
<a name="L551" href="#L551"><span class="linenumber">551</span></a>  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_model_enc</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> <span class="main">â‡’</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm<span class="main">&gt;</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L552" href="#L552"><span class="linenumber">552</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="free"><span class="free"><span class="free">AOT_model_concrete</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹w <span class="main">â‡’</span> <span class="tfree">'a</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L553" href="#L553"><span class="linenumber">553</span></a>  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_model_no_special_nondenoting<span class="main">:</span>
<a name="L554" href="#L554"><span class="linenumber">554</span></a>      <span class="quoted"><span class="quoted">â€¹AOT_model_regular <span class="free">x</span>â€º</span></span>
<a name="L555" href="#L555"><span class="linenumber">555</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_enc_relid<span class="main">:</span>
<a name="L556" href="#L556"><span class="linenumber">556</span></a>        <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="free">F</span> <span class="main">âŸ¹</span>
<a name="L557" href="#L557"><span class="linenumber">557</span></a>         AOT_model_denotes <span class="free">G</span> <span class="main">âŸ¹</span>
<a name="L558" href="#L558"><span class="linenumber">558</span></a>         <span class="main">(</span><span class="main">â‹€</span> <span class="bound">x</span> <span class="main">.</span> <span class="free">AOT_model_enc</span> <span class="bound">x</span> <span class="free">F</span> <span class="main">âŸ·</span> <span class="free">AOT_model_enc</span> <span class="bound">x</span> <span class="free">G</span><span class="main">)</span>
<a name="L559" href="#L559"><span class="linenumber">559</span></a>         <span class="main">âŸ¹</span> <span class="free">F</span> <span class="main">=</span> <span class="free">G</span>â€º</span></span>
<a name="L560" href="#L560"><span class="linenumber">560</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_A_objects<span class="main">:</span>
<a name="L561" href="#L561"><span class="linenumber">561</span></a>        <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">âˆ§</span>
<a name="L562" href="#L562"><span class="linenumber">562</span></a>              <span class="main">(</span><span class="main">âˆ€</span><span class="bound">w</span><span class="main">.</span> <span class="main">Â¬</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L563" href="#L563"><span class="linenumber">563</span></a>              <span class="main">(</span><span class="main">âˆ€</span><span class="bound">F</span><span class="main">.</span> AOT_model_denotes <span class="bound">F</span> <span class="main">âŸ¶</span> <span class="free">AOT_model_enc</span> <span class="bound">x</span> <span class="bound">F</span> <span class="main">=</span> <span class="free">Ï†</span> <span class="bound">F</span><span class="main">)</span>â€º</span></span>
<a name="L564" href="#L564"><span class="linenumber">564</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_contingent<span class="main">:</span>
<a name="L565" href="#L565"><span class="linenumber">565</span></a>        <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span> <span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">âˆ§</span> <span class="main">Â¬</span> <span class="free">AOT_model_concrete</span> w<span class="hidden">â‡©</span><sub>0</sub> <span class="bound">x</span>â€º</span></span>
<a name="L566" href="#L566"><span class="linenumber">566</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_nocoder<span class="main">:</span>
<a name="L567" href="#L567"><span class="linenumber">567</span></a>        <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">x</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span><span class="free">AOT_model_enc</span> <span class="free">x</span> <span class="free">F</span>â€º</span></span>
<a name="L568" href="#L568"><span class="linenumber">568</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_concrete_equiv<span class="main">:</span>
<a name="L569" href="#L569"><span class="linenumber">569</span></a>        <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="free">x</span> <span class="free">y</span> <span class="main">âŸ¹</span> <span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">x</span> <span class="main">=</span> <span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">y</span>â€º</span></span>
<a name="L570" href="#L570"><span class="linenumber">570</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_concrete_denotes<span class="main">:</span>
<a name="L571" href="#L571"><span class="linenumber">571</span></a>        <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_concrete</span> <span class="free">w</span> <span class="free">x</span> <span class="main">âŸ¹</span> AOT_model_denotes <span class="free">x</span>â€º</span></span>
<a name="L572" href="#L572"><span class="linenumber">572</span></a><span class="comment1">(* only extended models *)</span>
<a name="L573" href="#L573"><span class="linenumber">573</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_enc_indistinguishable_all<span class="main">:</span>
<a name="L574" href="#L574"><span class="linenumber">574</span></a>       <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="free">a</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span><span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">a</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L575" href="#L575"><span class="linenumber">575</span></a>        AOT_model_denotes <span class="free">b</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span><span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">b</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L576" href="#L576"><span class="linenumber">576</span></a>        AOT_model_denotes <span class="free">Î </span> <span class="main">âŸ¹</span>
<a name="L577" href="#L577"><span class="linenumber">577</span></a>        <span class="main">(</span><span class="main">â‹€</span> <span class="bound">Î '</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">â‹€</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="free">a</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="free">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L578" href="#L578"><span class="linenumber">578</span></a>        <span class="main">(</span><span class="main">â‹€</span> <span class="bound">Î '</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">â‹€</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Î </span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="free">AOT_model_enc</span> <span class="free">a</span> <span class="bound">Î '</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L579" href="#L579"><span class="linenumber">579</span></a>        <span class="main">(</span><span class="main">â‹€</span> <span class="bound">Î '</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">â‹€</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Î </span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="free">AOT_model_enc</span> <span class="free">b</span> <span class="bound">Î '</span><span class="main">)</span>â€º</span></span>
<a name="L580" href="#L580"><span class="linenumber">580</span></a>      <span class="keyword2"><span class="keyword">and</span></span> AOT_model_enc_indistinguishable_ex<span class="main">:</span>
<a name="L581" href="#L581"><span class="linenumber">581</span></a>       <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="free">a</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span><span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">a</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L582" href="#L582"><span class="linenumber">582</span></a>        AOT_model_denotes <span class="free">b</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span><span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="free">b</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L583" href="#L583"><span class="linenumber">583</span></a>        AOT_model_denotes <span class="free">Î </span> <span class="main">âŸ¹</span>
<a name="L584" href="#L584"><span class="linenumber">584</span></a>        <span class="main">(</span><span class="main">â‹€</span> <span class="bound">Î '</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âŸ¹</span> <span class="main">(</span><span class="main">â‹€</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="free">a</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="free">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L585" href="#L585"><span class="linenumber">585</span></a>        <span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">Î '</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âˆ§</span> <span class="free">AOT_model_enc</span> <span class="free">a</span> <span class="bound">Î '</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Î </span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L586" href="#L586"><span class="linenumber">586</span></a>        <span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">Î '</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âˆ§</span> <span class="free">AOT_model_enc</span> <span class="free">b</span> <span class="bound">Î '</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">v</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">(</span><span class="main">âˆƒ</span> <span class="bound">w</span> <span class="main">.</span> <span class="free">AOT_model_concrete</span> <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="free">Î </span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L587" href="#L587"><span class="linenumber">587</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> Îº <span class="main">::</span> <span class="quoted">AOT_IndividualTerm</span>
<a name="L588" href="#L588"><span class="linenumber">588</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L589" href="#L589"><span class="linenumber">589</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_term_equiv_Îº</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹Îº <span class="main">â‡’</span> Îº <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L590" href="#L590"><span class="linenumber">590</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_term_equiv_Îº</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> ÎºÏ… <span class="bound">y</span>â€º</span></span>
<a name="L591" href="#L591"><span class="linenumber">591</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_Îº</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹Îº <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L592" href="#L592"><span class="linenumber">592</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_denotes_Îº</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">Â¬</span>is_nullÎº <span class="bound">x</span>â€º</span></span>
<a name="L593" href="#L593"><span class="linenumber">593</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_regular_Îº</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹Îº <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L594" href="#L594"><span class="linenumber">594</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_regular_Îº</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">x</span> <span class="main">.</span> Trueâ€º</span></span>
<a name="L595" href="#L595"><span class="linenumber">595</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_irregular_Îº</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Îº <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> Îº <span class="main">â‡’</span> ğ—ˆâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L596" href="#L596"><span class="linenumber">596</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_irregular_Îº</span> <span class="main">â‰¡</span> <span class="keyword1">SOME</span> <span class="bound">Ï†</span> <span class="main">.</span> AOT_model_irregular_spec <span class="bound">Ï†</span> AOT_model_regular AOT_model_term_equivâ€º</span></span>
<a name="L597" href="#L597"><span class="linenumber">597</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L598" href="#L598"><span class="linenumber">598</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span> <span class="main">::</span> Îº<span class="main">.</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L599" href="#L599"><span class="linenumber">599</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">â€¹Ï‰Îº undefinedâ€º</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L600" href="#L600"><span class="linenumber">600</span></a>       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_Îº_def<span class="main">)</span>
<a name="L601" href="#L601"><span class="linenumber">601</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L602" href="#L602"><span class="linenumber">602</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span> <span class="main">::</span> Îº<span class="main">.</span> <span class="main">Â¬</span>AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L603" href="#L603"><span class="linenumber">603</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">â€¹nullÎº undefinedâ€º</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L604" href="#L604"><span class="linenumber">604</span></a>       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_Îº_def AOT_model_regular_Îº_def<span class="main">)</span>
<a name="L605" href="#L605"><span class="linenumber">605</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L606" href="#L606"><span class="linenumber">606</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">Â¬</span>AOT_model_regular <span class="skolem">x</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span> AOT_model_denotes <span class="skolem">x</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">Îº</span>
<a name="L607" href="#L607"><span class="linenumber">607</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_Îº_def<span class="main">)</span>
<a name="L608" href="#L608"><span class="linenumber">608</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L609" href="#L609"><span class="linenumber">609</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹equivp <span class="main">(</span>AOT_model_term_equiv <span class="main">::</span> Îº <span class="main">â‡’</span> Îº <span class="main">â‡’</span> bool<span class="main">)</span>â€º</span></span>
<a name="L610" href="#L610"><span class="linenumber">610</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> equivpI<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> reflpI exI sympI transpI<span class="main">)</span>
<a name="L611" href="#L611"><span class="linenumber">611</span></a>       <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_Îº_def<span class="main">)</span>
<a name="L612" href="#L612"><span class="linenumber">612</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L613" href="#L613"><span class="linenumber">613</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">âŸ¹</span> AOT_model_denotes <span class="skolem">x</span> <span class="main">=</span> AOT_model_denotes <span class="skolem">y</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted">Îº</span>
<a name="L614" href="#L614"><span class="linenumber">614</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_denotes_Îº_def AOT_model_term_equiv_Îº_def Îº.exhaust_disc ÎºÏ….simps
<a name="L615" href="#L615"><span class="linenumber">615</span></a>              Ï….disc<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> Ï….disc<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Ï….disc<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> Ï….disc<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> is_Î±Îº_def is_Ï‰Îº_def is_nullÎº_def<span class="main">)</span>
<a name="L616" href="#L616"><span class="linenumber">616</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L617" href="#L617"><span class="linenumber">617</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">âŸ¹</span> AOT_model_regular <span class="skolem">x</span> <span class="main">=</span> AOT_model_regular <span class="skolem">y</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted">Îº</span>
<a name="L618" href="#L618"><span class="linenumber">618</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_Îº_def<span class="main">)</span>
<a name="L619" href="#L619"><span class="linenumber">619</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L620" href="#L620"><span class="linenumber">620</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"AOT_model_irregular_spec <span class="main">(</span><span class="main">Î»</span> <span class="bound">Ï†</span> <span class="main">(</span><span class="bound">x</span> <span class="main">::</span> Îº<span class="main">)</span> <span class="main">.</span>  <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> False<span class="main">)</span> AOT_model_regular AOT_model_term_equiv"</span></span>
<a name="L621" href="#L621"><span class="linenumber">621</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L622" href="#L622"><span class="linenumber">622</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular_spec <span class="main">(</span>AOT_model_irregular<span class="main">::</span><span class="main">(</span>Îº<span class="main">â‡’</span>ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> Îº <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> AOT_model_regular AOT_model_term_equivâ€º</span></span>
<a name="L623" href="#L623"><span class="linenumber">623</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_irregular_Îº_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> someI_ex<span class="main">)</span>
<a name="L624" href="#L624"><span class="linenumber">624</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L625" href="#L625"><span class="linenumber">625</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L626" href="#L626"><span class="linenumber">626</span></a>
<a name="L627" href="#L627"><span class="linenumber">627</span></a>
<a name="L628" href="#L628"><span class="linenumber">628</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">rel_to_urrel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span>Îº<span class="main">&gt;</span> <span class="main">â‡’</span> urrelâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L629" href="#L629"><span class="linenumber">629</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">rel_to_urrel</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">Î </span> <span class="main">.</span> Abs_urrel <span class="main">(</span><span class="main">Î»</span> <span class="bound">u</span> <span class="main">.</span> Rep_rel <span class="bound">Î </span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span> <span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L630" href="#L630"><span class="linenumber">630</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">urrel_to_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹urrel <span class="main">â‡’</span> <span class="main">&lt;</span>Îº<span class="main">&gt;</span>â€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L631" href="#L631"><span class="linenumber">631</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">urrel_to_rel</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">Ï†</span> <span class="main">.</span> Abs_rel <span class="main">(</span><span class="main">Î»</span> <span class="bound">x</span> <span class="main">.</span> Rep_urrel <span class="bound">Ï†</span> <span class="main">(</span>ÎºÏ… <span class="bound">x</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L632" href="#L632"><span class="linenumber">632</span></a>
<a name="L633" href="#L633"><span class="linenumber">633</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_rel_equiv</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm<span class="main">&gt;</span> <span class="main">â‡’</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L634" href="#L634"><span class="linenumber">634</span></a>  <span class="quoted"><span class="quoted">"<span class="free">AOT_rel_equiv</span> <span class="main">â‰¡</span> <span class="main">(</span><span class="main">Î»</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">âˆ§</span> AOT_model_denotes <span class="bound">y</span> <span class="main">âˆ§</span> <span class="bound">x</span> <span class="main">=</span> <span class="bound">y</span><span class="main">)</span>"</span></span>
<a name="L635" href="#L635"><span class="linenumber">635</span></a>
<a name="L636" href="#L636"><span class="linenumber">636</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_quotient3<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Quotient3 AOT_rel_equiv rel_to_urrel urrel_to_relâ€º</span></span>
<a name="L637" href="#L637"><span class="linenumber">637</span></a><span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Quotient3I<span class="main">)</span>
<a name="L638" href="#L638"><span class="linenumber">638</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> Rep_urrel <span class="skolem">a</span> <span class="main">(</span>ÎºÏ… <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> Rep_urrel <span class="skolem">a</span> <span class="bound">u</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L639" href="#L639"><span class="linenumber">639</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> ext<span class="main">)</span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> ÎºÏ…_surj surj_f_inv_f verit_sko_ex'<span class="main">)</span>
<a name="L640" href="#L640"><span class="linenumber">640</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹rel_to_urrel <span class="main">(</span>urrel_to_rel <span class="skolem">a</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">a</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L641" href="#L641"><span class="linenumber">641</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inverse rel_to_urrel_def urrel_to_rel_def Rep_urrel_inverse<span class="main">)</span>
<a name="L642" href="#L642"><span class="linenumber">642</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L643" href="#L643"><span class="linenumber">643</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_rel_equiv <span class="main">(</span>urrel_to_rel <span class="skolem">a</span><span class="main">)</span> <span class="main">(</span>urrel_to_rel <span class="skolem">a</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">a</span>
<a name="L644" href="#L644"><span class="linenumber">644</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_rel_equiv_def urrel_to_rel_def
<a name="L645" href="#L645"><span class="linenumber">645</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_Îº_def AOT_model_denotes_Îº_def
<a name="L646" href="#L646"><span class="linenumber">646</span></a>                           AOT_model_term_equiv_Îº_def urrel_null_false<span class="main">)</span>
<a name="L647" href="#L647"><span class="linenumber">647</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L648" href="#L648"><span class="linenumber">648</span></a>  <span class="keyword1"><span class="command">{</span></span>
<a name="L649" href="#L649"><span class="linenumber">649</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">a</span>
<a name="L650" href="#L650"><span class="linenumber">650</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">w</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="skolem">a</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> <span class="main">Â¬</span> is_nullÎº <span class="bound">x</span>â€º</span></span>
<a name="L651" href="#L651"><span class="linenumber">651</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">a</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">Ï†</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="main">Â¬</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">Ï†</span> <span class="main">(</span>nullÏ… <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L652" href="#L652"><span class="linenumber">652</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> Îº.exhaust_disc ÎºÏ….simps Ï….disc<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> Ï….disc<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Ï….disc<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span>
<a name="L653" href="#L653"><span class="linenumber">653</span></a>                                           Ï….disc<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> is_Î±Îº_def is_Ï‰Îº_def someI_ex<span class="main">)</span>
<a name="L654" href="#L654"><span class="linenumber">654</span></a>  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 1 <span class="main">=</span> this
<a name="L655" href="#L655"><span class="linenumber">655</span></a>  <span class="keyword1"><span class="command">{</span></span>
<a name="L656" href="#L656"><span class="linenumber">656</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">r</span> <span class="skolem">s</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹Îº <span class="main">â‡’</span> ğ—ˆâ€º</span></span>
<a name="L657" href="#L657"><span class="linenumber">657</span></a>    <span class="keyword3"><span class="command">assume</span></span> A<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">âŸ¶</span> <span class="skolem">r</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">r</span> <span class="bound">y</span>â€º</span></span>
<a name="L658" href="#L658"><span class="linenumber">658</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">w</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="skolem">r</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L659" href="#L659"><span class="linenumber">659</span></a>    <span class="keyword1"><span class="command">hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">Ï†</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="main">Â¬</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">Ï†</span> <span class="main">(</span>nullÏ… <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L660" href="#L660"><span class="linenumber">660</span></a>      <span class="keyword1"><span class="command">using</span></span> 1 AOT_model_denotes_Îº_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
<a name="L661" href="#L661"><span class="linenumber">661</span></a>    <span class="keyword3"><span class="command">assume</span></span> B<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">âŸ¶</span> <span class="skolem">s</span> <span class="bound">x</span> <span class="main">=</span> <span class="skolem">s</span> <span class="bound">y</span>â€º</span></span>
<a name="L662" href="#L662"><span class="linenumber">662</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">w</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="skolem">s</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L663" href="#L663"><span class="linenumber">663</span></a>    <span class="keyword1"><span class="command">hence</span></span> 3<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">s</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="main">{</span><span class="bound">Ï†</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound">x</span> <span class="bound">w</span><span class="main">.</span> <span class="main">Â¬</span> AOT_model_valid_in <span class="bound">w</span> <span class="main">(</span><span class="bound">Ï†</span> <span class="main">(</span>nullÏ… <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>â€º</span></span>
<a name="L664" href="#L664"><span class="linenumber">664</span></a>      <span class="keyword1"><span class="command">using</span></span> 1 AOT_model_denotes_Îº_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
<a name="L665" href="#L665"><span class="linenumber">665</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Abs_urrel <span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> Abs_urrel <span class="main">(</span><span class="main">Î»</span><span class="bound">u</span><span class="main">.</span> <span class="skolem">s</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="bound">u</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L666" href="#L666"><span class="linenumber">666</span></a>    <span class="keyword1"><span class="command">hence</span></span> 4<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">r</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="skolem">u</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">s</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x</span><span class="main">::</span>Îº<span class="main">.</span> ÎºÏ… <span class="bound">x</span> <span class="main">=</span> <span class="skolem">u</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">u</span>
<a name="L667" href="#L667"><span class="linenumber">667</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> Abs_urrel_inject<span class="main">[</span><span class="operator">OF</span> 2 3<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<a name="L668" href="#L668"><span class="linenumber">668</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">r</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">s</span> <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L669" href="#L669"><span class="linenumber">669</span></a>      <span class="keyword1"><span class="command">using</span></span> 4<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">â€¹ÎºÏ… <span class="skolem">x</span>â€º</span></span><span class="main">]</span>
<a name="L670" href="#L670"><span class="linenumber">670</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> A B AOT_model_term_equiv_Îº_def someI_ex<span class="main">)</span>
<a name="L671" href="#L671"><span class="linenumber">671</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">r</span> <span class="main">=</span> <span class="skolem">s</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L672" href="#L672"><span class="linenumber">672</span></a>  <span class="keyword1"><span class="command">}</span></span> 
<a name="L673" href="#L673"><span class="linenumber">673</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹AOT_rel_equiv <span class="skolem">r</span> <span class="skolem">s</span> <span class="main">=</span> <span class="main">(</span>AOT_rel_equiv <span class="skolem">r</span> <span class="skolem">r</span> <span class="main">âˆ§</span> AOT_rel_equiv <span class="skolem">s</span> <span class="skolem">s</span> <span class="main">âˆ§</span> rel_to_urrel <span class="skolem">r</span> <span class="main">=</span> rel_to_urrel <span class="skolem">s</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span> <span class="skolem">s</span>
<a name="L674" href="#L674"><span class="linenumber">674</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_rel_equiv_def rel_to_urrel_def
<a name="L675" href="#L675"><span class="linenumber">675</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">transfer</span> <span class="operator">auto</span>
<a name="L676" href="#L676"><span class="linenumber">676</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L677" href="#L677"><span class="linenumber">677</span></a>
<a name="L678" href="#L678"><span class="linenumber">678</span></a><span class="keyword1"><span class="command">lemma</span></span> urrel_quotient<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Quotient AOT_rel_equiv rel_to_urrel urrel_to_rel <span class="main">(</span><span class="main">Î»</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> AOT_rel_equiv <span class="bound">x</span> <span class="bound">x</span> <span class="main">âˆ§</span> rel_to_urrel <span class="bound">x</span> <span class="main">=</span> <span class="bound">y</span><span class="main">)</span>â€º</span></span>
<a name="L679" href="#L679"><span class="linenumber">679</span></a>  <span class="keyword1"><span class="command">using</span></span> Quotient3_to_Quotient<span class="main">[</span><span class="operator">OF</span> urrel_quotient3<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L680" href="#L680"><span class="linenumber">680</span></a>
<a name="L681" href="#L681"><span class="linenumber">681</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> Îº <span class="main">::</span> <span class="quoted">AOT_UnaryIndividualTerm</span>
<a name="L682" href="#L682"><span class="linenumber">682</span></a><span class="keyword2"><span class="keyword">begin</span></span>                          
<a name="L683" href="#L683"><span class="linenumber">683</span></a>
<a name="L684" href="#L684"><span class="linenumber">684</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_enc_Îº</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹Îº <span class="main">â‡’</span> <span class="main">&lt;</span>Îº<span class="main">&gt;</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L685" href="#L685"><span class="linenumber">685</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_enc_Îº</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">x</span> <span class="bound">F</span> <span class="main">.</span> <span class="keyword1">case</span> <span class="bound">x</span> <span class="keyword1">of</span> Î±Îº <span class="bound">a</span> <span class="main">â‡’</span> AOT_model_denotes <span class="bound">F</span> <span class="main">âˆ§</span> rel_to_urrel <span class="bound">F</span> <span class="main">âˆˆ</span> <span class="bound">a</span> <span class="main">|</span> <span class="main"><span class="bound">_</span></span> <span class="main">â‡’</span> Falseâ€º</span></span>
<a name="L686" href="#L686"><span class="linenumber">686</span></a><span class="keyword1"><span class="command">primrec</span></span> <span class="entity"><span class="class_parameter">AOT_model_concrete_Îº</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹w <span class="main">â‡’</span> Îº <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L687" href="#L687"><span class="linenumber">687</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_concrete_Îº</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="main">(</span>Ï‰Îº <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> AOT_model_concreteÏ‰ <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="free"><span class="bound"><span class="entity">w</span></span></span>â€º</span></span>
<a name="L688" href="#L688"><span class="linenumber">688</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_concrete_Îº</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="main">(</span>Î±Îº <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> Falseâ€º</span></span>
<a name="L689" href="#L689"><span class="linenumber">689</span></a><span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_concrete_Îº</span> <span class="free"><span class="bound"><span class="entity">w</span></span></span> <span class="main">(</span>nullÎº <span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">)</span> <span class="main">=</span> Falseâ€º</span></span>
<a name="L690" href="#L690"><span class="linenumber">690</span></a>
<a name="L691" href="#L691"><span class="linenumber">691</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_meta_A_objects_Îº<span class="main">:</span>
<a name="L692" href="#L692"><span class="linenumber">692</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span> <span class="main">::</span> Îº<span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">âˆ§</span>
<a name="L693" href="#L693"><span class="linenumber">693</span></a>            <span class="main">(</span><span class="main">âˆ€</span><span class="bound">w</span><span class="main">.</span> <span class="main">Â¬</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L694" href="#L694"><span class="linenumber">694</span></a>            <span class="main">(</span><span class="main">âˆ€</span><span class="bound">F</span><span class="main">.</span> AOT_model_denotes <span class="bound">F</span> <span class="main">âŸ¶</span> AOT_model_enc <span class="bound">x</span> <span class="bound">F</span> <span class="main">=</span> <span class="free">Ï†</span> <span class="bound">F</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="free">Ï†</span>
<a name="L695" href="#L695"><span class="linenumber">695</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">â€¹Î±Îº <span class="main"><span class="main">{</span></span><span class="bound"><span class="bound">f</span></span> <span class="main"><span class="main">.</span></span> <span class="free"><span class="free">Ï†</span></span> <span class="main"><span class="main">(</span></span>urrel_to_rel <span class="bound"><span class="bound">f</span></span><span class="main"><span class="main">)</span></span><span class="main"><span class="main">}</span></span>â€º</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L696" href="#L696"><span class="linenumber">696</span></a>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_enc_Îº_def AOT_model_denotes_Îº_def<span class="main">)</span>
<a name="L697" href="#L697"><span class="linenumber">697</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Quotient_rep_abs_fold_unmap urrel_quotient<span class="main">)</span>
<a name="L698" href="#L698"><span class="linenumber">698</span></a>
<a name="L699" href="#L699"><span class="linenumber">699</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L700" href="#L700"><span class="linenumber">700</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_regular <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">Îº</span>
<a name="L701" href="#L701"><span class="linenumber">701</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_Îº_def<span class="main">)</span>
<a name="L702" href="#L702"><span class="linenumber">702</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L703" href="#L703"><span class="linenumber">703</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span> <span class="skolem">G</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span>Îº<span class="main">&gt;</span>â€º</span></span>
<a name="L704" href="#L704"><span class="linenumber">704</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">F</span>â€º</span></span>
<a name="L705" href="#L705"><span class="linenumber">705</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">G</span>â€º</span></span>
<a name="L706" href="#L706"><span class="linenumber">706</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">â‹€</span><span class="bound">x</span><span class="main">.</span> AOT_model_enc <span class="bound">x</span> <span class="skolem">F</span> <span class="main">=</span> AOT_model_enc <span class="bound">x</span> <span class="skolem">G</span>â€º</span></span>
<a name="L707" href="#L707"><span class="linenumber">707</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">G</span><span class="main">.</span> AOT_model_denotes <span class="bound">G</span> <span class="main">âŸ¶</span> AOT_model_enc <span class="skolem">x</span> <span class="bound">G</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="bound">G</span><span class="main">)</span>â€º</span></span>
<a name="L708" href="#L708"><span class="linenumber">708</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_meta_A_objects_Îº <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L709" href="#L709"><span class="linenumber">709</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">F</span> <span class="main">=</span> <span class="skolem">G</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L710" href="#L710"><span class="linenumber">710</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L711" href="#L711"><span class="linenumber">711</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span> <span class="main">::</span> Îº<span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">âˆ§</span>
<a name="L712" href="#L712"><span class="linenumber">712</span></a>                 <span class="main">(</span><span class="main">âˆ€</span><span class="bound">w</span><span class="main">.</span> <span class="main">Â¬</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âˆ§</span>
<a name="L713" href="#L713"><span class="linenumber">713</span></a>                 <span class="main">(</span><span class="main">âˆ€</span><span class="bound">F</span><span class="main">.</span> AOT_model_denotes <span class="bound">F</span> <span class="main">âŸ¶</span> AOT_model_enc <span class="bound">x</span> <span class="bound">F</span> <span class="main">=</span> <span class="skolem">Ï†</span> <span class="bound">F</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Ï†</span>
<a name="L714" href="#L714"><span class="linenumber">714</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_meta_A_objects_Îº <span class="keyword1"><span class="command">.</span></span>
<a name="L715" href="#L715"><span class="linenumber">715</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L716" href="#L716"><span class="linenumber">716</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span> <span class="main">(</span><span class="bound">x</span><span class="main">::</span>Îº<span class="main">)</span> <span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span> <span class="main">âˆ§</span> <span class="main">Â¬</span> AOT_model_concrete w<span class="hidden">â‡©</span><sub>0</sub> <span class="bound">x</span>â€º</span></span>
<a name="L717" href="#L717"><span class="linenumber">717</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_concrete_Îº.simps<span class="main">(</span>1<span class="main">)</span> AOT_model_contingent_object <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L718" href="#L718"><span class="linenumber">718</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L719" href="#L719"><span class="linenumber">719</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_concrete <span class="skolem">w</span> <span class="skolem">x</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span> AOT_model_enc <span class="skolem">x</span> <span class="skolem">F</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">Îº</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">F</span>
<a name="L720" href="#L720"><span class="linenumber">720</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_enc_Îº_def Îº.case_eq_if Îº.collapse<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L721" href="#L721"><span class="linenumber">721</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L722" href="#L722"><span class="linenumber">722</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">âŸ¹</span> AOT_model_concrete <span class="skolem">w</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_concrete <span class="skolem">w</span> <span class="skolem">y</span>â€º</span></span>
<a name="L723" href="#L723"><span class="linenumber">723</span></a>    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted">Îº</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">w</span>
<a name="L724" href="#L724"><span class="linenumber">724</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">induct</span> <span class="quoted"><span class="skolem">y</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_Îº_def<span class="main">)</span>
<a name="L725" href="#L725"><span class="linenumber">725</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L726" href="#L726"><span class="linenumber">726</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_concrete <span class="skolem">w</span> <span class="skolem">x</span> <span class="main">âŸ¹</span> AOT_model_denotes <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">Îº</span>
<a name="L727" href="#L727"><span class="linenumber">727</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> AOT_model_denotes_Îº_def Îº.collapse<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L728" href="#L728"><span class="linenumber">728</span></a><span class="comment1">(* Extended models only *)</span>
<a name="L729" href="#L729"><span class="linenumber">729</span></a><span class="comment1">(* TODO: brush up proof *)</span>
<a name="L730" href="#L730"><span class="linenumber">730</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L731" href="#L731"><span class="linenumber">731</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Îº</span> <span class="skolem">Îº'</span> <span class="main">::</span> <span class="quoted">Îº</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Î </span> <span class="skolem">Î '</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span>Îº<span class="main">&gt;</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">w</span> <span class="main">::</span> <span class="quoted">w</span>
<a name="L732" href="#L732"><span class="linenumber">732</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Îº</span>â€º</span></span>
<a name="L733" href="#L733"><span class="linenumber">733</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ„</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">Îº</span>â€º</span></span>
<a name="L734" href="#L734"><span class="linenumber">734</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> a_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Î±Îº <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Îº</span>â€º</span></span>
<a name="L735" href="#L735"><span class="linenumber">735</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_Ï‰_concrete_in_some_world AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_Îº_def Îº.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Îº.exhaust_sel<span class="main">)</span>
<a name="L736" href="#L736"><span class="linenumber">736</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Îº'</span>â€º</span></span>
<a name="L737" href="#L737"><span class="linenumber">737</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ„</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">Îº'</span>â€º</span></span>
<a name="L738" href="#L738"><span class="linenumber">738</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="keyword2"><span class="keyword">where</span></span> b_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Î±Îº <span class="skolem">b</span> <span class="main">=</span> <span class="skolem">Îº'</span>â€º</span></span>
<a name="L739" href="#L739"><span class="linenumber">739</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_Ï‰_concrete_in_some_world AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_Îº_def Îº.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Îº.exhaust_sel<span class="main">)</span>
<a name="L740" href="#L740"><span class="linenumber">740</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î '</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="skolem">Îº</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="skolem">Îº'</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Î '</span> <span class="skolem">w</span>
<a name="L741" href="#L741"><span class="linenumber">741</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº'</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span>
<a name="L742" href="#L742"><span class="linenumber">742</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_rel_rep iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L743" href="#L743"><span class="linenumber">743</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="keyword1">let</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>Abs_urrel <span class="main">(</span><span class="main">Î»</span> <span class="bound">u</span> <span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">=</span> ÎºÏ… <span class="skolem">Îº</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">in</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº'</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L744" href="#L744"><span class="linenumber">744</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L745" href="#L745"><span class="linenumber">745</span></a>  <span class="keyword1"><span class="command">hence</span></span> Î±Ïƒ_eq<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Î±Ïƒ <span class="skolem">a</span> <span class="main">=</span> Î±Ïƒ <span class="skolem">b</span>â€º</span></span>
<a name="L746" href="#L746"><span class="linenumber">746</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> Let_def
<a name="L747" href="#L747"><span class="linenumber">747</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> <span class="main"><span class="main">(</span></span>1 2<span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L748" href="#L748"><span class="linenumber">748</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_proposition_choice_simp a_def b_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span><span class="main"><span class="keyword3">+</span></span>
<a name="L749" href="#L749"><span class="linenumber">749</span></a>  <span class="keyword3"><span class="command">assume</span></span> Î _den<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î </span>â€º</span></span>
<a name="L750" href="#L750"><span class="linenumber">750</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">r</span> <span class="main">.</span> <span class="main">âˆ€</span> <span class="bound">x</span> <span class="main">.</span> Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="bound">r</span> <span class="main">(</span>Ï‰Ï… <span class="bound">x</span><span class="main">)</span>â€º</span></span>
<a name="L751" href="#L751"><span class="linenumber">751</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">â€¹rel_to_urrel <span class="skolem"><span class="skolem">Î </span></span>â€º</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L752" href="#L752"><span class="linenumber">752</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L753" href="#L753"><span class="linenumber">753</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> rel_to_urrel_def
<a name="L754" href="#L754"><span class="linenumber">754</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L755" href="#L755"><span class="linenumber">755</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L756" href="#L756"><span class="linenumber">756</span></a>     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_Îº_def AOT_model_denotes_rel.rep_eq Îº.exhaust_disc ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î </span>â€º</span></span> Ï….disc<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> Ï….disc<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> Ï….distinct<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> is_Î±Îº_def is_Ï‰Îº_def verit_sko_ex'<span class="main">)</span>
<a name="L757" href="#L757"><span class="linenumber">757</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq AOT_model_term_equiv_Îº_def ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> Î _den verit_sko_ex'<span class="main">)</span>
<a name="L758" href="#L758"><span class="linenumber">758</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> r_prop<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="skolem">r</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">x</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L759" href="#L759"><span class="linenumber">759</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î '</span> <span class="main">âŸ¹</span>
<a name="L760" href="#L760"><span class="linenumber">760</span></a>              <span class="main">(</span><span class="main">â‹€</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L761" href="#L761"><span class="linenumber">761</span></a>              AOT_model_enc <span class="skolem">Îº</span> <span class="skolem">Î '</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Î '</span>
<a name="L762" href="#L762"><span class="linenumber">762</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î '</span> <span class="main">âŸ¹</span>
<a name="L763" href="#L763"><span class="linenumber">763</span></a>              <span class="main">(</span><span class="main">â‹€</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="main">(</span>Ï‰Îº <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L764" href="#L764"><span class="linenumber">764</span></a>              AOT_model_enc <span class="skolem">Îº</span> <span class="skolem">Î '</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Î '</span>
<a name="L765" href="#L765"><span class="linenumber">765</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Îº.exhaust_disc is_Î±Îº_def is_Ï‰Îº_def is_nullÎº_def<span class="main">)</span>
<a name="L766" href="#L766"><span class="linenumber">766</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">â‹€</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>Ï‰Ï… <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L767" href="#L767"><span class="linenumber">767</span></a>              <span class="skolem">r</span> <span class="main">âˆˆ</span> <span class="skolem">a</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span>
<a name="L768" href="#L768"><span class="linenumber">768</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> a_def<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> AOT_model_enc_Îº_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L769" href="#L769"><span class="linenumber">769</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L770" href="#L770"><span class="linenumber">770</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">â‹€</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r'</span> <span class="main">(</span>Ï‰Ï… <span class="bound">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>Ï‰Ï… <span class="bound">x</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">âŸ¹</span>
<a name="L771" href="#L771"><span class="linenumber">771</span></a>              <span class="skolem">r'</span> <span class="main">âˆˆ</span> <span class="skolem">a</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r'</span>
<a name="L772" href="#L772"><span class="linenumber">772</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> r_prop<span class="keyword1"><span class="command">.</span></span>
<a name="L773" href="#L773"><span class="linenumber">773</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">â‹€</span><span class="bound">s</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">âŸ¹</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="skolem">a</span>â€º</span></span>
<a name="L774" href="#L774"><span class="linenumber">774</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> urrel_to_Ï‰rel_def<span class="main">)</span>
<a name="L775" href="#L775"><span class="linenumber">775</span></a>  <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">â‹€</span><span class="bound">s</span><span class="main">.</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">r</span> <span class="main">âŸ¹</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="skolem">b</span>â€º</span></span>
<a name="L776" href="#L776"><span class="linenumber">776</span></a>    <span class="keyword1"><span class="command">using</span></span> Î±Ïƒ_eq_ord_exts_all<span class="main">[</span><span class="operator">OF</span> Î±Ïƒ_eq<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L777" href="#L777"><span class="linenumber">777</span></a>
<a name="L778" href="#L778"><span class="linenumber">778</span></a>  <span class="keyword3"><span class="command">assume</span></span> Î '_den<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î '</span>â€º</span></span>
<a name="L779" href="#L779"><span class="linenumber">779</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="skolem">x</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L780" href="#L780"><span class="linenumber">780</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="main">(</span>Ï‰Îº <span class="skolem">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L781" href="#L781"><span class="linenumber">781</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_Ï‰_concrete_in_some_world AOT_model_concrete_Îº.simps<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L782" href="#L782"><span class="linenumber">782</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="main">(</span>rel_to_urrel <span class="skolem">Î '</span><span class="main">)</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L783" href="#L783"><span class="linenumber">783</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def Î '_den ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I r_prop urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L784" href="#L784"><span class="linenumber">784</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="main">(</span>rel_to_urrel <span class="skolem">Î '</span><span class="main">)</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="skolem">r</span>â€º</span></span>
<a name="L785" href="#L785"><span class="linenumber">785</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> AOT_urrel_Ï‰equiv_def Quotient3_def urrel_Ï‰rel_quot<span class="main">)</span>
<a name="L786" href="#L786"><span class="linenumber">786</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹rel_to_urrel <span class="skolem">Î '</span> <span class="main">âˆˆ</span> <span class="skolem">b</span>â€º</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L787" href="#L787"><span class="linenumber">787</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_enc <span class="skolem">Îº'</span> <span class="skolem">Î '</span>â€º</span></span>
<a name="L788" href="#L788"><span class="linenumber">788</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> b_def<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> AOT_model_enc_Îº_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Î '_den<span class="main">)</span>
<a name="L789" href="#L789"><span class="linenumber">789</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L790" href="#L790"><span class="linenumber">790</span></a>  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Îº</span> <span class="skolem">Îº'</span> <span class="main">::</span> <span class="quoted">Îº</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Î </span> <span class="skolem">Î '</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">&lt;</span>Îº<span class="main">&gt;</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">w</span> <span class="main">::</span> <span class="quoted">w</span>
<a name="L791" href="#L791"><span class="linenumber">791</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Îº</span>â€º</span></span>
<a name="L792" href="#L792"><span class="linenumber">792</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ„</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">Îº</span>â€º</span></span>
<a name="L793" href="#L793"><span class="linenumber">793</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">a</span></span> <span class="keyword2"><span class="keyword">where</span></span> a_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Î±Îº <span class="skolem">a</span> <span class="main">=</span> <span class="skolem">Îº</span>â€º</span></span>
<a name="L794" href="#L794"><span class="linenumber">794</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_Ï‰_concrete_in_some_world AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_Îº_def Îº.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Îº.exhaust_sel<span class="main">)</span>
<a name="L795" href="#L795"><span class="linenumber">795</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Îº'</span>â€º</span></span>
<a name="L796" href="#L796"><span class="linenumber">796</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ„</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">Îº'</span>â€º</span></span>
<a name="L797" href="#L797"><span class="linenumber">797</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">b</span></span> <span class="keyword2"><span class="keyword">where</span></span> b_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Î±Îº <span class="skolem">b</span> <span class="main">=</span> <span class="skolem">Îº'</span>â€º</span></span>
<a name="L798" href="#L798"><span class="linenumber">798</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_Ï‰_concrete_in_some_world AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_Îº_def Îº.discI<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Îº.exhaust_sel<span class="main">)</span>
<a name="L799" href="#L799"><span class="linenumber">799</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î '</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="skolem">Îº</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="skolem">Îº'</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Î '</span> <span class="skolem">w</span>
<a name="L800" href="#L800"><span class="linenumber">800</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="skolem">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº'</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">r</span>
<a name="L801" href="#L801"><span class="linenumber">801</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_rel_rep iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L802" href="#L802"><span class="linenumber">802</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="keyword1">let</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>Abs_urrel <span class="main">(</span><span class="main">Î»</span> <span class="bound">u</span> <span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="bound">u</span> <span class="main">=</span> ÎºÏ… <span class="skolem">Îº</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">in</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>Rep_urrel <span class="bound">r</span> <span class="main">(</span>ÎºÏ… <span class="skolem">Îº'</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L803" href="#L803"><span class="linenumber">803</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">presburger</span>
<a name="L804" href="#L804"><span class="linenumber">804</span></a>  <span class="keyword1"><span class="command">hence</span></span> Î±Ïƒ_eq<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Î±Ïƒ <span class="skolem">a</span> <span class="main">=</span> Î±Ïƒ <span class="skolem">b</span>â€º</span></span>
<a name="L805" href="#L805"><span class="linenumber">805</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> Let_def
<a name="L806" href="#L806"><span class="linenumber">806</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> <span class="main"><span class="main">(</span></span><span class="quasi_keyword">asm</span><span class="main"><span class="main">)</span></span> <span class="main"><span class="main">(</span></span>1 2<span class="main"><span class="main">)</span></span> Abs_urrel_inverse<span class="main">)</span>
<a name="L807" href="#L807"><span class="linenumber">807</span></a>    <span class="keyword1"><span class="command">using</span></span> AOT_model_proposition_choice_simp a_def b_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span><span class="main"><span class="keyword3">+</span></span>
<a name="L808" href="#L808"><span class="linenumber">808</span></a>  <span class="keyword3"><span class="command">assume</span></span> Î _den<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î </span>â€º</span></span>
<a name="L809" href="#L809"><span class="linenumber">809</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">r</span> <span class="main">.</span> <span class="main">âˆ€</span> <span class="bound">x</span> <span class="main">.</span> Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="bound">r</span> <span class="main">(</span>Ï‰Ï… <span class="bound">x</span><span class="main">)</span>â€º</span></span>
<a name="L810" href="#L810"><span class="linenumber">810</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">â€¹rel_to_urrel <span class="skolem"><span class="skolem">Î </span></span>â€º</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L811" href="#L811"><span class="linenumber">811</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L812" href="#L812"><span class="linenumber">812</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> rel_to_urrel_def
<a name="L813" href="#L813"><span class="linenumber">813</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> Abs_urrel_inverse<span class="main">)</span>
<a name="L814" href="#L814"><span class="linenumber">814</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<a name="L815" href="#L815"><span class="linenumber">815</span></a>     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_Îº_def AOT_model_denotes_rel.rep_eq Îº.exhaust_disc ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> ÎºÏ….simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î </span>â€º</span></span> Ï….disc<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span> Ï….disc<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> Ï….distinct<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> is_Î±Îº_def is_Ï‰Îº_def verit_sko_ex'<span class="main">)</span>
<a name="L816" href="#L816"><span class="linenumber">816</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq AOT_model_term_equiv_Îº_def ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> Î _den verit_sko_ex'<span class="main">)</span>
<a name="L817" href="#L817"><span class="linenumber">817</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> r_prop<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> Rep_urrel <span class="skolem">r</span> <span class="main">(</span>Ï‰Ï… <span class="skolem">x</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L818" href="#L818"><span class="linenumber">818</span></a>
<a name="L819" href="#L819"><span class="linenumber">819</span></a>  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">Î '</span><span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âˆ§</span>
<a name="L820" href="#L820"><span class="linenumber">820</span></a>             AOT_model_enc <span class="skolem">Îº</span> <span class="bound">Î '</span> <span class="main">âˆ§</span>
<a name="L821" href="#L821"><span class="linenumber">821</span></a>             <span class="main">(</span><span class="main">âˆ€</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">âˆƒ</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L822" href="#L822"><span class="linenumber">822</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Î '</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L823" href="#L823"><span class="linenumber">823</span></a>      Î '_den<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î '</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span>
<a name="L824" href="#L824"><span class="linenumber">824</span></a>      Îº_enc_Î '<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_enc <span class="skolem">Îº</span> <span class="skolem">Î '</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span>
<a name="L825" href="#L825"><span class="linenumber">825</span></a>      Î '_prop<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="skolem">x</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L826" href="#L826"><span class="linenumber">826</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L827" href="#L827"><span class="linenumber">827</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î '</span> <span class="main">(</span>Ï‰Îº <span class="skolem">x</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="main">(</span>Ï‰Îº <span class="skolem">x</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">v</span>
<a name="L828" href="#L828"><span class="linenumber">828</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_Ï‰_concrete_in_some_world Î '_prop<span class="main">)</span>
<a name="L829" href="#L829"><span class="linenumber">829</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="main">(</span>rel_to_urrel <span class="skolem">Î '</span><span class="main">)</span> <span class="main">(</span>rel_to_urrel <span class="skolem">Î </span><span class="main">)</span>â€º</span></span>
<a name="L830" href="#L830"><span class="linenumber">830</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_urrel_Ï‰equiv_def
<a name="L831" href="#L831"><span class="linenumber">831</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def Î '_den Î _den ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I urrel_quotient3 urrel_to_rel_def<span class="main">)</span>
<a name="L832" href="#L832"><span class="linenumber">832</span></a>  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹rel_to_urrel <span class="skolem">Î '</span> <span class="main">âˆˆ</span> <span class="skolem">a</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹urrel_to_Ï‰rel <span class="main">(</span>rel_to_urrel <span class="skolem">Î '</span><span class="main">)</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="main">(</span>rel_to_urrel <span class="skolem">Î </span><span class="main">)</span>â€º</span></span>
<a name="L833" href="#L833"><span class="linenumber">833</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_enc_Îº_def Îº.simps<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> Îº_enc_Î ' a_def<span class="main">)</span>
<a name="L834" href="#L834"><span class="linenumber">834</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Quotient3_rel <span class="quoted"><span class="quoted">â€¹AOT_urrel_Ï‰equiv <span class="main">(</span>rel_to_urrel <span class="skolem">Î '</span><span class="main">)</span> <span class="main">(</span>rel_to_urrel <span class="skolem">Î </span><span class="main">)</span>â€º</span></span> urrel_Ï‰rel_quot<span class="main">)</span>
<a name="L835" href="#L835"><span class="linenumber">835</span></a>  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">s</span> <span class="main">âˆˆ</span> <span class="skolem">b</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="bound">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="main">(</span>rel_to_urrel <span class="skolem">Î </span><span class="main">)</span>â€º</span></span>
<a name="L836" href="#L836"><span class="linenumber">836</span></a>    <span class="keyword1"><span class="command">using</span></span> Î±Ïƒ_eq_ord_exts_ex<span class="main">[</span><span class="operator">OF</span> Î±Ïƒ_eq<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L837" href="#L837"><span class="linenumber">837</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> s_prop<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">s</span> <span class="main">âˆˆ</span> <span class="skolem">b</span> <span class="main">âˆ§</span> urrel_to_Ï‰rel <span class="skolem">s</span> <span class="main">=</span> urrel_to_Ï‰rel <span class="main">(</span>rel_to_urrel <span class="skolem">Î </span><span class="main">)</span>â€º</span></span>
<a name="L838" href="#L838"><span class="linenumber">838</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L839" href="#L839"><span class="linenumber">839</span></a>  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Î ''</span></span> <span class="keyword2"><span class="keyword">where</span></span> Î ''_prop<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹rel_to_urrel <span class="skolem">Î ''</span> <span class="main">=</span> <span class="skolem">s</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> Î ''_den<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">Î ''</span>â€º</span></span>
<a name="L840" href="#L840"><span class="linenumber">840</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_rel_equiv_def Quotient3_def urrel_quotient3<span class="main">)</span>
<a name="L841" href="#L841"><span class="linenumber">841</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_enc <span class="skolem">Îº'</span> <span class="skolem">Î ''</span>â€º</span></span>
<a name="L842" href="#L842"><span class="linenumber">842</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_enc_Îº_def Î ''_den Î ''_prop Îº.simps<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> b_def s_prop<span class="main">)</span>
<a name="L843" href="#L843"><span class="linenumber">843</span></a>  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">âˆƒ</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">âŸ¹</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î ''</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="skolem">x</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
<a name="L844" href="#L844"><span class="linenumber">844</span></a>  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
<a name="L845" href="#L845"><span class="linenumber">845</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span>â€º</span></span>
<a name="L846" href="#L846"><span class="linenumber">846</span></a>    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">u</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">x</span> <span class="main">=</span> Ï‰Îº <span class="skolem">u</span>â€º</span></span>
<a name="L847" href="#L847"><span class="linenumber">847</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_concrete_Îº.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> Îº.exhaust<span class="main">)</span>
<a name="L848" href="#L848"><span class="linenumber">848</span></a>    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î ''</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="skolem">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="skolem">x</span><span class="main">)</span>â€º</span></span>
<a name="L849" href="#L849"><span class="linenumber">849</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> x_def
<a name="L850" href="#L850"><span class="linenumber">850</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">,</span></span> best<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Abs_rel_inverse Quotient3_def Î ''_den Î ''_prop Î _den ÎºÏ….simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> iso_tuple_UNIV_I s_prop urrel_quotient3 urrel_to_Ï‰rel_def urrel_to_rel_def<span class="main">)</span>
<a name="L851" href="#L851"><span class="linenumber">851</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L852" href="#L852"><span class="linenumber">852</span></a>  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">Î '</span><span class="main">.</span> AOT_model_denotes <span class="bound">Î '</span> <span class="main">âˆ§</span>
<a name="L853" href="#L853"><span class="linenumber">853</span></a>             AOT_model_enc <span class="skolem">Îº'</span> <span class="bound">Î '</span> <span class="main">âˆ§</span>
<a name="L854" href="#L854"><span class="linenumber">854</span></a>             <span class="main">(</span><span class="main">âˆ€</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">âˆƒ</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŸ¶</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="bound">Î '</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="main">(</span>Rep_rel <span class="skolem">Î </span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L855" href="#L855"><span class="linenumber">855</span></a>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">Î ''</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L856" href="#L856"><span class="linenumber">856</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<a name="L857" href="#L857"><span class="linenumber">857</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L858" href="#L858"><span class="linenumber">858</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L859" href="#L859"><span class="linenumber">859</span></a>
<a name="L860" href="#L860"><span class="linenumber">860</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> prod <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_UnaryIndividualTerm</span><span class="main">,</span> <span class="quoted">AOT_IndividualTerm</span><span class="main">)</span> <span class="quoted">AOT_IndividualTerm</span>
<a name="L861" href="#L861"><span class="linenumber">861</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L862" href="#L862"><span class="linenumber">862</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_regular_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L863" href="#L863"><span class="linenumber">863</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_regular_prod</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span> <span class="main">.</span> <span class="main">(</span>AOT_model_regular <span class="bound">x</span> <span class="main">âˆ§</span> AOT_model_regular <span class="bound">y</span> <span class="main">âˆ§</span> <span class="main">(</span>AOT_model_denotes <span class="bound">x</span> <span class="main">âˆ¨</span> AOT_model_denotes <span class="bound">y</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L864" href="#L864"><span class="linenumber">864</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_term_equiv_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L865" href="#L865"><span class="linenumber">865</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_term_equiv_prod</span> <span class="main">â‰¡</span>  <span class="main">Î»</span> <span class="main">(</span><span class="bound">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="bound">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">)</span> <span class="main">(</span><span class="bound">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">,</span><span class="bound">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">.</span> <span class="main">(</span>AOT_model_term_equiv <span class="bound">x<span class="hidden">â‡©</span><sub>1</sub></span> <span class="bound">x<span class="hidden">â‡©</span><sub>2</sub></span> <span class="main">âˆ§</span> AOT_model_term_equiv <span class="bound">y<span class="hidden">â‡©</span><sub>1</sub></span> <span class="bound">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span>
<a name="L866" href="#L866"><span class="linenumber">866</span></a><span class="keyword1"><span class="command">function</span></span> <span class="entity"><span class="class_parameter">AOT_model_irregular_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L867" href="#L867"><span class="linenumber">867</span></a>  AOT_model_irregular_proj2<span class="main">:</span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">âˆ§</span> <span class="main">Â¬</span>AOT_model_denotes <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="main">âŸ¹</span>
<a name="L868" href="#L868"><span class="linenumber">868</span></a>    AOT_model_irregular <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="main">(</span><span class="main">Î»</span><span class="bound">y</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">x'</span> <span class="main">.</span> AOT_model_term_equiv <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="bound">x'</span><span class="main">,</span> <span class="bound">y</span><span class="main">)</span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">y</span></span></span>"</span></span>
<a name="L869" href="#L869"><span class="linenumber">869</span></a><span class="main">|</span> AOT_model_irregular_proj1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">Â¬</span>AOT_model_denotes <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">âˆ§</span> AOT_model_denotes <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="main">âŸ¹</span>
<a name="L870" href="#L870"><span class="linenumber">870</span></a>    AOT_model_irregular <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="main">(</span><span class="main">Î»</span><span class="bound">x</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span> <span class="keyword1">SOME</span> <span class="bound">y'</span> <span class="main">.</span> AOT_model_term_equiv <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="bound">y'</span><span class="main">)</span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span>"</span></span>
<a name="L871" href="#L871"><span class="linenumber">871</span></a><span class="main">|</span> AOT_model_irregular_prod_generic<span class="main">:</span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">=</span> AOT_model_denotes <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="main">âŸ¹</span>
<a name="L872" href="#L872"><span class="linenumber">872</span></a>    AOT_model_irregular <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">Î¦</span> <span class="main">.</span> AOT_model_irregular_spec <span class="bound">Î¦</span> AOT_model_regular AOT_model_term_equiv<span class="main">)</span> <span class="free"><span class="bound"><span class="entity">Ï†</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">,</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">)</span>"</span></span>
<a name="L873" href="#L873"><span class="linenumber">873</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> <span class="operator">blast</span>
<a name="L874" href="#L874"><span class="linenumber">874</span></a><span class="keyword1"><span class="command">termination</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"termination"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L875" href="#L875"><span class="linenumber">875</span></a>
<a name="L876" href="#L876"><span class="linenumber">876</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L877" href="#L877"><span class="linenumber">877</span></a>  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_denotes <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_denotes <span class="skolem">y</span>â€º</span></span>
<a name="L878" href="#L878"><span class="linenumber">878</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_nondenoting_ex AOT_model_denoting_ex<span class="main">)</span>
<a name="L879" href="#L879"><span class="linenumber">879</span></a>  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span><span class="main">.</span> <span class="main">Â¬</span>AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L880" href="#L880"><span class="linenumber">880</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_prod_def AOT_model_regular_prod_def<span class="main">)</span>
<a name="L881" href="#L881"><span class="linenumber">881</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L882" href="#L882"><span class="linenumber">882</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹equivp <span class="main">(</span>AOT_model_term_equiv <span class="main">::</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> bool<span class="main">)</span>â€º</span></span>
<a name="L883" href="#L883"><span class="linenumber">883</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> equivpI<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> reflpI sympI transpI<span class="main"><span class="keyword3">;</span></span>
<a name="L884" href="#L884"><span class="linenumber">884</span></a>        <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def AOT_model_term_equiv_part_equivp
<a name="L885" href="#L885"><span class="linenumber">885</span></a>                  equivp_reflp prod.case_eq_if case_prod_unfold equivp_symp<span class="main">)</span>
<a name="L886" href="#L886"><span class="linenumber">886</span></a>       <span class="main">(</span><span class="operator">metis</span> equivp_transp<span class="main"><span class="main">[</span></span><span class="operator">OF</span> AOT_model_term_equiv_part_equivp<span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L887" href="#L887"><span class="linenumber">887</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L888" href="#L888"><span class="linenumber">888</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_regular <span class="skolem">x</span> <span class="main">âŸ¹</span> <span class="main">Â¬</span> AOT_model_denotes <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span>â€º</span></span>
<a name="L889" href="#L889"><span class="linenumber">889</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_prod_def AOT_model_irregular_nondenoting
<a name="L890" href="#L890"><span class="linenumber">890</span></a>                                   AOT_model_regular_prod_def case_prod_unfold<span class="main">)</span>
<a name="L891" href="#L891"><span class="linenumber">891</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L892" href="#L892"><span class="linenumber">892</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">âŸ¹</span> AOT_model_denotes <span class="skolem">x</span> <span class="main">=</span> AOT_model_denotes <span class="skolem">y</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span>â€º</span></span>
<a name="L893" href="#L893"><span class="linenumber">893</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_prod_def AOT_model_term_equiv_denotes
<a name="L894" href="#L894"><span class="linenumber">894</span></a>                                   AOT_model_term_equiv_prod_def case_prod_beta<span class="main">)</span>
<a name="L895" href="#L895"><span class="linenumber">895</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L896" href="#L896"><span class="linenumber">896</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">âŸ¹</span> AOT_model_regular <span class="skolem">x</span> <span class="main">=</span> AOT_model_regular <span class="skolem">y</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span>â€º</span></span>
<a name="L897" href="#L897"><span class="linenumber">897</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">induct</span> <span class="quoted"><span class="skolem">y</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def AOT_model_regular_prod_def<span class="main">)</span>
<a name="L898" href="#L898"><span class="linenumber">898</span></a>       <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes AOT_model_term_equiv_regular<span class="main">)</span>
<a name="L899" href="#L899"><span class="linenumber">899</span></a><span class="keyword1"><span class="command">next</span></span>
<a name="L900" href="#L900"><span class="linenumber">900</span></a>  <span class="keyword1"><span class="command">interpret</span></span> sp<span class="main">:</span> AOT_model_irregular_spec <span class="quoted"><span class="quoted">â€¹<span class="main">Î»</span><span class="bound">Ï†</span> <span class="main">(</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span><span class="main">)</span> <span class="main">.</span> <span class="keyword1">Îµ<span class="hidden">â‡©</span><sub>ğ—ˆ</sub></span> <span class="bound">w</span> <span class="main">.</span> Falseâ€º</span></span> <span class="quoted">AOT_model_regular</span> <span class="quoted">AOT_model_term_equiv</span>
<a name="L901" href="#L901"><span class="linenumber">901</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_spec_def AOT_model_proposition_choice_simp<span class="main">)</span>
<a name="L902" href="#L902"><span class="linenumber">902</span></a>  <span class="keyword1"><span class="command">have</span></span> ex_spec<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">âˆƒ</span> <span class="bound">Ï†</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ <span class="main">.</span> AOT_model_irregular_spec <span class="bound">Ï†</span> AOT_model_regular AOT_model_term_equiv"</span></span>
<a name="L903" href="#L903"><span class="linenumber">903</span></a>    <span class="keyword1"><span class="command">using</span></span> sp.AOT_model_irregular_spec_axioms <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L904" href="#L904"><span class="linenumber">904</span></a>  <span class="keyword1"><span class="command">have</span></span> some_spec<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular_spec
<a name="L905" href="#L905"><span class="linenumber">905</span></a>    <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">Ï†</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ <span class="main">.</span> AOT_model_irregular_spec <span class="bound">Ï†</span> AOT_model_regular AOT_model_term_equiv<span class="main">)</span>
<a name="L906" href="#L906"><span class="linenumber">906</span></a>    AOT_model_regular AOT_model_term_equivâ€º</span></span>
<a name="L907" href="#L907"><span class="linenumber">907</span></a>    <span class="keyword1"><span class="command">using</span></span> someI_ex<span class="main">[</span><span class="operator">OF</span> ex_spec<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
<a name="L908" href="#L908"><span class="linenumber">908</span></a>  <span class="keyword1"><span class="command">interpret</span></span> sp_some<span class="main">:</span> AOT_model_irregular_spec
<a name="L909" href="#L909"><span class="linenumber">909</span></a>    <span class="quoted"><span class="quoted">â€¹<span class="keyword1">SOME</span> <span class="bound">Ï†</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ <span class="main">.</span> AOT_model_irregular_spec <span class="bound">Ï†</span> AOT_model_regular AOT_model_term_equivâ€º</span></span>
<a name="L910" href="#L910"><span class="linenumber">910</span></a>    <span class="quoted">AOT_model_regular</span> <span class="quoted">AOT_model_term_equiv</span>
<a name="L911" href="#L911"><span class="linenumber">911</span></a>    <span class="keyword1"><span class="command">using</span></span> some_spec <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L912" href="#L912"><span class="linenumber">912</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular_spec <span class="main">(</span>AOT_model_irregular <span class="main">::</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆ<span class="main">)</span> AOT_model_regular AOT_model_term_equivâ€º</span></span>
<a name="L913" href="#L913"><span class="linenumber">913</span></a>  <span class="keyword1"><span class="command">proof</span></span>
<a name="L914" href="#L914"><span class="linenumber">914</span></a>    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">a</span><span class="main">,</span> <span class="skolem">b</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">Ï†</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">a</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">b</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
<a name="L915" href="#L915"><span class="linenumber">915</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">Ï†</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_prod.induct<span class="main">)</span>
<a name="L916" href="#L916"><span class="linenumber">916</span></a>         <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_false sp_some.AOT_model_irregular_false<span class="main">)</span>
<a name="L917" href="#L917"><span class="linenumber">917</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">Â¬</span>AOT_model_valid_in <span class="skolem">w</span> <span class="main">(</span>AOT_model_irregular <span class="skolem">Ï†</span> <span class="skolem">x</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">Ï†</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span>â€º</span></span>
<a name="L918" href="#L918"><span class="linenumber">918</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main">)</span>
<a name="L919" href="#L919"><span class="linenumber">919</span></a>  <span class="keyword1"><span class="command">next</span></span>
<a name="L920" href="#L920"><span class="linenumber">920</span></a>    <span class="keyword1"><span class="command">{</span></span>
<a name="L921" href="#L921"><span class="linenumber">921</span></a>      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span> <span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span> <span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Ï†</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span><span class="main">â‡’</span>ğ—ˆâ€º</span></span>
<a name="L922" href="#L922"><span class="linenumber">922</span></a>      <span class="keyword3"><span class="command">assume</span></span> x<span class="hidden">â‡©</span><sub>1</sub>y<span class="hidden">â‡©</span><sub>1</sub>_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span> <span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span>â€º</span></span>
<a name="L923" href="#L923"><span class="linenumber">923</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> x<span class="hidden">â‡©</span><sub>2</sub>y<span class="hidden">â‡©</span><sub>2</sub>_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span> <span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L924" href="#L924"><span class="linenumber">924</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> xy_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="main">(</span><span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">(</span><span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span>
<a name="L925" href="#L925"><span class="linenumber">925</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def<span class="main">)</span>
<a name="L926" href="#L926"><span class="linenumber">926</span></a>      <span class="keyword1"><span class="command">{</span></span>
<a name="L927" href="#L927"><span class="linenumber">927</span></a>        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L928" href="#L928"><span class="linenumber">928</span></a>        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command"><span class="improper">hence</span></span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L929" href="#L929"><span class="linenumber">929</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes x<span class="hidden">â‡©</span><sub>1</sub>y<span class="hidden">â‡©</span><sub>1</sub>_equiv x<span class="hidden">â‡©</span><sub>2</sub>y<span class="hidden">â‡©</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L930" href="#L930"><span class="linenumber">930</span></a>        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span>
<a name="L931" href="#L931"><span class="linenumber">931</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sp_some.AOT_model_irregular_equiv xy_equiv<span class="main">)</span>
<a name="L932" href="#L932"><span class="linenumber">932</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L933" href="#L933"><span class="linenumber">933</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L934" href="#L934"><span class="linenumber">934</span></a>        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">~</span>AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> <span class="main">~</span>AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L935" href="#L935"><span class="linenumber">935</span></a>        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command"><span class="improper">hence</span></span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">~</span>AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> <span class="main">~</span>AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L936" href="#L936"><span class="linenumber">936</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes x<span class="hidden">â‡©</span><sub>1</sub>y<span class="hidden">â‡©</span><sub>1</sub>_equiv x<span class="hidden">â‡©</span><sub>2</sub>y<span class="hidden">â‡©</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L937" href="#L937"><span class="linenumber">937</span></a>        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span>
<a name="L938" href="#L938"><span class="linenumber">938</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sp_some.AOT_model_irregular_equiv xy_equiv<span class="main">)</span>
<a name="L939" href="#L939"><span class="linenumber">939</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L940" href="#L940"><span class="linenumber">940</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L941" href="#L941"><span class="linenumber">941</span></a>        <span class="keyword3"><span class="command">assume</span></span> denotes_x<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> <span class="main">Â¬</span>AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L942" href="#L942"><span class="linenumber">942</span></a>        <span class="keyword1"><span class="command">hence</span></span> denotes_y<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> <span class="main">Â¬</span>AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L943" href="#L943"><span class="linenumber">943</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes x<span class="hidden">â‡©</span><sub>1</sub>y<span class="hidden">â‡©</span><sub>1</sub>_equiv x<span class="hidden">â‡©</span><sub>2</sub>y<span class="hidden">â‡©</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L944" href="#L944"><span class="linenumber">944</span></a>        <span class="keyword1"><span class="command">have</span></span> eps_eq<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">)</span> <span class="main">=</span> Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">)</span>â€º</span></span>
<a name="L945" href="#L945"><span class="linenumber">945</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> x<span class="hidden">â‡©</span><sub>1</sub>y<span class="hidden">â‡©</span><sub>1</sub>_equiv<span class="main">)</span>
<a name="L946" href="#L946"><span class="linenumber">946</span></a>        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span>
<a name="L947" href="#L947"><span class="linenumber">947</span></a>          <span class="keyword1"><span class="command">using</span></span> denotes_x denotes_y <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> x<span class="hidden">â‡©</span><sub>2</sub>y<span class="hidden">â‡©</span><sub>2</sub>_equiv eps_eq AOT_model_irregular_equiv<span class="main">)</span>
<a name="L948" href="#L948"><span class="linenumber">948</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L949" href="#L949"><span class="linenumber">949</span></a>      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
<a name="L950" href="#L950"><span class="linenumber">950</span></a>        <span class="keyword3"><span class="command">assume</span></span> denotes_x<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> AOT_model_denotes <span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L951" href="#L951"><span class="linenumber">951</span></a>        <span class="keyword1"><span class="command">hence</span></span> denotes_y<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span> <span class="main">âˆ§</span> AOT_model_denotes <span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span>â€º</span></span>
<a name="L952" href="#L952"><span class="linenumber">952</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes x<span class="hidden">â‡©</span><sub>1</sub>y<span class="hidden">â‡©</span><sub>1</sub>_equiv x<span class="hidden">â‡©</span><sub>2</sub>y<span class="hidden">â‡©</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L953" href="#L953"><span class="linenumber">953</span></a>        <span class="keyword1"><span class="command">have</span></span> eps_eq<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span>
<a name="L954" href="#L954"><span class="linenumber">954</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> x<span class="hidden">â‡©</span><sub>2</sub>y<span class="hidden">â‡©</span><sub>2</sub>_equiv<span class="main">)</span>
<a name="L955" href="#L955"><span class="linenumber">955</span></a>        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span>
<a name="L956" href="#L956"><span class="linenumber">956</span></a>          <span class="keyword1"><span class="command">using</span></span> denotes_x denotes_y
<a name="L957" href="#L957"><span class="linenumber">957</span></a>          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> x<span class="hidden">â‡©</span><sub>1</sub>y<span class="hidden">â‡©</span><sub>1</sub>_equiv eps_eq AOT_model_irregular_equiv<span class="main">)</span>
<a name="L958" href="#L958"><span class="linenumber">958</span></a>      <span class="keyword1"><span class="command">}</span></span>
<a name="L959" href="#L959"><span class="linenumber">959</span></a>      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">x<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">x<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">y<span class="hidden">â‡©</span><sub>1</sub></span><span class="main">,</span><span class="skolem">y<span class="hidden">â‡©</span><sub>2</sub></span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L960" href="#L960"><span class="linenumber">960</span></a>    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 0 <span class="main">=</span> this
<a name="L961" href="#L961"><span class="linenumber">961</span></a>    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">âŸ¹</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ï†</span> <span class="skolem">y</span>â€º</span></span>
<a name="L962" href="#L962"><span class="linenumber">962</span></a>      <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Ï†</span>
<a name="L963" href="#L963"><span class="linenumber">963</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">x</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">induct</span> <span class="quoted"><span class="skolem">y</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def 0<span class="main">)</span>
<a name="L964" href="#L964"><span class="linenumber">964</span></a>  <span class="keyword1"><span class="command">next</span></span>
<a name="L965" href="#L965"><span class="linenumber">965</span></a>    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Ï†</span> <span class="skolem">Ïˆ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span> <span class="main">â‡’</span> ğ—ˆâ€º</span></span>
<a name="L966" href="#L966"><span class="linenumber">966</span></a>    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_regular <span class="skolem">x</span> <span class="main">âŸ¹</span> <span class="skolem">Ï†</span> <span class="skolem">x</span> <span class="main">=</span> <span class="skolem">Ïˆ</span> <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
<a name="L967" href="#L967"><span class="linenumber">967</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_regular <span class="skolem">x</span> <span class="main">âˆ§</span> AOT_model_regular <span class="skolem">y</span> <span class="main">âˆ§</span> <span class="main">(</span>AOT_model_denotes <span class="skolem">x</span> <span class="main">âˆ¨</span> AOT_model_denotes <span class="skolem">y</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span> <span class="skolem">y</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">Ïˆ</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span> <span class="skolem">y</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
<a name="L968" href="#L968"><span class="linenumber">968</span></a>      <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_regular_prod_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<a name="L969" href="#L969"><span class="linenumber">969</span></a>    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="skolem">Ï†</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ïˆ</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">y</span><span class="main">)</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">y</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
<a name="L970" href="#L970"><span class="linenumber">970</span></a>    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">Ïˆ</span></span> <span class="quoted"><span class="skolem">Ï†</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_prod.induct<span class="main">)</span>
<a name="L971" href="#L971"><span class="linenumber">971</span></a>      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>1 <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">Ï†</span><span class="main">)</span>
<a name="L972" href="#L972"><span class="linenumber">972</span></a>      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
<a name="L973" href="#L973"><span class="linenumber">973</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L974" href="#L974"><span class="linenumber">974</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_eqI AOT_model_irregular_nondenoting AOT_model_term_equiv_denotes AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L975" href="#L975"><span class="linenumber">975</span></a>    <span class="keyword1"><span class="command">next</span></span>
<a name="L976" href="#L976"><span class="linenumber">976</span></a>      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>2 <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">Ï†</span><span class="main">)</span>
<a name="L977" href="#L977"><span class="linenumber">977</span></a>      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
<a name="L978" href="#L978"><span class="linenumber">978</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L979" href="#L979"><span class="linenumber">979</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_nondenoting AOT_model_no_special_nondenoting AOT_model_term_equiv_denotes AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
<a name="L980" href="#L980"><span class="linenumber">980</span></a>    <span class="keyword1"><span class="command">next</span></span>
<a name="L981" href="#L981"><span class="linenumber">981</span></a>      <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>3 <span class="skolem">x</span> <span class="skolem">y</span> <span class="skolem">Ï†</span><span class="main">)</span>
<a name="L982" href="#L982"><span class="linenumber">982</span></a>      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
<a name="L983" href="#L983"><span class="linenumber">983</span></a>        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp</span>
<a name="L984" href="#L984"><span class="linenumber">984</span></a>        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_regular_prod_def case_prod_conv sp_some.AOT_model_irregular_eqI surj_pair<span class="main">)</span>
<a name="L985" href="#L985"><span class="linenumber">985</span></a>    <span class="keyword1"><span class="command">qed</span></span>
<a name="L986" href="#L986"><span class="linenumber">986</span></a>    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_irregular <span class="skolem">Ï†</span> <span class="skolem">x</span> <span class="main">=</span> AOT_model_irregular <span class="skolem">Ïˆ</span> <span class="skolem">x</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span>  <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">Ã—</span><span class="tfree">'b</span>â€º</span></span>
<a name="L987" href="#L987"><span class="linenumber">987</span></a>      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> surjective_pairing<span class="main">)</span>
<a name="L988" href="#L988"><span class="linenumber">988</span></a>  <span class="keyword1"><span class="command">qed</span></span>
<a name="L989" href="#L989"><span class="linenumber">989</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L990" href="#L990"><span class="linenumber">990</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L991" href="#L991"><span class="linenumber">991</span></a>
<a name="L992" href="#L992"><span class="linenumber">992</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_meta_prod_equivI<span class="main">:</span>
<a name="L993" href="#L993"><span class="linenumber">993</span></a>  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">â‹€</span> <span class="main">(</span><span class="bound">a</span><span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>AOT_UnaryIndividualTerm<span class="main">)</span> <span class="bound">x</span> <span class="main">(</span><span class="bound">y</span> <span class="main">::</span> <span class="tfree">'b</span><span class="main">::</span>AOT_IndividualTerm<span class="main">)</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">âŸ¹</span> AOT_model_term_equiv <span class="main">(</span><span class="bound">a</span><span class="main">,</span><span class="bound">x</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span>"</span></span>
<a name="L994" href="#L994"><span class="linenumber">994</span></a>    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">â‹€</span> <span class="main">(</span><span class="bound">x</span><span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>AOT_UnaryIndividualTerm<span class="main">)</span> <span class="bound">y</span> <span class="main">(</span><span class="bound">b</span> <span class="main">::</span> <span class="tfree">'b</span><span class="main">::</span>AOT_IndividualTerm<span class="main">)</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">âŸ¹</span> AOT_model_term_equiv <span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span> <span class="main">(</span><span class="bound">y</span><span class="main">,</span><span class="bound">b</span><span class="main">)</span>"</span></span>
<a name="L995" href="#L995"><span class="linenumber">995</span></a>    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_term_equiv_prod_def
<a name="L996" href="#L996"><span class="linenumber">996</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_part_equivp equivp_reflp<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<a name="L997" href="#L997"><span class="linenumber">997</span></a>
<a name="L998" href="#L998"><span class="linenumber">998</span></a>
<a name="L999" href="#L999"><span class="linenumber">999</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> unit <span class="main">::</span> <span class="quoted">AOT_Term</span>
<a name="L1000" href="#L1000"><span class="linenumber">1000</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L1001" href="#L1001"><span class="linenumber">1001</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_unit</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹unit <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_denotes_unit</span> <span class="main">â‰¡</span> <span class="main">Î»</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> Trueâ€º</span></span>
<a name="L1002" href="#L1002"><span class="linenumber">1002</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L1003" href="#L1003"><span class="linenumber">1003</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span><span class="main">::</span>unit<span class="main">.</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L1004" href="#L1004"><span class="linenumber">1004</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_unit_def<span class="main">)</span>
<a name="L1005" href="#L1005"><span class="linenumber">1005</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L1006" href="#L1006"><span class="linenumber">1006</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1007" href="#L1007"><span class="linenumber">1007</span></a>
<a name="L1008" href="#L1008"><span class="linenumber">1008</span></a><span class="keyword1"><span class="command"><span title="(102)">instantiation</span></span></span> ğ—ˆ <span class="main">::</span> <span class="quoted">AOT_Term</span>
<a name="L1009" href="#L1009"><span class="linenumber">1009</span></a><span class="keyword2"><span class="keyword">begin</span></span>
<a name="L1010" href="#L1010"><span class="linenumber">1010</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_model_denotes_ğ—ˆ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹ğ—ˆ <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_denotes_ğ—ˆ</span> <span class="main">â‰¡</span> <span class="main">Î»</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> Trueâ€º</span></span>
<a name="L1011" href="#L1011"><span class="linenumber">1011</span></a><span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
<a name="L1012" href="#L1012"><span class="linenumber">1012</span></a>  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">x</span><span class="main">::</span>ğ—ˆ<span class="main">.</span> AOT_model_denotes <span class="bound">x</span>â€º</span></span>
<a name="L1013" href="#L1013"><span class="linenumber">1013</span></a>    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_ğ—ˆ_def<span class="main">)</span>
<a name="L1014" href="#L1014"><span class="linenumber">1014</span></a><span class="keyword1"><span class="command">qed</span></span>
<a name="L1015" href="#L1015"><span class="linenumber">1015</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1016" href="#L1016"><span class="linenumber">1016</span></a>
<a name="L1017" href="#L1017"><span class="linenumber">1017</span></a><span class="keyword1"><span class="command">typedef</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">overloaded</span></span><span class="main">)</span> <span class="tfree">'a</span> AOT_var <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span> <span class="bound">x</span> <span class="main">::</span> <span class="tfree">'a</span><span class="main">::</span>AOT_Term <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">}</span>â€º</span></span>
<a name="L1018" href="#L1018"><span class="linenumber">1018</span></a>  <span class="keyword2"><span class="keyword">morphisms</span></span> AOT_term_of_var AOT_var_of_term
<a name="L1019" href="#L1019"><span class="linenumber">1019</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denoting_ex<span class="main">)</span>
<a name="L1020" href="#L1020"><span class="linenumber">1020</span></a>
<a name="L1021" href="#L1021"><span class="linenumber">1021</span></a><span class="keyword1"><span class="command">declare</span></span> AOT_var_of_term_induct<span class="main">[</span><span class="operator">induct</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1022" href="#L1022"><span class="linenumber">1022</span></a>        AOT_var_of_term_cases<span class="main">[</span><span class="operator">cases</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1023" href="#L1023"><span class="linenumber">1023</span></a>        AOT_term_of_var_induct<span class="main">[</span><span class="operator">induct</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1024" href="#L1024"><span class="linenumber">1024</span></a>        AOT_term_of_var_cases<span class="main">[</span><span class="operator">cases</span> <span class="quasi_keyword">del</span><span class="main">]</span>
<a name="L1025" href="#L1025"><span class="linenumber">1025</span></a>
<a name="L1026" href="#L1026"><span class="linenumber">1026</span></a><span class="keyword1"><span class="command">lemmas</span></span> AOT_var_of_term_inverse <span class="main">=</span> AOT_var_of_term_inverse<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1027" href="#L1027"><span class="linenumber">1027</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_var_of_term_inject <span class="main">=</span> AOT_var_of_term_inject<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1028" href="#L1028"><span class="linenumber">1028</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_var_of_term_induct <span class="main">=</span> AOT_var_of_term_induct<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">induct</span> <span class="quasi_keyword">type</span><span class="main"><span class="main">:</span></span> AOT_var<span class="main">]</span>
<a name="L1029" href="#L1029"><span class="linenumber">1029</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_var_of_term_cases <span class="main">=</span> AOT_var_of_term_cases<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">cases</span> <span class="quasi_keyword">type</span><span class="main"><span class="main">:</span></span> AOT_var<span class="main">]</span>
<a name="L1030" href="#L1030"><span class="linenumber">1030</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var <span class="main">=</span> AOT_term_of_var<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1031" href="#L1031"><span class="linenumber">1031</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_cases <span class="main">=</span> AOT_term_of_var_cases<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">induct</span> <span class="quasi_keyword"><span title="(781)">pred</span></span><span class="main"><span class="main">:</span></span> AOT_term_of_var<span class="main">]</span>
<a name="L1032" href="#L1032"><span class="linenumber">1032</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_induct <span class="main">=</span> AOT_term_of_var_induct<span class="main">[</span><span class="operator">simplified</span><span class="main">,</span> <span class="operator">induct</span> <span class="quasi_keyword"><span title="(781)">pred</span></span><span class="main"><span class="main">:</span></span> AOT_term_of_var<span class="main">]</span>
<a name="L1033" href="#L1033"><span class="linenumber">1033</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_inverse <span class="main">=</span> AOT_term_of_var_inverse<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1034" href="#L1034"><span class="linenumber">1034</span></a>   <span class="keyword2"><span class="keyword">and</span></span> AOT_term_of_var_inject <span class="main">=</span> AOT_term_of_var_inject<span class="main">[</span><span class="operator">simplified</span><span class="main">]</span>
<a name="L1035" href="#L1035"><span class="linenumber">1035</span></a>
<a name="L1036" href="#L1036"><span class="linenumber">1036</span></a><span class="keyword1"><span class="command">consts</span></span> AOT_model_equiv_def <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹ğ—ˆ <span class="main">â‡’</span> ğ—ˆ <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L1037" href="#L1037"><span class="linenumber">1037</span></a><span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_model_equiv_def</span><span class="main">)</span>
<a name="L1038" href="#L1038"><span class="linenumber">1038</span></a>  AOT_model_equiv_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹AOT_model_equiv_def <span class="free">Ï†</span> <span class="free">Ïˆ</span> <span class="main">=</span> <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="free">Ï†</span> <span class="main">=</span> AOT_model_valid_in <span class="bound">v</span> <span class="free">Ïˆ</span><span class="main">)</span>â€º</span></span>
<a name="L1039" href="#L1039"><span class="linenumber">1039</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">â€¹<span class="main"><span class="main"><span class="main">Î»</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ï†</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ïˆ</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">âˆ€</span></span></span> <span class="bound"><span class="bound"><span class="bound">v</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> AOT_model_valid_in <span class="bound"><span class="bound"><span class="bound">v</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ï†</span></span></span> <span class="main"><span class="main"><span class="main">=</span></span></span> AOT_model_valid_in <span class="bound"><span class="bound"><span class="bound">v</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ïˆ</span></span></span>â€º</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="operator">simp</span>
<a name="L1040" href="#L1040"><span class="linenumber">1040</span></a>
<a name="L1041" href="#L1041"><span class="linenumber">1041</span></a><span class="keyword1"><span class="command">consts</span></span> AOT_model_id_def <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'b</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">::</span>AOT_Term<span class="main">)</span> <span class="main">â‡’</span> <span class="main">(</span><span class="tfree">'b</span> <span class="main">â‡’</span> <span class="tfree">'a</span><span class="main">)</span> <span class="main">â‡’</span> boolâ€º</span></span>
<a name="L1042" href="#L1042"><span class="linenumber">1042</span></a><span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_model_id_def</span><span class="main">)</span>
<a name="L1043" href="#L1043"><span class="linenumber">1043</span></a>  AOT_model_id_def<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>AOT_model_id_def <span class="free">Ï„</span> <span class="free">Ïƒ</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">âˆ€</span> <span class="bound">Î±</span> <span class="main">.</span> <span class="keyword1">if</span> AOT_model_denotes <span class="main">(</span><span class="free">Ïƒ</span> <span class="bound">Î±</span><span class="main">)</span> <span class="keyword1">then</span> <span class="free">Ï„</span> <span class="bound">Î±</span> <span class="main">=</span> <span class="free">Ïƒ</span> <span class="bound">Î±</span> <span class="keyword1">else</span> <span class="main">Â¬</span>AOT_model_denotes <span class="main">(</span><span class="free">Ï„</span> <span class="bound">Î±</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<a name="L1044" href="#L1044"><span class="linenumber">1044</span></a>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main"><span class="main">Î»</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ï„</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ïƒ</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="main"><span class="main"><span class="main">âˆ€</span></span></span> <span class="bound"><span class="bound"><span class="bound">Î±</span></span></span> <span class="main"><span class="main"><span class="main">.</span></span></span> <span class="keyword1"><span class="keyword1"><span class="keyword1">if</span></span></span> AOT_model_denotes <span class="main"><span class="main"><span class="main">(</span></span></span><span class="bound"><span class="bound"><span class="bound">Ïƒ</span></span></span> <span class="bound"><span class="bound"><span class="bound">Î±</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span> <span class="keyword1"><span class="keyword1"><span class="keyword1">then</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ï„</span></span></span> <span class="bound"><span class="bound"><span class="bound">Î±</span></span></span> <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="bound"><span class="bound"><span class="bound">Ïƒ</span></span></span> <span class="bound"><span class="bound"><span class="bound">Î±</span></span></span> <span class="keyword1"><span class="keyword1"><span class="keyword1">else</span></span></span> <span class="main"><span class="main"><span class="main">Â¬</span></span></span>AOT_model_denotes <span class="main"><span class="main"><span class="main">(</span></span></span><span class="bound"><span class="bound"><span class="bound">Ï„</span></span></span> <span class="bound"><span class="bound"><span class="bound">Î±</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
<a name="L1045" href="#L1045"><span class="linenumber">1045</span></a>     <span class="operator">blast</span>
<a name="L1046" href="#L1046"><span class="linenumber">1046</span></a>
<a name="L1047" href="#L1047"><span class="linenumber">1047</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_nondenoting</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span><span class="main">::</span>AOT_IncompleteTermâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
<a name="L1048" href="#L1048"><span class="linenumber">1048</span></a>  <span class="quoted"><span class="quoted">â€¹<span class="free">AOT_model_nondenoting</span> <span class="main">â‰¡</span> <span class="keyword1">SOME</span> <span class="bound">Ï„</span> <span class="main">.</span> <span class="main">Â¬</span>AOT_model_denotes <span class="bound">Ï„</span>â€º</span></span>
<a name="L1049" href="#L1049"><span class="linenumber">1049</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_nondenoing<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span>AOT_model_denotes <span class="main">(</span>AOT_model_nondenoting<span class="main">)</span>â€º</span></span>
<a name="L1050" href="#L1050"><span class="linenumber">1050</span></a>  <span class="keyword1"><span class="command">using</span></span> someI_ex<span class="main">[</span><span class="operator">OF</span> AOT_model_nondenoting_ex<span class="main">]</span> <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_nondenoting_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<a name="L1051" href="#L1051"><span class="linenumber">1051</span></a>
<a name="L1052" href="#L1052"><span class="linenumber">1052</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_axiom</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">AOT_model_axiom</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">Ï†</span> <span class="main">.</span> <span class="main">âˆ€</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="bound">Ï†</span>"</span></span>
<a name="L1053" href="#L1053"><span class="linenumber">1053</span></a><span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_model_act_axiom</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">AOT_model_act_axiom</span> <span class="main">â‰¡</span> <span class="main">Î»</span> <span class="bound">Ï†</span> <span class="main">.</span> AOT_model_valid_in w<span class="hidden">â‡©</span><sub>0</sub> <span class="bound">Ï†</span>"</span></span>
<a name="L1054" href="#L1054"><span class="linenumber">1054</span></a>
<a name="L1055" href="#L1055"><span class="linenumber">1055</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_axiomI<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">â‹€</span><span class="bound">v</span> <span class="main">.</span> AOT_model_valid_in <span class="bound">v</span> <span class="free">Ï†</span>â€º</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_axiom <span class="free">Ï†</span>â€º</span></span>
<a name="L1056" href="#L1056"><span class="linenumber">1056</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_axiom_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">..</span></span>
<a name="L1057" href="#L1057"><span class="linenumber">1057</span></a>
<a name="L1058" href="#L1058"><span class="linenumber">1058</span></a><span class="keyword1"><span class="command">lemma</span></span> AOT_model_act_axiomI<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_valid_in w<span class="hidden">â‡©</span><sub>0</sub> <span class="free">Ï†</span>â€º</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹AOT_model_act_axiom <span class="free">Ï†</span>â€º</span></span>
<a name="L1059" href="#L1059"><span class="linenumber">1059</span></a>  <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_act_axiom_def <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">.</span></span>
<a name="L1060" href="#L1060"><span class="linenumber">1060</span></a>
<a name="L1061" href="#L1061"><span class="linenumber">1061</span></a><span class="comment1">(*&lt;*)</span>
<a name="L1062" href="#L1062"><span class="linenumber">1062</span></a><span class="keyword2"><span class="keyword">end</span></span>
<a name="L1063" href="#L1063"><span class="linenumber">1063</span></a><span class="comment1">(*&gt;*)</span></pre>
</body>

</html>