<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory AOT_PossibleWorlds</title>
</head>


<body>
<div class="head">
<h1>Theory AOT_PossibleWorlds</h1>
</div>

<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> AOT_PossibleWorlds
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="AOT_PLM.html">AOT_PLM</a> <a href="AOT_BasicLogicalObjects.html">AOT_BasicLogicalObjects</a> <a href="AOT_RestrictedVariables.html">AOT_RestrictedVariables</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹Possible Worlds›</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> Situation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Situation'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  situations<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"T-sit"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TruthValue(</span><span class="free">x</span><span class="main">)</span> <span class="main">→</span> <span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TruthValue(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="keyword1">TruthValueOf(</span><span class="free">x</span><span class="main">,</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"T-value"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TruthValueOf(</span><span class="free">x</span><span class="main">,</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> θ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">q</span><span class="main">(</span><span class="main">(</span><span class="bound">q</span> <span class="main">≡</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"tv-p"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> GEN <span class="quoted">"→I"</span> θ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span><span class="main">(</span><span class="main">(</span><span class="bound">q</span> <span class="main">≡</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> θ<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">F</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">q</span> <span class="main">≡</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"∃I"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"prop-prop1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> situations<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"KBasic:3"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"&amp;I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">A!</span><span class="free">x</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"oa-facts:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">Π</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
         <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"prop-prop1"</span> <span class="quoted">"≡Df"</span> <span class="quoted">"enc-prop-nec:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> 1 <span class="quoted">"≡Df"</span> situations<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"qml:2"</span><span class="main">[</span><span class="operator">axiom_inst</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> that<span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"possit-sit:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"possit-sit:1"</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"RE◇"</span> <span class="quoted">"S5Basic:2"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> <span class="quoted">"Commutativity of ≡"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"possit-sit:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"possit-sit:1"</span> <span class="quoted">"possit-sit:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"possit-sit:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"Act-Basic:5"</span> <span class="quoted">"Act-Sub:2"</span> <span class="quoted">"RA[2]"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted">"possit-sit:2"</span><span class="main">)</span>


<span class="keyword1"><span class="command">AOT_register_rigid_restricted_type</span></span>
  Situation<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">κ</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TruthValueOf(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"p-has-!tv:1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="keyword1">TruthValueOf(</span><span class="skolem">x</span><span class="main">,</span><span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TruthValue(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"T-value"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"T-sit"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="keyword1">Situation(</span><span class="bound">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">κ</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">κ</span><span class="main">↓</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">κ</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">κ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="skolem">κ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> situations<span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">κ</span><span class="main">↓</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"russell-axiom[exe,1].ψ_denotes_asm"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">α</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="skolem">α</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="keyword1">Situation(</span><span class="skolem">α</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"conventions:3"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> RN<span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_register_variable_names</span></span>
  Situation<span class="main">:</span> s

<span class="keyword1"><span class="command">AOT_define</span></span> TruthInSituation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">"<span class="keyword3"><span class="keyword3">(</span></span>_ <span class="keyword1"><span class="keyword1">⊨</span></span><span class="keyword3"><span class="keyword3">/ </span></span>_<span class="keyword3"><span class="keyword3">)</span></span>"</span> <span class="main">[</span>100<span class="main">,</span> 40<span class="main">]</span> 100<span class="main">)</span>
  <span class="quoted">"true-in-s"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free"><span class="free">s</span></span> <span class="main">⊨</span> <span class="free">p</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="free">s</span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="free">p</span>›</span></span>

<span class="keyword1"><span class="command">notepad</span></span>
<span class="keyword2"><span class="keyword">begin</span></span>
  <span class="comment1">(* Verify precedence. *)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">p</span> <span class="skolem">q</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="skolem">q</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">q</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="skolem">q</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="skolem">q</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">¬</span><span class="skolem">p</span><span class="main">)</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">p</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">□</span><span class="skolem">p</span><span class="main">)</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">p</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">p</span><span class="main">)</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">□</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">□</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">¬</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">¬</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword2"><span class="keyword">end</span></span>


<span class="keyword1"><span class="command">AOT_theorem</span></span> lem1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"true-in-s"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"prop-enc"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"prop-enc"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"cqt:2[const_var]"</span><span class="main"><span class="main">[</span></span><span class="operator">axiom_inst</span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"true-in-s"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">]</span> 1 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"lem2:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">s</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Situation.ψ<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">s</span><span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> sit<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≡</span> <span class="main">□</span><span class="free">s</span><span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"en-eq:2[1]"</span><span class="main"><span class="main">[</span></span><span class="operator">unvarify</span> F<span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≡</span> <span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> RM<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"possit-sit:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> sit<span class="main"><span class="main">]</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:6"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"Commutativity of ≡"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"lem2:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">]</span> <span class="quoted">"lem2:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"conventions:3"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span> RM<span class="main">[</span><span class="operator">OF</span> <span class="quoted">"→I"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"B◇"</span> <span class="quoted">"S5Basic:13"</span> <span class="quoted">"T◇"</span> <span class="quoted">"≡I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"lem2:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:1"</span> <span class="quoted">"lem2:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"lem2:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">≡</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">]</span>
      <span class="quoted">"lem2:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"conventions:3"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span> RM<span class="main">[</span><span class="operator">OF</span> <span class="quoted">"→I"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sc-eq-fur:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"lem2:5"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="main">¬</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic2:1"</span> <span class="quoted">"contraposition:1[2]"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> <span class="quoted">"lem2:2"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-identity"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"oth-class-taut:3:a"</span> <span class="quoted">"universal-cor"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> a<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"ab-obey:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span> GEN <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">s</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> Situation.ψ <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> situations <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">s'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> Situation.ψ <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> situations <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> Situation.ψ<span class="main">[</span><span class="operator">THEN</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">F</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>
            <span class="quoted">"prop-prop1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> F_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> a<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">p</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> F_def<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> Situation.ψ<span class="main">[</span><span class="operator">THEN</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">F</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>
            <span class="quoted">"prop-prop1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> F_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> a<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">p</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> F_def<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> PartOfSituation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">‹<span class="keyword1"><span class="keyword1">⊴</span></span>›</span> 80<span class="main">)</span>
  <span class="quoted">"sit-part-whole"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free"><span class="free">s</span></span> <span class="main">⊴</span> <span class="free"><span class="free">s'</span></span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"part:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊴</span> <span class="free">s</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"sit-part-whole"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> Situation.ψ GEN <span class="quoted">"→I"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"part:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊴</span> <span class="free">s'</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">≠</span> <span class="free">s'</span> <span class="main">→</span> <span class="main">¬</span><span class="main">(</span><span class="free">s'</span> <span class="main">⊴</span> <span class="free">s</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊴</span> <span class="free">s'</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> a<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊴</span> <span class="free">s</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> b<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> a b <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"universal-cor"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-identity"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">≠</span> <span class="free">s'</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="free">s</span> <span class="main">=</span> <span class="free">s'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"=-infix"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">(</span><span class="free">s</span> <span class="main">=</span> <span class="free">s'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 1 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"part:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊴</span> <span class="free">s'</span> <span class="main">&amp;</span> <span class="free">s'</span> <span class="main">⊴</span> <span class="free">s''</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊴</span> <span class="free">s''</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> GEN <span class="quoted">"→I"</span> <span class="quoted">"sit-part-whole"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> Situation.ψ<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊴</span> <span class="free">s'</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">p</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊴</span> <span class="free">s''</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">p</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-identity2:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span> <span class="main">≡</span> <span class="free">s</span> <span class="main">⊴</span> <span class="free">s'</span> <span class="main">&amp;</span> <span class="free">s'</span> <span class="main">⊴</span> <span class="free">s</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊴</span> <span class="free">s'</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span> <span class="quoted">"part:1"</span> that <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊴</span> <span class="free">s</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span> <span class="quoted">"part:1"</span> that<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊴</span> <span class="free">s'</span> <span class="main">&amp;</span> <span class="free">s'</span> <span class="main">⊴</span> <span class="free">s</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"part:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"=-infix"</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-identity2:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">s''</span></span> <span class="main">(</span><span class="bound">s''</span> <span class="main">⊴</span> <span class="free">s</span> <span class="main">≡</span> <span class="bound">s''</span> <span class="main">⊴</span> <span class="free">s'</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> Situation.GEN <span class="quoted">"sit-identity"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> GEN<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted">𝗈</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s''</span> <span class="main">⊴</span> <span class="free">s'</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s''</span> <span class="main">⊴</span> <span class="free">s</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">s''</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span> that <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s''</span> <span class="main">⊴</span> <span class="free">s</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s''</span> <span class="main">⊴</span> <span class="free">s'</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">=</span> <span class="free">s'</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">s''</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span> id_sym that <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">s''</span></span> <span class="main">(</span><span class="bound">s''</span> <span class="main">⊴</span> <span class="free">s</span> <span class="main">≡</span> <span class="bound">s''</span> <span class="main">⊴</span> <span class="free">s'</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"Situation.∀E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"part:1"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">s''</span></span> <span class="main">(</span><span class="bound">s''</span> <span class="main">⊴</span> <span class="free">s</span> <span class="main">≡</span> <span class="bound">s''</span> <span class="main">⊴</span> <span class="free">s'</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> that<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"Situation.∀E"</span><span class="main"><span class="main">,</span></span>
          <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"part:1"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> Persistent <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹φ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Persistent'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  persistent<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Persistent(</span><span class="free">p</span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">∀</span><span class="bound"><span class="bound">s</span></span> <span class="main">(</span><span class="bound">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="main">∀</span><span class="bound"><span class="bound">s'</span></span> <span class="main">(</span><span class="bound">s</span> <span class="main">⊴</span> <span class="bound">s'</span> <span class="main">→</span> <span class="bound">s'</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"pers-prop"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="keyword1">Persistent(</span><span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> GEN<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted">𝗈</span><span class="main"><span class="main">]</span></span> Situation.GEN persistent<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
     <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"sit-part-whole"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_define</span></span> NullSituation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">NullSituation'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  <span class="quoted">"df-null-trivial:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">NullSituation(</span><span class="free"><span class="free">s</span></span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> TrivialSituation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">TrivialSituation'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  <span class="quoted">"df-null-trivial:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TrivialSituation(</span><span class="free"><span class="free">s</span></span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">∀</span><span class="bound">p</span> <span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"thm-null-trivial:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃!</span><span class="bound">x</span> <span class="keyword1">NullSituation(</span><span class="bound">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">NullSituation(</span><span class="bound">κ</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">A!</span><span class="bound">κ</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">κ</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">≠</span> <span class="bound">F</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">NullSituation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">A!</span><span class="skolem">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">≠</span> <span class="bound">F</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> <span class="quoted">"df-null-trivial:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-null-trivial:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="skolem">x</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span> <span class="main">→</span> <span class="main">∃</span><span class="bound">p</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span>
        <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"prop-prop1"</span> <span class="quoted">"→E"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="skolem">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">≠</span> <span class="bound">F</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> 1 GEN <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
        <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> calculation 2<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"rule=E"</span><span class="main">)</span>
        <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
        <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">≠</span> <span class="skolem">F</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"raa-cor:1"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span> AOT_var›</span></span>
        <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">≠</span> <span class="skolem">F</span>›</span></span>
        <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="skolem">F</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"=-infix"</span><span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="skolem">F</span>›</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"id-eq:1"</span><span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="quoted">"raa-cor:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="skolem">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">≠</span> <span class="bound">F</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span> <span class="main">≡</span> <span class="skolem">F</span> <span class="main">≠</span> <span class="skolem">F</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"id-eq:1"</span> <span class="quoted">"=-infix"</span> <span class="quoted">"reductio-aa:1"</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> GEN <span class="quoted">"→I"</span><span class="main">)</span>
        <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span> <span class="keyword1"><span class="command">using</span></span> that 1 <span class="quoted">"&amp;I"</span> <span class="quoted">"raa-cor:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
          <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
          <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
            <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> lem1 <span class="quoted">"modus-tollens:1"</span> <span class="quoted">"raa-cor:3"</span> <span class="quoted">"true-in-s"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> 1<span class="main"><span class="main">[</span></span><span class="operator">unvarify</span> F<span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="quoted">"raa-cor:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃!</span><span class="bound">x</span> <span class="main">(</span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span><span class="bound">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">≠</span> <span class="bound">F</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"A-objects!"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"thm-null-trivial:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃!</span><span class="bound">x</span> <span class="keyword1">TrivialSituation(</span><span class="bound">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">TrivialSituation(</span><span class="bound">κ</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">A!</span><span class="bound">κ</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">κ</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TrivialSituation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">A!</span><span class="skolem">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> <span class="quoted">"df-null-trivial:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-null-trivial:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="skolem">x</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span> <span class="main">→</span> <span class="main">∃</span><span class="bound">p</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span>
        <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"prop-prop1"</span> <span class="quoted">"→E"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="skolem">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> 1 GEN <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> 2<span class="main">)</span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
        <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"rule=E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> id_sym <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> lem1 <span class="quoted">"Commutativity of ≡"</span> <span class="quoted">"→E"</span><span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="skolem">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> GEN <span class="quoted">"→I"</span><span class="main">)</span>
        <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span>
          <span class="keyword1"><span class="command">using</span></span> 1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> that<span class="main">]</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"prop-prop1"</span><span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> 2 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> GEN <span class="quoted">"→I"</span><span class="main">)</span>
        <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">q</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> 1<span class="main"><span class="main">[</span></span><span class="operator">unvarify</span> F<span class="main"><span class="main">,</span></span> <span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">«</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">p</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
             <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"rule=I:1"</span> <span class="quoted">"prop-prop2:2"</span><span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"2"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> lem1 <span class="quoted">"→E"</span><span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃!</span><span class="bound">x</span> <span class="main">(</span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span><span class="bound">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"A-objects!"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"thm-null-trivial:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span> <span class="keyword1">NullSituation(</span><span class="bound">x</span><span class="main">)</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"A-Exists:2"</span> <span class="quoted">"RA[2]"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"thm-null-trivial:1"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"thm-null-trivial:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span> <span class="keyword1">TrivialSituation(</span><span class="bound">x</span><span class="main">)</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"A-Exists:2"</span> <span class="quoted">"RA[2]"</span> <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"thm-null-trivial:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">AOT_define</span></span> TheNullSituation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹κ<span class="hidden">⇩</span><sub>s</sub>›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>∅</sub></span></span>›</span><span class="main">)</span>
  <span class="quoted">"df-the-null-sit:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>∅</sub></span> <span class="keyword1">=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span> <span class="keyword1">NullSituation(</span><span class="bound">x</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> TheTrivialSituation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹κ<span class="hidden">⇩</span><sub>s</sub>›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span></span>›</span><span class="main">)</span>
  <span class="quoted">"df-the-null-sit:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span> <span class="keyword1">=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span> <span class="keyword1">TrivialSituation(</span><span class="bound">x</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"null-triv-sc:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">NullSituation(</span><span class="free">x</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="keyword1">NullSituation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-null-trivial:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"conventions:5"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">◇</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"BF◇"</span> <span class="quoted">"→E"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"lem2:2"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> s<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> 0<span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 1 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">NullSituation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">NullSituation(</span><span class="free">x</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-null-trivial:1"</span> <span class="quoted">"≡Df"</span> 2<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"null-triv-sc:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TrivialSituation(</span><span class="free">x</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="keyword1">TrivialSituation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-null-trivial:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span>  0 <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"lem2:1"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">□</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> GEN<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> BF<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> 1 <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">TrivialSituation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">TrivialSituation(</span><span class="free">x</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-null-trivial:2"</span> <span class="quoted">"≡Df"</span> 2<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"null-triv-sc:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">NullSituation(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>∅</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-the-null-sit:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> <span class="quoted">"thm-null-trivial:3"</span>
                   <span class="quoted">"rule=I:1"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"thm-null-trivial:3"</span><span class="main"><span class="main">]</span></span>
                   <span class="quoted">"!box-desc:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"thm-null-trivial:1"</span><span class="main"><span class="main">,</span></span>
                                 <span class="operator">OF</span> <span class="quoted">"∀I"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"null-triv-sc:1"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"null-triv-sc:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TrivialSituation(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-the-null-sit:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> <span class="quoted">"thm-null-trivial:4"</span>
                   <span class="quoted">"rule=I:1"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"thm-null-trivial:4"</span><span class="main"><span class="main">]</span></span>
                   <span class="quoted">"!box-desc:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"thm-null-trivial:2"</span><span class="main"><span class="main">,</span></span>
                                 <span class="operator">OF</span> <span class="quoted">"∀I"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"null-triv-sc:2"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"null-triv-facts:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">NullSituation(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">Null(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> <span class="quoted">"df-null-uni:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"df-null-trivial:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span>
            <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"df-null-uni:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"df-null-trivial:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span> <span class="main">→</span> <span class="main">∃</span><span class="bound">p</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span>
    <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"prop-prop1"</span> <span class="quoted">"→E"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">F</span> <span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> situations<span class="main"><span class="main"><span class="main">[</span></span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main"><span class="main">]</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">F</span> <span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">F</span></span> <span class="keyword2"><span class="keyword">where</span></span> F_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"rule=E"</span> F_prop<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">F</span> <span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main">)</span>
    <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"existential:2[const_var]"</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span> 
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"prop-enc"</span> <span class="quoted">"true-in-s"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">F</span> <span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">F</span> <span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">F</span> <span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"null-triv-facts:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>∅</sub></span> <span class="main">=</span> <span class="keyword1">a<span class="hidden">⇩</span><sub>∅</sub></span>›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"df-the-null-sit:1"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">fact</span> <span class="quoted">"thm-null-trivial:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"df-null-uni-terms:1"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">fact</span> <span class="quoted">"null-uni-uniq:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"equiv-desc-eq:3"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"&amp;I"</span><span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">fact</span> <span class="quoted">"thm-null-trivial:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> RN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"null-triv-facts:1"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"null-triv-facts:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span> <span class="main">≠</span> <span class="keyword1">a<span class="hidden">⇩</span><sub>V</sub></span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"=-infix"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Universal(</span><span class="keyword1">a<span class="hidden">⇩</span><sub>V</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"null-uni-facts:4"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">a<span class="hidden">⇩</span><sub>V</sub></span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"df-null-uni:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"cqt:5:a"</span> <span class="quoted">"vdash-properties:10"</span> <span class="quoted">"vdash-properties:1[2]"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"df-null-trivial:2"</span> <span class="quoted">"null-triv-sc:4"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> situations<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="keyword1">A!</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"oa-exist:2"</span><span class="main">]</span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="keyword1">A!</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="keyword1">Propositional(</span><span class="keyword1">A!</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"prop-in-f:4:d"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span> <span class="main">=</span> <span class="keyword1">a<span class="hidden">⇩</span><sub>V</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span> <span class="main">=</span> <span class="keyword1">a<span class="hidden">⇩</span><sub>V</sub></span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"rule=E"</span> id_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">[</span><span class="keyword1">A!</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 1 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">ConditionOnPropositionalProperties</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">&lt;</span>κ<span class="main">&gt;</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted">"cond-prop"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">ConditionOnPropositionalProperties</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">]</span>›</span></span>

<span class="keyword1"><span class="command">syntax</span></span> ConditionOnPropositionalProperties <span class="main">::</span> <span class="quoted"><span class="quoted">‹id_position <span class="main">⇒</span> AOT_prop›</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">CONDITION'_ON'_PROPOSITIONAL'_PROPERTIES'(</span>_<span class="keyword1">')</span>"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"cond-prop[E]"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms<span class="main">[</span><span class="operator">unfolded</span> <span class="quoted">"cond-prop"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"cond-prop[I]"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main"><span class="hidden">❙</span><b>⊢</b><span class="hidden">⇩</span><sub>□</sub></span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="quoted">"cond-prop"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"pre-comp-sit"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span> situations<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> situations<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">x</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">φ</span><span class="main">{</span><span class="skolem">F</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"∀E"</span> <span class="quoted">"≡E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"cond-prop[E]"</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="quoted">"∀E"</span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"comp-sit:1"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">Situation(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="bound">κ</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">κ</span><span class="main">.</span> <span class="main">«</span><span class="keyword1">A!</span><span class="bound">κ</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">κ</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"pre-comp-sit"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main">]</span></span> <span class="quoted">"A-objects"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> φ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="free">φ</span></span><span class="main"><span class="main">,</span></span> <span class="operator">axiom_inst</span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"comp-sit:2"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃!</span><span class="bound"><span class="bound">s</span></span> <span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">Situation(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="bound">κ</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">κ</span><span class="main">.</span> <span class="main">«</span><span class="keyword1">A!</span><span class="bound">κ</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">κ</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> assms <span class="quoted">"pre-comp-sit"</span>  <span class="quoted">"pre-comp-sit"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main">]</span></span> <span class="quoted">"A-objects!"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"can-sit-desc:1"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"comp-sit:2"</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span> <span class="quoted">"A-Exists:2"</span> <span class="quoted">"RA[2]"</span> <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"can-sit-desc:2"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="keyword1">A!</span><span class="bound">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"equiv-desc-eq:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"can-sit-desc:1"</span><span class="main"><span class="main"><span class="main">[</span></span></span><span class="operator">OF</span> assms<span class="main"><span class="main"><span class="main">]</span></span></span><span class="main"><span class="main">]</span></span>
                   <span class="quoted">"RA[2]"</span> GEN <span class="quoted">"pre-comp-sit"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"strict-sit"</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">RIGID_CONDITION(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">CONDITION_ON_PROPOSITIONAL_PROPERTIES(</span><span class="free">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">y</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="free">y</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"can-sit-desc:2"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">,</span></span> <span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main">]</span>
        <span class="quoted">"box-phi-a:2"</span><span class="main">[</span><span class="operator">OF</span> assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"→E"</span> <span class="quoted">"→I"</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>

<span class="comment1">(* TODO: exercise (479) sit-lit *)</span>

<span class="keyword1"><span class="command">AOT_define</span></span> actual <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Actual'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free"><span class="free">s</span></span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"act-and-not-pos"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">Actual(</span><span class="bound">s</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">¬</span><span class="keyword1">Actual(</span><span class="bound">s</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> q<span class="hidden">⇩</span><sub>1</sub>_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"instantiation"</span> <span class="quoted">"cont-tf:1"</span> <span class="quoted">"cont-tf-thm:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"comp-sit:1"</span> <span class="quoted">"cond-prop[I]"</span> GEN <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">F</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"existential:2[const_var]"</span> <span class="quoted">"prop-prop1"</span> that <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> s_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"Situation.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span> GEN <span class="quoted">"→I"</span> s_prop Situation.ψ<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"prop-enc"</span> <span class="quoted">"true-in-s"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> s_prop<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">,</span></span> <span class="operator">rotated</span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">=</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"p-identity-thm2:3"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> q<span class="hidden">⇩</span><sub>1</sub>_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"rule=E"</span> id_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"KBasic:12"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Actual(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡Df"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"conventions:3"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> RM<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"RM:1"</span> <span class="quoted">"Conjunction Simplification"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">□</span><span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"CBF"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⊨</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">→</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⊨</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">→</span> <span class="main">□</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"→E"</span> <span class="quoted">"qml:1"</span> <span class="quoted">"vdash-properties:1[2]"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">⊨</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> s_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> lem1<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> Situation.ψ<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span>
            <span class="quoted">"rule=I:1"</span> <span class="quoted">"prop-prop2:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"lem2:1"</span> <span class="quoted">"true-in-s"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"KBasic:12"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> q<span class="hidden">⇩</span><sub>1</sub>_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="keyword1">Actual(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">s<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> s_prop <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"Situation.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"actual-s:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="keyword1">Actual(</span><span class="bound">s</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="keyword1">Actual(</span><span class="skolem">s</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">s</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"act-and-not-pos"</span> <span class="quoted">"Situation.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">s</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"Situation.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"actual-s:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">¬</span><span class="keyword1">Actual(</span><span class="bound">s</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">»</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"&amp;I"</span><span class="main">)</span><span class="main"><span class="keyword3">?</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"df-null-trivial:2"</span> <span class="quoted">"null-triv-sc:4"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Actual(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> notp<span class="hidden">⇩</span><sub>1</sub><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"existential:1"</span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"non-contradiction"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"null-triv-sc:4"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"df-null-trivial:2"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> notp<span class="hidden">⇩</span><sub>1</sub> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>s</b><span class="hidden">⇩</span><sub>V</sub></span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"df-the-null-sit:2"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"thm-null-trivial:4"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"actual-s:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span><span class="main">∀</span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="keyword1">Actual(</span><span class="bound">s</span><span class="main">)</span> <span class="main">→</span> <span class="main">¬</span><span class="bound">s</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> notp<span class="hidden">⇩</span><sub>1</sub><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"existential:1"</span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"non-contradiction"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">Actual(</span><span class="bound">s</span><span class="main">)</span> <span class="main">→</span> <span class="main">¬</span><span class="main">(</span><span class="bound">s</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Situation.GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">s</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">s</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> notp<span class="hidden">⇩</span><sub>1</sub> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> comp<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊴</span> <span class="bound">s</span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="bound">s</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound"><span class="bound">s'''</span></span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊴</span> <span class="bound">s'''</span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="bound">s'''</span> <span class="main">→</span> <span class="bound">s</span> <span class="main">⊴</span> <span class="bound">s'''</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> cond_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹ConditionOnPropositionalProperties <span class="main">(</span><span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="free">s'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span> <span class="main">∨</span> <span class="free">s''</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"cond-prop[I]"</span> GEN <span class="quoted">"oth-class-taut:8:c"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
      <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">s'</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Situation.restricted_var_condition<span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"situations"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
      <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">s''</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Situation.restricted_var_condition<span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span> <span class="main">→</span> <span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"situations"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> θ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">s'</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">∨</span> <span class="free">s''</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"comp-sit:1"</span><span class="main">[</span><span class="operator">OF</span> cond_prop<span class="main">]</span> <span class="quoted">"Situation.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊴</span> <span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound"><span class="bound">s'''</span></span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊴</span> <span class="bound">s'''</span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="bound">s'''</span> <span class="main">→</span> <span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">⊴</span> <span class="bound">s'''</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"true-in-s"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"prop-enc"</span><span class="main"><span class="main">]</span></span>
                     <span class="quoted">"Situation.GEN"</span> <span class="quoted">"GEN"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> <span class="tfree">'a</span><span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted">𝗈</span><span class="main"><span class="main">]</span></span> <span class="quoted">"→I"</span> <span class="quoted">"sit-part-whole"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span>
                     Situation.restricted_var_condition <span class="quoted">"cqt:2[const_var]"</span><span class="main"><span class="main">[</span></span><span class="operator">axiom_inst</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"prop-enc"</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"true-in-s"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> θ<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span><span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"prop-enc"</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"true-in-s"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> θ<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span><span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">s</span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊴</span> <span class="skolem">s</span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="skolem">s</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>3</sub></span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"prop-enc"</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"true-in-s"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">∨</span> <span class="free">s''</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> θ<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span><span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"prop-enc"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"true-in-s"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span>
                         Situation.ψ <span class="quoted">"cqt:2[const_var]"</span><span class="main"><span class="main">[</span></span><span class="operator">axiom_inst</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="skolem">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"true-in-s"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"prop-enc"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"prop-enc"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"true-in-s"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span>
                         Situation.ψ <span class="quoted">"cqt:2[const_var]"</span><span class="main"><span class="main">[</span></span><span class="operator">axiom_inst</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="skolem">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-part-whole"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"true-in-s"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"prop-enc"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span><span class="main">[λ</span><span class="bound">x</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"Situation.∃I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"act-sit:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="free">s</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="free">p</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> that <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> p<span class="main">:</span> <span class="quoted"><span class="free">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="free">s</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"β←C"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> p <span class="quoted">"ex:1:a"</span> <span class="quoted">"rule-ui:2[const_var]"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"act-sit:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="keyword1">Actual(</span><span class="free">s'</span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="free">s''</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">∃</span><span class="bound">x</span> <span class="main">(</span><span class="keyword1">Actual(</span><span class="bound">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="free">s'</span> <span class="main">⊴</span> <span class="bound">x</span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="bound">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> act_s'<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s'</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> act_s''<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s''</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted">"cond-prop"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹ConditionOnPropositionalProperties <span class="main">(</span><span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">Π</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"cond-prop[I]"</span>  <span class="quoted">"∀I"</span> <span class="quoted">"→I"</span> <span class="quoted">"prop-prop1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">β</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">β</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">β</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="skolem">β</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">have</span></span> rigid<span class="main">:</span> <span class="quoted"><span class="quoted">‹rigid_condition <span class="main">(</span><span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">Π</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"strict-can:1[I]"</span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> p<span class="hidden">⇩</span><sub>1</sub>_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"id-nec:2"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∨E"</span><span class="main"><span class="keyword3">;</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"KBasic:15"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">?</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> p<span class="hidden">⇩</span><sub>1</sub>_prop <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∨</span> <span class="main">□</span><span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"lem2:1"</span> that <span class="quoted">"true-in-s"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∨</span> <span class="main">□</span><span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"lem2:1"</span> that <span class="quoted">"true-in-s"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">□</span><span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> Buridan<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>

  <span class="keyword1"><span class="command">AOT_have</span></span> desc_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"can-sit-desc:1"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"cond-prop"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> x<span class="hidden">⇩</span><sub>0</sub>_prop1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> <span class="quoted">"instantiation"</span> <span class="quoted">"rule=I:1"</span> desc_den <span class="quoted">"existential:1"</span> id_sym<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> x<span class="hidden">⇩</span><sub>0</sub>_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"actual-desc:3"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="quoted">"Act-Basic:2"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"possit-sit:4"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"strict-sit"</span><span class="main">[</span><span class="operator">OF</span> rigid<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"cond-prop"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> x<span class="hidden">⇩</span><sub>0</sub>_prop1<span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> x<span class="hidden">⇩</span><sub>0</sub>_sit<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">q</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> 1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">«</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span>
            <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"rule=E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span>
                <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"deduction-theorem"</span> id_sym <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"p-identity-thm2:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"rule=I:1"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"prop-prop2:2"</span><span class="main">)</span> 
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">s'</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="bound">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> 1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"ex:1:a"</span> <span class="quoted">"prop-enc"</span> <span class="quoted">"rule-ui:2[const_var]"</span> x<span class="hidden">⇩</span><sub>0</sub>_sit <span class="quoted">"true-in-s"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>

  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="free">s'</span> <span class="main">⊴</span> <span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"∃I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> x<span class="hidden">⇩</span><sub>0</sub>_sit GEN <span class="quoted">"sit-part-whole"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> 2 <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> act_s' act_s'' actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s'</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> 2<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> that<span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s''</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> 2<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> that<span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">s'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> act_s'<span class="main">[</span><span class="operator">THEN</span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">s''</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> act_s''<span class="main">[</span><span class="operator">THEN</span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">(</span><span class="keyword1">Actual(</span><span class="bound">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="free">s'</span> <span class="main">⊴</span> <span class="bound">x</span> <span class="main">&amp;</span> <span class="free">s''</span> <span class="main">⊴</span> <span class="bound">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> Consistent <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Consistent'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  cons<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Consistent(</span><span class="free"><span class="free">s</span></span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-cons"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span> <span class="main">→</span> <span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> cons<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span> Situation.ψ <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">¬</span><span class="skolem">p</span><span class="main">»</span>›</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
            0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">p</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span> 
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(* TODO: PLM: recheck use of substitution with restricted variables *)</span>
<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"cons-rigid:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span> <span class="main">≡</span> <span class="main">□</span><span class="main">¬</span><span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> cons<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> p_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"lem2:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> p_prop <span class="quoted">"T◇"</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span>
      <span class="quoted">"modus-tollens:1"</span> <span class="quoted">"raa-cor:3"</span> <span class="quoted">"lem2:3"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">]</span>
      <span class="quoted">"log-prop-prop:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∃</span><span class="bound">p</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Buridan <span class="quoted">"vdash-properties:10"</span><span class="main">)</span> 
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">¬</span><span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"qml:1"</span><span class="main"><span class="main">[</span></span><span class="operator">axiom_inst</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">rotated</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> RN<span class="main">)</span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>2<span class="main">)</span> cons <span class="quoted">"deduction-theorem"</span> <span class="quoted">"raa-cor:3"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">¬</span><span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"qml:2"</span><span class="main">[</span><span class="operator">axiom_inst</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"cons-rigid:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command">using</span></span> cons <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"Commutativity of ≡"</span> <span class="quoted">"≡Df"</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> 0<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"RM◇"</span> <span class="quoted">"Conjunction Simplification"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"Conjunction Simplification"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"modus-tollens:1"</span> <span class="quoted">"raa-cor:3"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"possit-sit:2"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 3<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> 2 <span class="keyword1"><span class="command">using</span></span> 1 <span class="quoted">"KBasic:11"</span> <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"conventions:5"</span> 2 <span class="quoted">"cons-rigid:1"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="quoted">"modus-tollens:1"</span> <span class="quoted">"raa-cor:3"</span> <span class="quoted">"≡E"</span><span class="main">(</span>4<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> 4<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"2"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"lem2:1"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> s<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 4 <span class="quoted">"lem2:1"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 2 <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">□</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"existential:1"</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Buridan <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> 3 <span class="quoted">"&amp;I"</span>  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Consistent(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"T◇"</span> that <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> possible <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Possible'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Possible(</span><span class="free"><span class="free">s</span></span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">◇</span><span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-pos:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span> <span class="main">→</span> <span class="keyword1">Possible(</span><span class="free">s</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> pos<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"&amp;I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> actual <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"T◇"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-pos:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">¬</span><span class="keyword1">Possible(</span><span class="free">s</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> a<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"T◇"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"lem2:3"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> a<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic2:1"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Buridan <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">¬</span><span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="bound">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">φ</span> <span class="main">.</span> <span class="main">«</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">φ</span> <span class="main">→</span> <span class="bound">φ</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">«</span><span class="main">¬</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">φ</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">φ</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"oth-class-taut:1:a"</span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">¬</span><span class="main">∀</span><span class="bound">q</span> <span class="main">¬</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">q</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">q</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"conventions:4"</span> <span class="quoted">"df-rules-formulas[3]"</span> <span class="quoted">"df-rules-formulas[4]"</span> <span class="quoted">"≡I"</span> 1<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">◇</span><span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="bound">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"conventions:5"</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Possible(</span><span class="free">s</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Possible(</span><span class="free">s</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">s</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> pos <span class="quoted">"≡Df"</span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">s</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="bound">q</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command">using</span></span> actual <span class="quoted">"≡Df"</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">presburger</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"0"</span> <span class="quoted">"KBasic2:3"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:3"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"pos-cons-sit:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Possible(</span><span class="free">s</span><span class="main">)</span> <span class="main">→</span> <span class="keyword1">Consistent(</span><span class="free">s</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"sit-cons"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"RM◇"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"cons-rigid:2"</span><span class="main"><span class="main"><span class="main">[</span></span></span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main"><span class="main">]</span></span></span><span class="main"><span class="main">]</span></span>
           <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> pos<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"pos-cons-sit:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">Consistent(</span><span class="bound">s</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="keyword1">Possible(</span><span class="bound">s</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"instantiation"</span> <span class="quoted">"cont-tf:1"</span> <span class="quoted">"cont-tf-thm:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted">"cond-prop"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹ConditionOnPropositionalProperties <span class="main">(</span><span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="bound">Π</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">»</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"cond-prop[I]"</span> GEN <span class="quoted">"→I"</span> <span class="quoted">"prop-prop1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span>
                     <span class="quoted">"∃I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">»</span>›</span></span><span class="main"><span class="main">,</span></span> <span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> rigid<span class="main">:</span> <span class="quoted"><span class="quoted">‹rigid_condition <span class="main">(</span><span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="bound">Π</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">»</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"strict-can:1[I]"</span> GEN <span class="quoted">"→I"</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"id-nec:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>

  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">s</span></span> <span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"ex:1:b"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"can-sit-desc:1"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"cond-prop"</span><span class="main">]</span>
          <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>    
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="quoted">"actual-desc:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"Act-Basic:2"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> s_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"possit-sit:4"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> s_enc_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"strict-sit"</span><span class="main">[</span><span class="operator">OF</span> rigid<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"cond-prop"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> x_prop<span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main">]</span> <span class="quoted">"rule=I:1"</span><span class="main">[</span><span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main">]</span> <span class="quoted">"≡E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> s_sit<span class="main">,</span> <span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:1"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> s_sit<span class="main">,</span> <span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span> <span class="main">→</span> <span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">x</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> RN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> nec_not_actual_s<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"qml:1"</span><span class="main">[</span><span class="operator">axiom_inst</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">&amp;</span> <span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">OF</span> s_sit<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"prop-prop2:2"</span> s_enc_prop<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;E"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> i<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"rule=E"</span> id_sym<span class="main">)</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span><span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"β←C"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> 0 <span class="quoted">"cqt:2[const_var]"</span><span class="main"><span class="main">[</span></span><span class="operator">axiom_inst</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">]</span><span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword1"><span class="command">using</span></span> i <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"β→C"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">]</span><span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"β←C"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> 0 <span class="quoted">"cqt:2[const_var]"</span><span class="main"><span class="main">[</span></span><span class="operator">axiom_inst</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span><span class="skolem">x</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword1"><span class="command">using</span></span> i<span class="main">[</span><span class="operator">symmetric</span><span class="main">]</span> <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"β→C"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"raa-cor:1"</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Possible(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Possible(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Actual(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> pos<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">◇</span><span class="keyword1">Actual(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> nec_not_actual_s
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"conventions:5"</span> <span class="quoted">"reductio-aa:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Actual(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="keyword1">Actual(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"&amp;I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> β<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">x</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"&amp;I"</span> 2 s_sit cons<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> 1<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-classical:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">∀</span><span class="bound">q</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">q</span> <span class="main">≡</span> <span class="main">¬</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">q</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">≡</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">q</span> <span class="main">≡</span> <span class="main">¬</span><span class="skolem">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">q</span> <span class="main">≡</span> <span class="main">¬</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-classical:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">∀</span><span class="bound">q</span><span class="main">∀</span><span class="bound">r</span><span class="main">(</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="bound">q</span> <span class="main">→</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">q</span> <span class="skolem">r</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> θ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">≡</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> ξ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">r</span> <span class="main">≡</span> <span class="skolem">r</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> ζ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q</span> <span class="main">→</span> <span class="skolem">r</span><span class="main">)</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="skolem">q</span> <span class="main">→</span> <span class="skolem">r</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q</span> <span class="main">→</span> <span class="skolem">r</span><span class="main">)</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="skolem">r</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q</span> <span class="main">→</span> <span class="skolem">r</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span>›</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> θ ξ ζ <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">q</span> <span class="main">→</span> <span class="skolem">r</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> θ ξ ζ <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span> 
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-classical:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> θ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> ξ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">α</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> ξ <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> θ <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">α</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span> <span class="keyword1"><span class="command">using</span></span> θ <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> GEN<span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> ξ <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-classical:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">□</span><span class="bound">q</span> <span class="main">→</span> <span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">q</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> θ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">≡</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> ξ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">q</span> <span class="main">≡</span> <span class="main">□</span><span class="skolem">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">q</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> ξ <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"qml:2"</span><span class="main">[</span><span class="operator">axiom_inst</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> θ <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"lem2:1"</span> <span class="quoted">"true-in-s"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-classical:5"</span><span class="main">:</span>
  <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">∃</span><span class="bound">q</span><span class="main">(</span><span class="main">□</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">q</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">□</span> <span class="bound">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"instantiation"</span> <span class="quoted">"cont-tf:1"</span> <span class="quoted">"cont-tf-thm:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> B<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"KBasic:11"</span> <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> asm<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> A <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"lem2:1"</span> <span class="quoted">"true-in-s"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="main">□</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> asm<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> B <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-classical:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> asm<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="skolem">r</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 1 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">r</span> <span class="main">(</span><span class="main">□</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">r</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">□</span><span class="bound">r</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"sit-classical:6"</span><span class="main">:</span>
  <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="bound">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted">"cond-prop"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹ConditionOnPropositionalProperties <span class="main">(</span><span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="bound">q</span> <span class="main">&amp;</span> <span class="bound">Π</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"cond-prop[I]"</span> GEN <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">F</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="bound">q</span> <span class="main">&amp;</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">q</span> <span class="main">&amp;</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="skolem">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Propositional(</span><span class="main">[</span><span class="skolem">F</span><span class="main">]</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"prop-prop1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">s</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="bound">q</span> <span class="main">&amp;</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"comp-sit:1"</span><span class="main">[</span><span class="operator">OF</span> <span class="quoted">"cond-prop"</span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> s<span class="hidden">⇩</span><sub>0</sub>_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="bound">q</span> <span class="main">&amp;</span> <span class="bound">F</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"Situation.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> GEN <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="comment1">(* TODO: PLM: missing subscript in assumption and rest of proof (line below θ) *)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="bound">q</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> s<span class="hidden">⇩</span><sub>0</sub>_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span></span> <span class="keyword2"><span class="keyword">where</span></span> q<span class="hidden">⇩</span><sub>1</sub>_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">=</span> <span class="skolem">q<span class="hidden">⇩</span><sub>1</sub></span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"p-identity-thm2:3"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> q<span class="hidden">⇩</span><sub>1</sub>_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"rule=E"</span> id_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"rule=I:1"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="bound">q</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">y</span> <span class="bound">q</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> s<span class="hidden">⇩</span><sub>0</sub>_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> Situation.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">s</span></span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="bound">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"Situation.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> PossibleWorld <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">PossibleWorld'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  <span class="quoted">"world:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="keyword1">PossibleWorld(</span><span class="bound">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> s_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-classical:6"</span> <span class="quoted">"Situation.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> GEN <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> s_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> s_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"T◇"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> s_prop <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">s</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">]</span> Situation.ψ <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="keyword1">PossibleWorld(</span><span class="bound">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">κ</span><span class="main">)</span> <span class="main">→</span> <span class="free">κ</span><span class="main">↓</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">κ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">κ</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span><span class="free">κ</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> situations<span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">κ</span><span class="main">↓</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"russell-axiom[exe,1].ψ_denotes_asm"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-pw:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">□</span><span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"S5Basic:1"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡Df"</span> <span class="quoted">"world:1"</span> 0<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> that <span class="quoted">"qml:2"</span><span class="main">[</span><span class="operator">axiom_inst</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-pw:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-pw:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"RE◇"</span> <span class="quoted">"S5Basic:2"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted">"Commutativity of ≡"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-pw:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-pw:1"</span> <span class="quoted">"rigid-pw:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-pw:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"Act-Sub:3"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted">"nec-imp-act"</span> <span class="quoted">"rigid-pw:1"</span> <span class="quoted">"rigid-pw:2"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_register_rigid_restricted_type</span></span>
  PossibleWorld<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">κ</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="keyword1">PossibleWorld(</span><span class="bound">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:2"</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">κ</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">κ</span><span class="main">↓</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">κ</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:3"</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="skolem">α</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="skolem">α</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> RN <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"rigid-pw:1"</span><span class="main">)</span> 
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">AOT_register_variable_names</span></span>
  PossibleWorld<span class="main">:</span> w

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-pos"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Possible(</span><span class="free">w</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> pos<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">rotated</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">≡</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="free">w</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"possit-sit:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:16"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">Actual(</span><span class="free">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Actual(</span><span class="free">w</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">w</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> actual <span class="quoted">"≡Df"</span> 0<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-cons:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Consistent(</span><span class="free">w</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world-pos"</span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pos-cons-sit:1"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> pos<span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-cons:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">TrivialSituation(</span><span class="free">w</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">TrivialSituation(</span><span class="free">w</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">w</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"df-null-trivial:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"Buridan◇"</span> <span class="quoted">"T◇"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"lem2:3"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> s<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span>
              <span class="quoted">"universal-cor"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"Buridan◇"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"RM◇"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">◇</span><span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"KBasic2:1"</span> RN <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="main">(</span><span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:1"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:2"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-truth-at:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:3"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-truth-at:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:4"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-truth-at:5"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:5"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> Maximal <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Maximal'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  max<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="free"><span class="free">s</span></span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-max"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="free">w</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> max<span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span> PossibleWorld.ψ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main"><span class="main">[</span></span></span><span class="operator">OF</span> <span class="quoted">"world:1"</span><span class="main"><span class="main"><span class="main">]</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">q</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span><span class="main"><span class="keyword3">?</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">≡</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">q</span> <span class="main">≡</span> <span class="main">¬</span><span class="skolem">q</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">q</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">∨</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"KBasic2:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="skolem">q</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:2"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"world:1"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world=maxpos:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main"><span class="keyword3">;</span></span>
       <span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> max <span class="quoted">"≡Df"</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> sit_x<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> nec_sit_x<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"possit-sit:1"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="main">□</span><span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:1"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> sit_x<span class="main">,</span> <span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:15"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">□</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> GEN<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> BF<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">∨</span> <span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> nec_sit_x <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world=maxpos:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span> <span class="main">≡</span> <span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Possible(</span><span class="free">x</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"world-pos"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> w<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"world-max"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> w<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">frule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">drule</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> pos_x<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Possible(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst_rev</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Actual(</span><span class="free">x</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command">using</span></span> actual <span class="quoted">"≡Df"</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">presburger</span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>2<span class="main">)</span> pos pos_x <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic2:3"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:6"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> max_x<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> sit_x<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> max_x <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> max<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world=maxpos:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> max_x<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="main">(</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> RM GEN<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="free">x</span><span class="main">)</span>›</span></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">≡</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> 1<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
        <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">x</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> max<span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
                1 <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
        <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 1<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="skolem">p</span></span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:13"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span><span class="main">(</span><span class="free">x</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">[</span><span class="operator">OF</span> <span class="quoted">"world:1"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main">,</span> <span class="operator">OF</span> sit_x<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> <span class="quoted">"nec-impl-p:1"</span> <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹φ <span class="main"><span class="main">⇒</span></span> φ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">‹<span class="keyword1"><span class="keyword1">⇒</span></span>›</span> 26<span class="main">)</span>
  <span class="quoted">"nec-impl-p:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⇒</span> <span class="free">q</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">□</span><span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">AOT_define</span></span> <span class="quoted">"nec-impl-p:2"</span> <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹φ <span class="main"><span class="main">⇒</span></span> φ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">‹<span class="keyword1"><span class="keyword1">⇔</span></span>›</span> 21<span class="main">)</span>
  <span class="quoted">"nec-impl-p:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⇔</span> <span class="free">q</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">(</span><span class="free">p</span> <span class="main">⇒</span> <span class="free">q</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">q</span> <span class="main">⇒</span> <span class="free">p</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"nec-equiv-nec-im"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⇔</span> <span class="free">q</span> <span class="main">≡</span> <span class="main">□</span><span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⇔</span> <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">p</span> <span class="main">⇒</span> <span class="free">q</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">q</span> <span class="main">⇒</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"nec-impl-p:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">q</span> <span class="main">→</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"nec-impl-p:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:4"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">q</span> <span class="main">→</span> <span class="free">p</span><span class="main">)</span>›</span></span>  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"KBasic:4"</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">p</span> <span class="main">⇒</span> <span class="free">q</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">q</span> <span class="main">⇒</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"nec-impl-p:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">⇔</span> <span class="free">q</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"nec-impl-p:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">]</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(* TODO: PLM: discuss these; still not in PLM *)</span>
<span class="keyword1"><span class="command">AOT_theorem</span></span> world_closed_lem_1_a<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span> <span class="main">&amp;</span> <span class="free">ψ</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span> <span class="main">&amp;</span> <span class="free">ψ</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free">φ</span> <span class="main">&amp;</span> <span class="free">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">≡</span> <span class="free">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">ψ</span> <span class="main">≡</span> <span class="free">ψ</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span> <span class="main">&amp;</span> <span class="free">ψ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">ψ</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> world_closed_lem_1_b<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">φ</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">φ</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> world_closed_lem_1_c<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span> <span class="main">→</span> <span class="free">ψ</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span> <span class="main">→</span> <span class="free">ψ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">ψ</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-closed-lem:1[0]"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">q</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-closed-lem:1[1]"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> world_closed_lem_1_b<span class="keyword1"><span class="command">.</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-closed-lem:1[2]"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">&amp;</span> <span class="main">(</span><span class="main">(</span><span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="free">p<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> world_closed_lem_1_b world_closed_lem_1_a
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"→I"</span> <span class="quoted">"→E"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-closed-lem:1[3]"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">&amp;</span> <span class="main">(</span><span class="main">(</span><span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="free">p<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">&amp;</span> <span class="free">p<span class="hidden">⇩</span><sub>3</sub></span><span class="main">)</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> world_closed_lem_1_b world_closed_lem_1_a
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"→I"</span> <span class="quoted">"→E"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"world-closed-lem:1[4]"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">&amp;</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">p<span class="hidden">⇩</span><sub>4</sub></span> <span class="main">&amp;</span> <span class="main">(</span><span class="main">(</span><span class="free">p<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">&amp;</span> <span class="free">p<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">&amp;</span> <span class="free">p<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">&amp;</span> <span class="free">p<span class="hidden">⇩</span><sub>4</sub></span><span class="main">)</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">s</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> world_closed_lem_1_b world_closed_lem_1_a
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"→I"</span> <span class="quoted">"→E"</span><span class="main">)</span>

<span class="comment1">(* TODO: PLM: discuss further - postpone for now *)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"coherent:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span> <span class="main">≡</span> <span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 1 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">q</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world-cons:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> cons<span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">q</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">∃</span><span class="bound">q</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="bound">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world-max"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> max<span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"coherent:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"act-world:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">s</span></span> <span class="keyword2"><span class="keyword">where</span></span> s_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-classical:6"</span> <span class="quoted">"Situation.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"T◇"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">s</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">]</span> Situation.ψ <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">s</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> s_prop <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"act-world:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃!</span><span class="bound"><span class="bound">w</span></span> <span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"act-world:1"</span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> sit_s<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"uniqueness:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"∃I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;I"</span> GEN <span class="quoted">"→I"</span>
                      PossibleWorld.ψ actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> sit_s <span class="quoted">"sit-identity"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> s<span class="main"><span class="main">,</span></span> <span class="operator">unconstrain</span> s'<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> <span class="quoted">"≡I"</span>
                      w_prop<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>1<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ<span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">w</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sit_s<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">y</span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> w_asm<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">y</span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="skolem">y</span><span class="main">)</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> w_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">y</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">y</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">y</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> w<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> w_asm<span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> w_asm<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
              <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> p <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">y</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">y</span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="skolem">y</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="skolem"><span class="skolem">y</span></span>
      <span class="keyword1"><span class="command">using</span></span> that<span class="main">(</span>2<span class="main">)</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> actual<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span>
                  <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> that<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span>
            w_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">y</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">y</span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="skolem">y</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">y</span></span>
      <span class="keyword1"><span class="command">using</span></span> that<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">w</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> sit_s <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span><span class="main">(</span><span class="operator">simp</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"pre-walpha"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">w</span></span> <span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"A-Exists:2"</span> <span class="quoted">"RA[2]"</span> <span class="quoted">"act-world:2"</span> <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">AOT_define</span></span> TheActualWorld <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹κ<span class="hidden">⇩</span><sub>s</sub>›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span></span>›</span><span class="main">)</span>
  <span class="quoted">"w-alpha"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="keyword1">=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">w</span></span> <span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_act_theorem</span></span> <span class="quoted">"T-world:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">⊤</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> true_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">⊤</span><span class="main">↓</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"A-descriptions"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"the-true:1"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="main">⊤</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"rule=I:1"</span> <span class="quoted">"existential:1"</span> id_sym true_den<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="main">⊤</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"T-T-value:1"</span> <span class="quoted">"T-sit"</span><span class="main">[</span><span class="operator">unvarify</span> x<span class="main">,</span> <span class="operator">OF</span> true_den<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> x_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> x_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">AOT_have</span></span> w_alpha_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">w</span></span> <span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:1[zero]"</span> <span class="quoted">"w-alpha"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> w_alpha_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="keyword2"><span class="keyword">where</span></span> y_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">y</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"existential:1"</span> id_sym w_alpha_def <span class="quoted">"pre-walpha"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"y-in:2"</span><span class="main">[</span><span class="operator">unvarify</span> z<span class="main">,</span> <span class="operator">OF</span> w_alpha_den<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> w_alpha_def<span class="main">]</span><span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> y_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">y</span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="skolem">y</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> y_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> y_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">y</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> pos <span class="quoted">"world-pos"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> w<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>

  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"sit-identity"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> s<span class="main"><span class="main">,</span></span> <span class="operator">unconstrain</span> s'<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> y_sit<span class="main"><span class="main">,</span></span> <span class="operator">OF</span> x_sit<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> GEN <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"prop-enc"</span> <span class="quoted">"true-in-s"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⊤</span><span class="main">[λ</span><span class="bound">y</span> <span class="skolem">p</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> x_def<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⊤</span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="skolem">p</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"prop-enc"</span> true_den<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"q-True:3"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span> 
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">y</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">y</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">y</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> w<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> y_prop<span class="main">)</span> 
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="operator">rotated</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> y_prop<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> p <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">y</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> y_prop<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⊤</span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"q-True:3"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> x_def<span class="main"><span class="main">[</span></span><span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"true-in-s"</span> x_sit<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⊤</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> x_def<span class="main">]</span> <span class="quoted">"rule=E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> y_def<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> id_sym<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_act_theorem</span></span> <span class="quoted">"T-world:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span> <span class="main">(</span><span class="keyword1">ExtensionOf(</span><span class="bound">x</span><span class="main">,</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"rule=E"</span> <span class="quoted">"T-world:1"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"ext-p-tv:3"</span> id_sym <span class="quoted">"≡I"</span>
            <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"q-True:1"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_act_theorem</span></span> <span class="quoted">"truth-at-alpha"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"vdash-properties:10"</span> <span class="quoted">"w-alpha"</span> <span class="quoted">"y-in:3"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> sit_w_alpha<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"world:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> w_alpha_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">≡</span> <span class="main">⊤</span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"q-True:3"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⊤</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"T-world:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="keyword1"><span class="hidden">❙</span><b>Σ</b></span> <span class="free">p</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> lem1<span class="main">[</span><span class="operator">unvarify</span> x<span class="main">,</span> <span class="operator">OF</span> w_alpha_den<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> sit_w_alpha<span class="main">]</span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡S"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"Commutativity of ≡"</span> <span class="quoted">"≡Df"</span> sit_w_alpha <span class="quoted">"true-in-s"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"alpha-world:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">w</span></span> <span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:1[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> walpha_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"t=t-proper:1"</span> <span class="quoted">"vdash-properties:6"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"actual-desc:2"</span><span class="main"><span class="main">[</span></span><span class="operator">unvarify</span> x<span class="main"><span class="main">,</span></span> <span class="operator">OF</span> walpha_den<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">fact</span> 0<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="keyword1">PossibleWorld(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"Act-Basic:2"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-pw:4"</span><span class="main">[</span><span class="operator">unvarify</span> x<span class="main">,</span> <span class="operator">OF</span> walpha_den<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"alpha-world:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">x</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"rule=I:1"</span> <span class="quoted">"existential:1"</span> id_sym<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"alpha-world:1"</span> <span class="quoted">"rule=E"</span> id_sym <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="skolem">x</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"world-max"</span><span class="main"><span class="main">[</span></span><span class="operator">unconstrain</span> w<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span> 
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Maximal(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> x_def <span class="quoted">"rule=E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"t-at-alpha-strict"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound"><span class="bound">w</span></span> <span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:1[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> walpha_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"t=t-proper:1"</span> <span class="quoted">"vdash-properties:6"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Actual(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"actual-desc:2"</span><span class="main"><span class="main">[</span></span><span class="operator">unvarify</span> x<span class="main"><span class="main">,</span></span> <span class="operator">OF</span> walpha_den<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">fact</span> 0<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> walpha_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"alpha-world:2"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> max<span class="main">)</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword1"><span class="command">AOT_have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">≡</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:4"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> θ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> 2<span class="main">[</span><span class="operator">unvarify</span> x<span class="main">,</span> <span class="operator">OF</span> walpha_den<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> walpha_sit<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
    <span class="keyword1"><span class="command">AOT_have</span></span> 3<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="keyword1">Actual(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"1"</span> <span class="quoted">"Act-Basic:2"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">q</span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="bound">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst_rev</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Actual(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">q</span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="bound">q</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="keyword1"><span class="command">using</span></span> actual <span class="quoted">"≡Df"</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">fact</span> 3<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">∀</span><span class="bound">q</span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="bound">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"Act-Basic:2"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">q</span> <span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">→</span> <span class="bound">q</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"logic-actual-nec:3"</span><span class="main">[</span><span class="operator">axiom_inst</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">→</span> <span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"act-cond"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> θ <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> walpha_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"alpha-world:2"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> max <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> 2<span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> actp<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">p</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"alpha-world:2"</span><span class="main">[</span><span class="operator">THEN</span> max<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="main">¬</span><span class="free">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> 2<span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"¬¬I"</span> <span class="quoted">"Act-Sub:1"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> actp <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_act_theorem</span></span> <span class="quoted">"not-act"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">≠</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">→</span> <span class="main">¬</span><span class="keyword1">Actual(</span><span class="free">w</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">≠</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="free">w</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"=-infix"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> walpha_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> walpha_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"alpha-world:2"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> max <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> act_w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">w</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> w_sit<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> actual <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> sid<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">x'</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">w</span> <span class="main">=</span> <span class="skolem">x'</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="skolem">x'</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x'</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sit-identity"</span><span class="main">[</span><span class="operator">unconstrain</span> s'<span class="main">,</span> <span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> w_sit<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> GEN sid<span class="main"><span class="main">[</span></span><span class="operator">unvarify</span> x'<span class="main"><span class="main">,</span></span> <span class="operator">OF</span> walpha_den<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> walpha_sit<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main"><span class="main">(</span></span></span>2<span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main">]</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> act_w<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"RA[1]"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"t-at-alpha-strict"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"t-at-alpha-strict"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"logic-actual"</span><span class="main">[</span><span class="operator">act_axiom_inst</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> act_w<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> p <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">(</span><span class="free">w</span> <span class="main">=</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_act_theorem</span></span> <span class="quoted">"w-alpha-part"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span> <span class="main">≡</span> <span class="free">s</span> <span class="main">⊴</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> <span class="quoted">"sit-part-whole"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span> GEN <span class="quasi_keyword">dest</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span>  <span class="quoted">"sit-part-whole"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">s</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> actual <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> that <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"alpha-world:2"</span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> max <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"truth-at-alpha"</span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="free">s</span><span class="main">)</span> <span class="main">&amp;</span> <span class="keyword1">Situation(</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">s</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"truth-at-alpha"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">s</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">→</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="free">s</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main">,</span> <span class="operator">OF</span> 0<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_act_theorem</span></span> <span class="quoted">"act-world2:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹AOT_term_of_var <span class="free">p</span>›</span></span><span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"beta-C-meta"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main"><span class="main">,</span></span> <span class="operator">unvarify</span> ν<span class="hidden">⇩</span><sub>1</sub>ν<span class="hidden">⇩</span><sub>n</sub><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"Commutativity of ≡"</span> <span class="quoted">"truth-at-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">AOT_act_theorem</span></span> <span class="quoted">"act-world2:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">≡</span> <span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"beta-C-meta"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"prop-prop2:2"</span><span class="main"><span class="main">,</span></span> <span class="operator">unvarify</span> ν<span class="hidden">⇩</span><sub>1</sub>ν<span class="hidden">⇩</span><sub>n</sub><span class="main"><span class="main">,</span></span> <span class="operator">symmetric</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"pre-walpha"</span> <span class="quoted">"rule-id-def:2:b[zero]"</span> <span class="quoted">"w-alpha"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">y</span> <span class="free">p</span><span class="main">]</span><span class="keyword1"><span class="hidden">❙</span><b>w</b><span class="hidden">⇩</span><sub>α</sub></span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span> <span class="quoted">"truth-at-alpha"</span> <span class="quoted">"universal-cor"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span> <span class="main">→</span> <span class="main">◇</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">≡</span> <span class="bound">q</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"act-world:1"</span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">→</span> <span class="main">¬</span><span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">&amp;</span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡I"</span> <span class="quoted">"modus-tollens:2"</span><span class="main">)</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"0"</span> <span class="quoted">"cqt-further:4"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ <span class="quoted">"rule-ui:3"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> w_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> p <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">◇</span><span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.res-var-bound-reas[BF◇]"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Situation(</span><span class="skolem">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> pos <span class="quoted">"world-pos"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"lem2:2"</span><span class="main">[</span><span class="operator">unconstrain</span> s<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>  <span class="quoted">"≡E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">→</span> <span class="main">∀</span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="bound">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">≡</span> <span class="bound">q</span><span class="main">)</span> <span class="main">→</span> <span class="bound">s</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> Situation.GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">s</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="skolem">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">≡</span> <span class="bound">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">s</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">→</span> <span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">s</span></span><span class="main">(</span><span class="main">∀</span><span class="bound">q</span> <span class="main">(</span><span class="bound">s</span> <span class="main">⊨</span> <span class="bound">q</span> <span class="main">≡</span> <span class="bound">q</span><span class="main">)</span> <span class="main">→</span> <span class="bound">s</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund-lem:3"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> RM<span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:5"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">s</span></span> <span class="free">φ</span><span class="main">{</span><span class="bound">s</span><span class="main">}</span> <span class="main">→</span> <span class="main">∀</span><span class="bound"><span class="bound">s</span></span> <span class="main">□</span><span class="free">φ</span><span class="main">{</span><span class="bound">s</span><span class="main">}</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> Situation.GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">s</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">s</span></span> <span class="free">φ</span><span class="main">{</span><span class="bound">s</span><span class="main">}</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">s</span></span> <span class="main">□</span><span class="free">φ</span><span class="main">{</span><span class="bound">s</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"Situation.res-var-bound-reas[CBF]"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">φ</span><span class="main">{</span><span class="skolem">s</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"Situation.∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">text</span></span><span class="quoted"><span class="plain_text">‹Note: not explicit in PLM.›</span></span>
<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:5[world]"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="free">φ</span><span class="main">{</span><span class="bound">w</span><span class="main">}</span> <span class="main">→</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">□</span><span class="free">φ</span><span class="main">{</span><span class="bound">w</span><span class="main">}</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> PossibleWorld.GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="free">φ</span><span class="main">{</span><span class="bound">w</span><span class="main">}</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">□</span><span class="free">φ</span><span class="main">{</span><span class="bound">w</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.res-var-bound-reas[CBF]"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">φ</span><span class="main">{</span><span class="skolem">w</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:6"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">w</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:11"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∃</span><span class="bound">x</span> <span class="main">(</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">x</span><span class="main">)</span> <span class="main">→</span> <span class="bound">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">,</span></span> <span class="operator">rotated</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"cqt-further:2"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">x</span> <span class="main">◇</span><span class="main">(</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">x</span><span class="main">)</span> <span class="main">→</span> <span class="bound">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"BF◇"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">PossibleWorld(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted">"oth-class-taut:1:b"</span> <span class="quoted">"oth-class-taut:3:a"</span><span class="main">)</span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fact</span> x_prop<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="keyword1">PossibleWorld(</span><span class="skolem">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">¬</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic2:3"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="skolem">x</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"rigid-pw:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 2<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>  1<span class="main">[</span><span class="operator">unconstrain</span> w<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="quoted">"vdash-properties:6"</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unconstrain</span> w<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="main">(</span><span class="skolem">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 2<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"¬¬I"</span> <span class="quoted">"KBasic:12"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund-lem:7"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span><span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> RM<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"act-world:1"</span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> w_prop<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span>›</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"fund-lem:1"</span> <span class="quoted">"fund-lem:2"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> PossibleWorld.ψ <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"Buridan◇"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">p</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"conventions:3"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted">"oth-class-taut:3:a"</span> <span class="quoted">"≡Df"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">fact</span> 1<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"RM◇"</span> <span class="quoted">"Conjunction Simplification"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> w_prop <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span> <span class="main">≡</span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> PossibleWorld.GEN<span class="main">)</span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"coherent:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"PossibleWorld.∀E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">◇</span><span class="main">¬</span><span class="free">p</span> <span class="main">≡</span> <span class="main">¬</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"oth-class-taut:4:b"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">¬</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:12"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span> <span class="main">(</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"cqt-further:4"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">→</span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"oth-class-taut:1:a"</span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">presburger</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">fact</span> 0<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span> <span class="main">(</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">x</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">x</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst_rev</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">→</span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
         <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"oth-class-taut:1:a"</span> 0<span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"raa-cor:3"</span> <span class="quoted">"rule-ui:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">◇</span><span class="free">p</span> <span class="main">≡</span> <span class="main">¬</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> <span class="quoted">"contraposition:1[1]"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"fund:1"</span> <span class="quoted">"≡I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"fund:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span><span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">¬</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span><span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">→</span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="main">¬</span><span class="main">(</span><span class="keyword1">PossibleWorld(</span><span class="bound">κ</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">κ</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">»</span>›</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"oth-class-taut:1:a"</span> <span class="quoted">"conventions:4"</span> <span class="quoted">"≡Df"</span> RN <span class="quoted">"fund:2"</span> <span class="quoted">"rule-sub-lem:1:a"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"nec-dia-w:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">◇</span><span class="main">□</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"S5Basic:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">...</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"nec-dia-w:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="main">□</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> 4 <span class="quoted">"qml:2"</span><span class="main">[</span><span class="operator">axiom_inst</span><span class="main">]</span> <span class="quoted">"≡I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">...</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"nec-dia-w:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span> <span class="main">≡</span> <span class="main">◇</span><span class="main">◇</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"4◇"</span> <span class="quoted">"T◇"</span> <span class="quoted">"≡I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">...</span> <span class="main">≡</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"nec-dia-w:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">p</span> <span class="main">≡</span> <span class="main">□</span><span class="main">◇</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"S5Basic:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">...</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span><span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">&amp;</span> <span class="free">q</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">&amp;</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">&amp;</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span> <span class="main">≡</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">&amp;</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:3"</span> <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:3"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span> <span class="main">≡</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;I"</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">&amp;</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">&amp;</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">&amp;</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">&amp;</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"T◇"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"rigid-truth-at:3"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span> <span class="main">≡</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 1 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:15"</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"reductio-aa:1"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">→</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">→</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">∨</span> <span class="free">q</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">∨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">∨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span> <span class="main">≡</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">∨</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"KBasic2:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:15"</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:1"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span>
                  <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"reductio-aa:1"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">∨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">∨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">∨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">∨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span> <span class="main">≡</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>1<span class="main">)</span><span class="main">[</span><span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> <span class="quoted">"Commutativity of ≡"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"conventions:3"</span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"df-rules-formulas[4]"</span> <span class="quoted">"≡I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">fact</span> 1<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic2:3"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span>›</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst_rev</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">»</span>›</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"oth-class-taut:1:c"</span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">fact</span> 2<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">AOT_subst_rev</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">∨</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span><span class="main">)</span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"oth-class-taut:1:c"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">fact</span> 2<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">∨</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">∨</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"KBasic2:2"</span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">∨</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span> <span class="main">∨</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:11"</span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"∨I"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"¬¬I"</span> <span class="quoted">"T◇"</span> <span class="quoted">"∨E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"deduction-theorem"</span> <span class="quoted">"≡I"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"rigid-truth-at:3"</span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="free">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"rigid-pw:1"</span> PossibleWorld.ψ <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">w</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span> <span class="quoted">"→I"</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="free">w</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> RM<span class="main">)</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">→</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"sc-eq-box-box:5"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"&amp;I"</span><span class="main">]</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="skolem">φ</span> <span class="main">≡</span> <span class="skolem">ψ</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="skolem"><span class="skolem">φ</span></span> <span class="skolem"><span class="skolem">ψ</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">≡</span>  <span class="free">w</span> <span class="main">⊨</span> <span class="free">q</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">p</span> <span class="main">≡</span> <span class="free">q</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:5"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">α</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span> <span class="quoted">"rule-ui:3"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">α</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"Buridan◇"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span>
          <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">α</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">α</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> GEN<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> BF<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span> <span class="quoted">"rule-ui:3"</span> <span class="quoted">"universal-cor"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:6"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">α</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">α</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"instantiation"</span> <span class="quoted">"existential:2[const_var]"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span> 
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">α</span> <span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"BF◇"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">α</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">α</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">α</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∃</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Buridan <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
    <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span><span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span>›</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">α</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">α</span><span class="main">}</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"existential:2[const_var]"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"rule-ui:1"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"RM◇"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> pos<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"world:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> 0 <span class="quoted">"KBasic2:4"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:7"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">p</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">□</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"5◇"</span> <span class="quoted">"vdash-properties:6"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">□</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"S5Basic:6"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">AOT_subst_rev</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">□</span><span class="free">p</span><span class="main">»</span>›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">»</span>›</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"fund:2"</span> 1<span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">□</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund-lem:5[world]"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="quoted">"PossibleWorld.∀E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:8"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span><span class="main">∃</span><span class="bound">p</span><span class="main">(</span><span class="main">(</span><span class="main">□</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="bound">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> A<span class="main">:</span> <span class="quoted"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">¬</span><span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"instantiation"</span> <span class="quoted">"cont-tf:1"</span> <span class="quoted">"cont-tf-thm:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> B<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">□</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"KBasic:11"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> A <span class="quoted">"T◇"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"T◇"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"rigid-truth-at:3"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">r</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"nec-dia-w:1"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="skolem">r</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">□</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> B <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">r</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"&amp;I"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="main">□</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:9"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span><span class="main">)</span> <span class="main">→</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="free">p</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"raa-cor:1"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="free">p</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="main">◇</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"coherent:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="main">¬</span><span class="main">◇</span><span class="free">p</span> <span class="main">→</span> <span class="main">¬</span><span class="free">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"T◇"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"contraposition:1[1]"</span><span class="main">,</span> <span class="operator">THEN</span> RN<span class="main">]</span>
          <span class="quoted">"fund:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">,</span> <span class="operator">rotated</span><span class="main">,</span> <span class="operator">OF</span> PossibleWorld.ψ<span class="main">]</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"conj-dist-w:2"</span><span class="main">[</span><span class="operator">unvarify</span> p q<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="free">p</span> <span class="main">&amp;</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="free">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="free">p</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span> <span class="quoted">"Conjunction Simplification"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"Conjunction Simplification"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> <span class="quoted">"modus-tollens:1"</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"conj-dist-w:10"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span><span class="main">∃</span><span class="bound">p</span><span class="main">(</span><span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="bound">p</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"act-world:1"</span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">r</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">r</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"cont-tf-thm:2"</span> <span class="quoted">"cont-tf:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">r</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="skolem">r</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> w<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"coherent:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">◇</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> <span class="quoted">"rigid-truth-at:2"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="skolem">r</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">r</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="bound">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">◇</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"two-worlds-exist:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span><span class="main">(</span><span class="keyword1">ContingentlyTrue(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="main">¬</span><span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="keyword1">ContingentlyTrue(</span><span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">ContingentlyTrue(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"cont-tf:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">w</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> p<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"raa-cor:3"</span> <span class="quoted">"rule-ui:1"</span> <span class="quoted">"vdash-properties:10"</span> w<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:2"</span> w<span class="main">)</span> 
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"two-worlds-exist:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span><span class="main">(</span><span class="keyword1">ContingentlyFalse(</span><span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">→</span> <span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="main">¬</span><span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">p</span> <span class="keyword1">ContingentlyFalse(</span><span class="bound">p</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">ContingentlyFalse(</span><span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">◇</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span> <span class="quoted">"cont-tf:2"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">w</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> p<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">using</span></span> actual<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"&amp;E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"log-prop-prop:2"</span> <span class="quoted">"raa-cor:3"</span> <span class="quoted">"rule-ui:1"</span> <span class="quoted">"vdash-properties:10"</span> w<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> calculation <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"coherent:1"</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span> <span class="quoted">"reductio-aa:2"</span><span class="main">)</span> 
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;I"</span> w <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"two-worlds-exist:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span> <span class="main">¬</span><span class="keyword1">Actual(</span><span class="bound">w</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"cont-tf-thm:1"</span> <span class="quoted">"two-worlds-exist:1"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"two-worlds-exist:4"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w</span></span><span class="main">∃</span><span class="bound"><span class="bound">w'</span></span><span class="main">(</span><span class="bound">w</span> <span class="main">≠</span> <span class="bound">w'</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Actual(</span><span class="skolem">w</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"act-world:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"uniqueness:1"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>E"</span><span class="main"><span class="main">]</span></span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"cqt-further:5"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">]</span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="quoted">"&amp;E"</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w'</span></span> <span class="keyword2"><span class="keyword">where</span></span> w'<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="keyword1">Actual(</span><span class="skolem">w'</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"two-worlds-exist:3"</span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="skolem">w</span> <span class="main">=</span> <span class="skolem">w'</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"raa-cor:2"</span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">=</span> <span class="skolem">w'</span>›</span></span>
    <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">p</span> <span class="main">&amp;</span> <span class="main">¬</span><span class="skolem">p</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">p</span></span> <span class="keyword1"><span class="command">using</span></span> w w' <span class="quoted">"&amp;E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"rule=E"</span> <span class="quoted">"raa-cor:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">w</span> <span class="main">≠</span> <span class="skolem">w'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span> <span class="quoted">"=-infix"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound"><span class="bound">w'</span></span> <span class="skolem">w</span> <span class="main">≠</span> <span class="bound">w'</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"PossibleWorld.∃I"</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="comment1">(* TODO: more theorems *)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"w-rel:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span> <span class="main">→</span> <span class="main">[λ</span><span class="bound">x</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">[λ</span><span class="bound">x</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"exist-nec"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">[λ</span><span class="bound">x</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span> <span class="main">→</span> <span class="main">□</span><span class="main">∀</span><span class="bound">x</span><span class="main">∀</span><span class="bound">y</span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">x</span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">y</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">y</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> RM<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="skolem">y</span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x</span><span class="main">∀</span><span class="bound">y</span> <span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">x</span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">y</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">y</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span> <span class="quoted">"kirchner-thm-cor:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">x</span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">y</span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x</span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y</span><span class="main">}</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">x</span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">y</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x</span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y</span><span class="main">}</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x</span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y</span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x</span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y</span><span class="main">}</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">x</span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y</span><span class="main">}</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"conj-dist-w:4"</span><span class="main">[</span><span class="operator">unvarify</span> p q<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">x</span><span class="main">∀</span><span class="bound">y</span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">x</span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">y</span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">y</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"kirchner-thm:1"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"w-rel:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span> <span class="main">→</span> <span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"exist-nec"</span> <span class="quoted">"vdash-properties:10"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span> <span class="main">→</span> <span class="main">□</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">∀</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> RM<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> GEN<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">y<span class="hidden">⇩</span><sub>1</sub>y<span class="hidden">⇩</span><sub>n</sub></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">∀</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>y<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"&amp;E"</span> <span class="quoted">"kirchner-thm-cor:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span> <span class="main">→</span> <span class="main">□</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound"><span class="bound">w</span></span> <span class="main">(</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"fund:2"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"conj-dist-w:4"</span><span class="main">[</span><span class="operator">unvarify</span> p q<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">∀</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">(</span><span class="main">∀</span><span class="bound">F</span><span class="main">(</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span> <span class="main">→</span> <span class="main">(</span><span class="main">(</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span> <span class="main">≡</span> <span class="main">(</span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">y<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>y<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"kirchner-thm:2"</span><span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"w-rel:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"w-rel:2"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="quoted"><span class="operator">"cqt:2[lambda]"</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> WorldIndexedRelation <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹Π <span class="main"><span class="main">⇒</span></span> τ <span class="main"><span class="main">⇒</span></span> Π›</span></span></span> <span class="main">(</span><span class="quoted">‹_<span class="keyword1"><span class="keyword1">⇩</span></span>_›</span><span class="main">)</span>
  <span class="quoted">"w-index"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="main">⇩</span><span class="bound">w</span> <span class="keyword1">=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span>›</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> Rigid <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Rigid'(</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  <span class="quoted">"df-rigid-rel:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Rigid(</span><span class="free">F</span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="free">F</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">□</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> Rigidifies <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹τ <span class="main"><span class="main">⇒</span></span> τ <span class="main"><span class="main">⇒</span></span> φ›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">Rigidifies'(</span></span>_<span class="keyword1"><span class="keyword1">,</span></span>_<span class="keyword1"><span class="keyword1">')</span></span>›</span><span class="main">)</span>
  <span class="quoted">"df-rigid-rel:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Rigidifies(</span><span class="free">F</span><span class="main">,</span> <span class="free">G</span><span class="main">)</span> <span class="keyword1">≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="keyword1">Rigid(</span><span class="free">F</span><span class="main">)</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-der:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">]</span><span class="free">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="free">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"rule-id-def:2:b[2]"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">⇩</span><span class="bound">κ</span><span class="main">»</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> σ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">,</span></span> <span class="operator">simplified</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-index"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">fact</span> <span class="quoted">"w-rel:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"beta-C-meta"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">fact</span> <span class="quoted">"w-rel:3"</span><span class="main">)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-der:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Rigid(</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"df-rigid-rel:1"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span><span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">↓</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"rule-id-def:2:b[2]"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">⇩</span><span class="bound">κ</span><span class="main">»</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> σ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">,</span></span> <span class="operator">simplified</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-index"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">fact</span> <span class="quoted">"w-rel:3"</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> RN<span class="main"><span class="keyword3">;</span></span> <span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
    <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> assms<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">PossibleWorld(</span><span class="free">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> PossibleWorld.ψ<span class="keyword1"><span class="command">.</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> nec_pw_w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="keyword1">PossibleWorld(</span><span class="free">w</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"≡E"</span><span class="main">(</span>1<span class="main">)</span> <span class="quoted">"rigid-pw:1"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub>x<span class="hidden">⇩</span><sub>n</sub></span>
      <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rule-id-def:2:a[2]"</span><span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">⇩</span><span class="bound">κ</span><span class="main">»</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> σ<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main">,</span> <span class="operator">simplified</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"w-index"</span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"w-rel:3"</span><span class="main">]</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"β→C"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-truth-at:1"</span><span class="main">[</span><span class="operator">unvarify</span> p<span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">,</span> <span class="operator">THEN</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> RM<span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
        <span class="keyword1"><span class="command">AOT_modally_strict {</span></span>
          <span class="keyword3"><span class="command">AOT_assume</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
          <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"β←C"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">fact</span> <span class="quoted">"w-rel:3"</span><span class="main">)</span>
               <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> 1 <span class="quoted">"cqt:2[const_var]"</span> <span class="quoted">"vdash-properties:1[2]"</span><span class="main">)</span>
        <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"rule-id-def:2:b[2]"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">⇩</span><span class="bound">κ</span><span class="main">»</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> σ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">,</span></span> <span class="operator">simplified</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-index"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
           <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> 1 <span class="quoted">"w-rel:3"</span><span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="free">w</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-der:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">F</span> <span class="keyword1">Rigidifies(</span><span class="bound">F</span><span class="main">,</span> <span class="free">G</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">AOT_obtain</span></span> <span class="skolem"><span class="skolem">w</span></span> <span class="keyword2"><span class="keyword">where</span></span> w<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">p</span> <span class="main">(</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="bound">p</span> <span class="main">≡</span> <span class="bound">p</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"act-world:1"</span> <span class="quoted">"PossibleWorld.∃E"</span><span class="main">[</span><span class="operator">rotated</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">meson</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"∃I"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">»</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Rigidifies(</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">,</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub>I"</span><span class="main"><span class="main">[</span></span><span class="operator">OF</span> <span class="quoted">"df-rigid-rel:2"</span><span class="main"><span class="main">]</span></span> <span class="quoted">"&amp;I"</span> GEN<span class="main">)</span>
      <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Rigid(</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"rigid-der:2"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="comment1">(* TODO: PLM misses to apply to thereom in proof of A *)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub>x<span class="hidden">⇩</span><sub>n</sub></span>
      <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">rule</span> <span class="quoted">"≡I"</span><span class="main"><span class="keyword3">;</span></span> <span class="operator">rule</span> <span class="quoted">"→I"</span><span class="main">)</span>
        <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"rule-id-def:2:a[2]"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">⇩</span><span class="bound">κ</span><span class="main">»</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> σ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">,</span></span> <span class="operator">simplified</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-index"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-rel:3"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"rule-id-def:2:b[2]"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">⇩</span><span class="bound">κ</span><span class="main">»</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> σ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">,</span></span> <span class="operator">simplified</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-index"</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-rel:3"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≡</span> <span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"beta-C-meta"</span><span class="main"><span class="main">[</span></span><span class="operator">THEN</span> <span class="quoted">"→E"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
           <span class="main">(</span><span class="operator">fact</span> <span class="quoted">"w-rel:3"</span><span class="main">)</span>
      <span class="keyword1"><span class="command">also</span></span> <span class="keyword1"><span class="command">AOT_have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">…</span> <span class="main">≡</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> w<span class="main">[</span><span class="operator">THEN</span> <span class="quoted">"∀E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">,</span> <span class="operator">OF</span> <span class="quoted">"log-prop-prop:2"</span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">finally</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">≡</span> <span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span><span class="keyword1"><span class="command">.</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">G</span><span class="main">]</span><span class="main">⇩</span><span class="skolem">w</span><span class="main">↓</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> <span class="quoted">"rule-id-def:2:b[2]"</span><span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> τ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">⇩</span><span class="bound">κ</span><span class="main">»</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> σ<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="main">(</span><span class="bound">Π</span><span class="main">,</span> <span class="bound">κ</span><span class="main">)</span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>"</span></span><span class="main"><span class="main">,</span></span> <span class="operator">simplified</span><span class="main"><span class="main">,</span></span> <span class="operator">OF</span> <span class="quoted">"w-index"</span><span class="main"><span class="main">]</span></span><span class="main">)</span>
         <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> <span class="quoted">"w-rel:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-rel-thms:1"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span><span class="main">)</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">(</span><span class="main">◇</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> <span class="quoted">"≡I"</span> <span class="quoted">"→I"</span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x<span class="hidden">⇩</span><sub>1</sub>x<span class="hidden">⇩</span><sub>n</sub></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">□</span><span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"→E"</span> GEN RM <span class="quoted">"cqt-orig:3"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted">"sc-eq-box-box:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">AOT_show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"→E"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">AOT_assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">◇</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">◇</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub>x<span class="hidden">⇩</span><sub>n</sub></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"∀E"</span><span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem"><span class="skolem">x<span class="hidden">⇩</span><sub>1</sub>x<span class="hidden">⇩</span><sub>n</sub></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="quoted">"≡E"</span><span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> <span class="quoted">"sc-eq-box-box:1"</span><span class="main">)</span>
  <span class="keyword1"><span class="command">AOT_hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">□</span><span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> GEN<span class="main">)</span>
  <span class="keyword3"><span class="command">AOT_thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"BF"</span> <span class="quoted">"vdash-properties:10"</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-rel-thms:2"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">□</span><span class="main">(</span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">→</span> <span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span><span class="main">)</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">(</span><span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">∨</span> <span class="main">□</span><span class="main">¬</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">oops</span></span> <span class="comment1">(* TODO *)</span>

<span class="keyword1"><span class="command">AOT_theorem</span></span> <span class="quoted">"rigid-rel-thms:3"</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">Rigid(</span><span class="free">F</span><span class="main">)</span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...∀</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">□</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">∨</span> <span class="main">□</span><span class="main">¬</span><span class="main">[</span><span class="free">F</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>x<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">oops</span></span> <span class="comment1">(* TODO *)</span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword2"><span class="keyword">end</span></span>
<span class="comment1">(*&gt;*)</span>
</pre>
</body>

</html>