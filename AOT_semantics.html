<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory AOT_semantics</title>
</head>


<body>
<div class="head">
<h1>Theory AOT_semantics</h1>
</div>

<pre class="source"><span class="comment1">(*&lt;*)</span>
<span class="keyword1"><span class="command">theory</span></span> AOT_semantics
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="AOT_syntax.html">AOT_syntax</a>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="comment1">(*&gt;*)</span>

<span class="keyword1"><span class="command">section</span></span><span class="quoted"><span class="plain_text">‹Semantics›</span></span>

<span class="comment1">(* To enable meta syntax: *)</span>
<span class="comment1">(* interpretation AOT_meta_syntax. *)</span>
<span class="comment1">(* To disable meta syntax: *)</span>
<span class="keyword1"><span class="command">interpretation</span></span> AOT_no_meta_syntax<span class="keyword1"><span class="command">.</span></span>

<span class="comment1">(* To enable AOT syntax (takes precedence over meta syntax; can be done locally using "including" or "include"): *)</span>
<span class="keyword1"><span class="command">unbundle</span></span> AOT_syntax
<span class="comment1">(* To disable AOT syntax (restoring meta syntax or no syntax; can be done locally using "including" or "include"): *)</span>
<span class="comment1">(* unbundle AOT_no_syntax *)</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_denotes</span><span class="main">)</span>
  AOT_sem_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">=</span> AOT_model_denotes <span class="free">τ</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">τ</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> AOT_model_denotes <span class="bound">τ</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_var_induct<span class="main">[</span><span class="operator">induct</span> <span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword">type</span></span></span><span class="main"><span class="main"><span class="main"><span class="main">:</span></span></span></span> AOT_var<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_denoting_term_case<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">]</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="free">α</span><span class="main">}</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_denoting_term_case AOT_sem_denotes AOT_term_of_var<span class="main">)</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_imp</span><span class="main">)</span>
  AOT_sem_imp<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">→</span> <span class="free">ψ</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">φ</span> <span class="bound">ψ</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="main">(</span><span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">ψ</span><span class="main">]</span><span class="main">)</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_not</span><span class="main">)</span>
  AOT_sem_not<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">φ</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">¬</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="main">¬</span><span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">]</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_box</span><span class="main">)</span>
  AOT_sem_box<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">□</span><span class="free">φ</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">]</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_act</span><span class="main">)</span>
  AOT_sem_act<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">φ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">]</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_conj<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">&amp;</span> <span class="free">ψ</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"conventions:1"</span> AOT_model_equiv_def AOT_sem_imp AOT_sem_not <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_equiv<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">≡</span> <span class="free">ψ</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"conventions:3"</span> AOT_sem_conj AOT_model_equiv_def AOT_sem_imp <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_disj<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span> <span class="main">∨</span> <span class="free">ψ</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span> <span class="main">∨</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"conventions:2"</span> AOT_model_equiv_def AOT_sem_imp AOT_sem_not <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_dia<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">◇</span><span class="free">φ</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted">"conventions:5"</span> AOT_sem_box AOT_model_equiv_def AOT_sem_not <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_forall</span><span class="main">)</span>
  AOT_sem_forall<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">∀</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">op</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="bound">op</span> <span class="bound">τ</span><span class="main">»</span><span class="main">]</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_exists<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">∃</span><span class="bound">α</span> <span class="free">φ</span><span class="main">{</span><span class="bound">α</span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∃</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="bound">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> <span class="quoted">"conventions:4"</span><span class="main">[</span><span class="operator">unfolded</span> AOT_model_equiv_def<span class="main">,</span> <span class="operator">THEN</span> spec<span class="main">]</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_forall AOT_sem_not<span class="main">)</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_eq</span><span class="main">)</span>
  AOT_sem_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">τ</span> <span class="main">=</span> <span class="free">τ'</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">τ'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="free">τ</span> <span class="main">=</span> <span class="free">τ'</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">τ</span> <span class="bound">τ'</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">τ'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="bound">τ</span> <span class="main">=</span> <span class="bound">τ'</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp<span class="main">)</span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_desc</span><span class="main">)</span>
  AOT_sem_desc_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span><span class="main">↓</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∃!</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span>›</span></span>
  AOT_sem_desc_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span><span class="main">}</span><span class="main">]</span>›</span></span>
  AOT_sem_desc_unique<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="free">κ</span><span class="main">}</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span> <span class="main">=</span> <span class="free">κ</span><span class="main">]</span>›</span></span>
  AOT_sem_desc_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">⋀</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">«</span><span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="free">φ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">x</span><span class="main">(</span><span class="free">ψ</span><span class="main">{</span><span class="bound">x</span><span class="main">}</span><span class="main">)</span><span class="main">»</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">nondenoting</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">where</span></span> nondenoting<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="skolem">nondenoting</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_model_nondenoting_ex <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">desc</span></span> <span class="keyword2"><span class="keyword">where</span></span> desc_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">desc</span> <span class="main">=</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="keyword1">if</span> <span class="main">(</span><span class="main">∃!</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">then</span> <span class="main">(</span><span class="keyword1">THE</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">else</span> <span class="skolem">nondenoting</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">φ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> 𝗈›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> ex1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃!</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">κ</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_prop<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="skolem">κ</span><span class="main">}</span><span class="main">]</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">desc</span> <span class="skolem">φ</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">κ</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> desc_def <span class="keyword1"><span class="command">using</span></span> x_prop ex1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">desc</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="main">(</span><span class="skolem">desc</span> <span class="skolem">φ</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 1 <span class="main">=</span> this
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">φ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> 𝗈›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> nex1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∄!</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">desc</span> <span class="skolem">φ</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">nondenoting</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> desc_def AOT_sem_denotes<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">¬</span><span class="main">«</span><span class="skolem">desc</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes nondenoting AOT_sem_not<span class="main">)</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> desc_denotes_simp<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">desc</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∃!</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">φ</span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes desc_def nondenoting<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">∀</span><span class="bound">φ</span> <span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">desc</span> <span class="bound">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∃!</span><span class="bound">κ</span><span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">φ</span> <span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">desc</span> <span class="bound">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="main">«</span><span class="bound">φ</span> <span class="main">(</span><span class="skolem">desc</span> <span class="bound">φ</span><span class="main">)</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">φ</span> <span class="bound">w</span> <span class="bound">κ</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">desc</span> <span class="bound">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="bound">φ</span><span class="main">{</span><span class="bound">κ</span><span class="main">}</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">desc</span> <span class="bound">φ</span><span class="main">»</span> <span class="main">=</span> <span class="bound">κ</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">insert</span> 1<span class="main"><span class="keyword3">;</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> desc_denotes_simp AOT_sem_eq AOT_sem_denotes desc_def nondenoting<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">⋀</span> <span class="bound">x</span> <span class="main">.</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span>w<span class="hidden">⇩</span><sub>0</sub> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">ψ</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">desc</span> <span class="skolem">φ</span> <span class="main">=</span> <span class="skolem">desc</span> <span class="skolem">ψ</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">φ</span> <span class="skolem">ψ</span>
    <span class="keyword1"><span class="command">unfolding</span></span> desc_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> nondenoting<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">desc</span></span><span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">presburger</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_exe</span> <span class="quoted">AOT_lambda</span><span class="main">)</span>
  AOT_sem_exe<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="free">Π</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
  AOT_sem_lambda_eta<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span> <span class="main">=</span> <span class="free">Π</span><span class="main">]</span>"</span></span>
  AOT_sem_lambda_beta<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span>"</span></span>
  AOT_sem_lambda_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">}</span><span class="main">]</span><span class="main">)</span>›</span></span>
  AOT_sem_lambda_coex<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">w</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">ψ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span>"</span></span>
  AOT_sem_lambda_denoting<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">«</span>Abs_rel <span class="free">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">»</span> <span class="main">=</span> Abs_rel <span class="free">φ</span>›</span></span>
  AOT_sem_exe_denoting<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> AOT_exe <span class="free">Π</span> <span class="free">κs</span> <span class="main">=</span> Rep_rel <span class="free">Π</span> <span class="free">κs</span>›</span></span>
  AOT_sem_lambda_eq_prop_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">]</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">ψ</span><span class="main">]</span><span class="main">»</span> <span class="main">⟹</span> <span class="free">φ</span> <span class="main">=</span> <span class="free">ψ</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">x</span> <span class="main">::</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">.</span> <span class="main">¬</span>AOT_model_denotes <span class="bound">x</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹Abs_rel <span class="main">(</span><span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span><span class="main">.</span> True<span class="main">)</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">meson</span> AOT_model_denotes_rel.abs_eq AOT_model_nondenoting_ex AOT_model_proposition_choice_simp<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">nondenoting_rel</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span>›</span></span> <span class="keyword2"><span class="keyword">where</span></span> nondenoting_rel<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_denotes <span class="skolem">nondenoting_rel</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">exe</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span> <span class="main">⇒</span> <span class="tfree">'a</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span> exe_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">exe</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">Π</span> <span class="bound">κs</span> <span class="main">.</span> <span class="keyword1">if</span> AOT_model_denotes <span class="bound">Π</span> <span class="keyword1">then</span> Rep_rel <span class="bound">Π</span> <span class="bound">κs</span> <span class="keyword1">else</span> <span class="main">(</span><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> False<span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">lambda</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">⇒</span>𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">&gt;</span>›</span></span> <span class="keyword2"><span class="keyword">where</span></span> lambda_def<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">lambda</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="keyword1">if</span> AOT_model_denotes <span class="main">(</span>Abs_rel <span class="bound">φ</span><span class="main">)</span> <span class="keyword1">then</span> <span class="main">(</span>Abs_rel <span class="bound">φ</span><span class="main">)</span> <span class="keyword1">else</span>
    <span class="keyword1">if</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">κ</span> <span class="bound">κ'</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">(</span>AOT_model_denotes <span class="bound">κ</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">κ</span> <span class="bound">κ'</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="bound">φ</span> <span class="bound">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="bound">φ</span> <span class="bound">κ'</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">then</span>
      Abs_rel <span class="main">(</span>fix_special <span class="main">(</span><span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">if</span> AOT_model_denotes <span class="bound">x</span> <span class="keyword1">then</span> <span class="bound">φ</span> <span class="main">(</span><span class="keyword1">SOME</span> <span class="bound">y</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span> <span class="keyword1">else</span>  <span class="main">(</span><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> False<span class="main">)</span><span class="main">)</span><span class="main">)</span>
    <span class="keyword1">else</span> 
      <span class="skolem">nondenoting_rel</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> fix_special_denoting_simp<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span>
    <span class="quoted"><span class="quoted">‹fix_special <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="keyword1">if</span> AOT_model_denotes <span class="bound">x</span> <span class="keyword1">then</span> <span class="skolem">φ</span> <span class="bound">x</span> <span class="keyword1">else</span> <span class="skolem">ψ</span> <span class="bound">x</span><span class="main">)</span> <span class="skolem">κ</span> <span class="main">=</span> <span class="skolem">φ</span> <span class="skolem">κ</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span>
    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span> <span class="skolem">ψ</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> that fix_special_denoting<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> denoting_eps_cong<span class="main">[</span><span class="operator">cong</span><span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="main">(</span>Eps <span class="main">(</span>AOT_model_term_equiv <span class="skolem">κ</span><span class="main">)</span><span class="main">)</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">κ</span> <span class="bound">κ'</span><span class="main">.</span> AOT_model_denotes <span class="bound">κ</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">κ'</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="main">::</span> <span class="quoted">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">⇒</span>𝗈›</span></span>
    <span class="keyword1"><span class="command">using</span></span> that AOT_model_term_equiv_eps<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> exe_rep_rel<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="skolem">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_denotes_rel.rep_eq exe_def AOT_model_proposition_choice_simp<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">Π</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">lambda</span> <span class="main">(</span><span class="skolem">exe</span> <span class="skolem">Π</span><span class="main">)</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="skolem">Π</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π</span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Rep_rel_inverse lambda_def AOT_sem_denotes AOT_sem_eq AOT_model_denotes_rel_def Abs_rel_inverse exe_def<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> lambda_denotes_beta<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">κ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="main">(</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">)</span> <span class="skolem">κ</span> <span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">φ</span> <span class="skolem">κ</span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">unfolding</span></span> exe_def AOT_sem_denotes
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> lambda_def Abs_rel_inverse nondenoting_rel <span class="quasi_keyword">split</span><span class="main"><span class="main">:</span></span> if_split_asm<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> lambda_denotes_simp<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="bound">Π</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="bound">Π</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">}</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">φ</span> <span class="skolem">w</span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command"><span class="improper">hence</span></span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span> <span class="main">⟹</span> AOT_model_term_equiv <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="skolem">κ'</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span> <span class="main">⟹</span> AOT_model_term_equiv <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="skolem">κ'</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">κ</span> <span class="skolem">κ'</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.abs_eq lambda_def nondenoting_rel<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="bound">Π</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="bound">Π</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">}</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> AOT_sem_denotes lambda_denotes_beta<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="bound">Π</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">exe</span> <span class="bound">Π</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">}</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">w</span> <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">κ</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">κ'</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">κ'</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes<span class="main">)</span>
         <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_rel_equiv AOT_sem_denotes exe_rep_rel<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">w</span> <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">κ</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">κ'</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> AOT_model_term_equiv_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> lambda_def Abs_rel_inverse AOT_model_denotes_rel.abs_eq AOT_model_irregular_equiv
                     AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> AOT_model_term_equiv_regular fix_special_def
                     AOT_model_term_equiv_denotes AOT_model_proposition_choice_simp AOT_model_irregular_false
                     AOT_sem_denotes
               <span class="quasi_keyword">split</span><span class="main"><span class="main">:</span></span> if_split_asm
               <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_eqI<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">lambda</span> <span class="skolem">ψ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">lambda</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">w</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="skolem">ψ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">φ</span> <span class="skolem">ψ</span> <span class="skolem">w</span> <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">unfolding</span></span> lambda_denotes_simp <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span>Abs_rel <span class="skolem">φ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="skolem">lambda</span> <span class="skolem">φ</span> <span class="main">=</span> Abs_rel <span class="skolem">φ</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">φ</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes lambda_def<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="skolem">exe</span> <span class="skolem">Π</span> <span class="skolem">κs</span> <span class="main">=</span> Rep_rel <span class="skolem">Π</span> <span class="skolem">κs</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π</span> <span class="skolem">κs</span> <span class="skolem">w</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> exe_def AOT_sem_denotes<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">lambda</span> <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">lambda</span> <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="skolem">q</span><span class="main">)</span> <span class="main">⟹</span> <span class="skolem">p</span> <span class="main">=</span> <span class="skolem">q</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">p</span> <span class="skolem">q</span>
    <span class="keyword1"><span class="command">unfolding</span></span> lambda_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">split</span><span class="main"><span class="main">:</span></span> if_split_asm <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Abs_rel_inject fix_special_def<span class="main">)</span>
       <span class="main">(</span><span class="operator">meson</span> AOT_model_irregular_nondenoting AOT_model_denoting_ex<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">note</span></span> calculation <span class="main">=</span> calculation this
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">exe</span></span><span class="main"><span class="main">]</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">lambda</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">using</span></span> calculation <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">using</span></span> lambda_denotes_simp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_model_lambda_denotes<span class="main">:</span>
  <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span>AOT_lambda <span class="free">φ</span><span class="main">)</span> <span class="main">=</span> 
    <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">κ</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">κ'</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">φ</span> <span class="bound">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">φ</span> <span class="bound">κ'</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span>AOT_lambda <span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">∧</span>
        AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">∧</span>
        <span class="main">(</span><span class="main">∀</span><span class="bound">Π</span> <span class="bound">v</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">)</span> <span class="main">⟶</span>
        <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">}</span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="skolem">v</span>
    <span class="keyword1"><span class="command">using</span></span> AOT_sem_lambda_denotes<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span>
    <span class="keyword3"><span class="command">assume</span></span> d<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">∧</span> AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">∧</span> AOT_model_term_equiv <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">∀</span><span class="bound">Π</span> <span class="bound">w</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> AOT_model_term_equiv_rel_equiv
      <span class="keyword1"><span class="command">using</span></span> AOT_sem_exe_denoting
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_exe<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">}</span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> d 1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">κ</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">κ'</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">φ</span> <span class="bound">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">φ</span> <span class="bound">κ'</span><span class="main">»</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">.</span> AOT_model_denotes <span class="bound">κ</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">κ'</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">κ</span> <span class="bound">κ'</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">φ</span> <span class="bound">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">φ</span> <span class="bound">κ'</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span>
    <span class="keyword3"><span class="command">assume</span></span> den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span>›</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> den'<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">Π</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">Π</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="bound">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="bound">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_denotes AOT_sem_exe_denoting<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"AOT_model_term_equiv <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>"</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_term_equiv_rel_equiv<span class="main">[</span><span class="operator">OF</span> den<span class="main">,</span> <span class="operator">OF</span> den'<span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">argo</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">{</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">}</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="keyword1"><span class="command">using</span></span> den den' 0 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span>AOT_lambda <span class="free">φ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_lambda_denotes<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">specification</span></span> <span class="main">(</span><span class="quoted">AOT_lambda0</span><span class="main">)</span>
  AOT_sem_lambda0<span class="main">:</span> <span class="quoted"><span class="quoted">"AOT_lambda0 <span class="free">φ</span> <span class="main">=</span> <span class="free">φ</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="bound">x</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">consts</span></span> AOT_sem_concrete <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">::</span>AOT_UnaryIndividualTerm<span class="main">&gt;</span>›</span></span>
<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_sem_concrete</span><span class="main">)</span>
  AOT_sem_concrete<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="free">w</span> <span class="main">(</span>AOT_exe AOT_sem_concrete <span class="free">κ</span><span class="main">)</span> <span class="main">=</span> AOT_model_concrete <span class="free">w</span> <span class="free">κ</span>›</span></span>
  AOT_sem_concrete_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_valid_in <span class="free">w</span> <span class="main">(</span>AOT_denotes AOT_sem_concrete<span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹Abs_rel <span class="main">(</span><span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
     <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_no_special_nondenoting AOT_model_concrete_denotes AOT_model_concrete_equiv AOT_model_regular_κ_def
                 AOT_model_proposition_choice_simp AOT_sem_exe Abs_rel_inverse AOT_model_denotes_rel_def AOT_sem_denotes<span class="main">)</span>
<span class="keyword1"><span class="command">specification</span></span><span class="main">(</span><span class="quoted">AOT_concrete</span><span class="main">)</span>
  AOT_concrete_sem<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="keyword1">E!</span><span class="main">»</span> <span class="main">=</span> AOT_sem_concrete›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>


<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_equiv_defI<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">ψ</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">φ</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"AOT_model_equiv_def <span class="free">φ</span> <span class="free">ψ</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> AOT_model_equiv_def assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_defI<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">α</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">σ</span> <span class="bound">α</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">τ</span> <span class="bound">α</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="free">σ</span> <span class="bound">α</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">α</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">¬</span><span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">σ</span> <span class="bound">α</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">¬</span><span class="main">«</span><span class="free">τ</span> <span class="bound">α</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="free">τ</span> <span class="free">σ</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes AOT_sem_eq AOT_sem_not
  <span class="keyword1"><span class="command">using</span></span> AOT_model_id_def<span class="main">[</span><span class="operator">THEN</span> iffD2<span class="main">]</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_def2I<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">α</span> <span class="bound">β</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">σ</span> <span class="bound">α</span> <span class="bound">β</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">τ</span> <span class="bound">α</span> <span class="bound">β</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="free">σ</span> <span class="bound">α</span> <span class="bound">β</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">α</span> <span class="bound">β</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">¬</span><span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">σ</span> <span class="bound">α</span> <span class="bound">β</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">¬</span><span class="main">«</span><span class="free">τ</span> <span class="bound">α</span> <span class="bound">β</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="main">(</span>case_prod <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>case_prod <span class="free">σ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> AOT_sem_id_defI<span class="main">)</span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_conj AOT_sem_not AOT_sem_eq AOT_sem_denotes
      AOT_model_denotes_prod_def<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_defE1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="free">τ</span> <span class="free">σ</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">σ</span> <span class="free">α</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">τ</span> <span class="free">α</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="free">σ</span> <span class="free">α</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_id_def AOT_sem_denotes AOT_sem_eq<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_defE2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="free">τ</span> <span class="free">σ</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">σ</span> <span class="free">α</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">τ</span> <span class="free">α</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_id_def AOT_sem_denotes AOT_sem_eq<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_def0I<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">σ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">τ</span> <span class="main">=</span> <span class="free">σ</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">¬</span><span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">σ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">¬</span><span class="free">τ</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="main">(</span>case_unit <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>case_unit <span class="free">σ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> AOT_sem_id_defI<span class="main">)</span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_conj AOT_sem_eq AOT_sem_not AOT_sem_denotes AOT_model_denotes_unit_def case_unit_Unity<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_def0E1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="main">(</span>case_unit <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>case_unit <span class="free">σ</span><span class="main">)</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">σ</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">τ</span> <span class="main">=</span> <span class="free">σ</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> AOT_sem_id_defE1 assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> case_unit_Unity<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_def0E2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="main">(</span>case_unit <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>case_unit <span class="free">σ</span><span class="main">)</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">σ</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">τ</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_id_defE2 assms<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> assms<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> case_unit_Unity<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_id_def0E3<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_model_id_def <span class="main">(</span>case_unit <span class="free">τ</span><span class="main">)</span> <span class="main">(</span>case_unit <span class="free">σ</span><span class="main">)</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">σ</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">τ</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> AOT_sem_id_def0E1<span class="main">[</span><span class="operator">OF</span> assms<span class="main">]</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_eq AOT_sem_denotes<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_ordinary_def_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes AOT_model_lambda_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_dia AOT_concrete_sem AOT_model_concrete_equiv AOT_sem_concrete AOT_sem_denotes<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_abstract_def_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes AOT_model_lambda_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_dia AOT_concrete_sem AOT_model_concrete_equiv AOT_sem_concrete AOT_sem_denotes AOT_sem_not<span class="main">)</span>

<span class="keyword1"><span class="command">class</span></span> AOT_Individual <span class="main">=</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_sem_proj_id</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> 𝗈›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_sem_proj_id_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span> <span class="main">=</span> <span class="free">Π'</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">α</span> <span class="main">(</span><span class="main">«</span><span class="free">AOT_sem_proj_id</span> <span class="bound">α</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">τ</span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">τ</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">)</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_proj_id_refl<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_sem_proj_id</span> <span class="free">τ</span> <span class="free">φ</span> <span class="free">φ</span><span class="main">»</span><span class="main">]</span>›</span></span>

<span class="keyword1"><span class="command">class</span></span> AOT_UnaryIndividual <span class="main">=</span> AOT_Individual <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_sem_unary_proj_id<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_sem_proj_id <span class="free">κ</span> <span class="free">φ</span> <span class="free">ψ</span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">ψ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">»</span>›</span></span>

<span class="keyword1"><span class="command">instantiation</span></span> κ <span class="main">::</span> <span class="quoted">AOT_UnaryIndividual</span>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_sem_proj_id_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> <span class="main">(</span>κ <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span>κ <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">‹<span class="free">AOT_sem_proj_id_κ</span> <span class="free"><span class="bound"><span class="entity">κ</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main">{</span><span class="bound">z</span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="free"><span class="bound"><span class="entity">ψ</span></span></span><span class="main">{</span><span class="bound">z</span><span class="main">}</span><span class="main">]</span><span class="main">»</span>›</span></span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="skolem">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">α</span> <span class="main">(</span><span class="main">«</span>AOT_sem_proj_id <span class="bound">α</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">τ</span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">τ</span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">τ</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_proj_id_κ_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_eq AOT_sem_conj AOT_sem_denotes AOT_sem_forall AOT_sem_lambda_eta<span class="main">)</span>
       <span class="main">(</span><span class="operator">metis</span> AOT_sem_denotes AOT_model_denoting_ex AOT_sem_eq AOT_sem_lambda_eta<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_sem_proj_id <span class="skolem">κ</span> <span class="skolem">φ</span> <span class="skolem">ψ</span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">ψ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">»</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span> <span class="skolem">ψ</span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_proj_id_κ_def <span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">τ</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="skolem">τ</span> <span class="skolem">φ</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">τ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">v</span> <span class="skolem">φ</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_proj_id_κ_def AOT_sem_eq<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">instantiation</span></span> prod <span class="main">::</span> <span class="main">(</span><span class="quoted"><span class="quoted">"<span class="main">{</span>AOT_UnaryIndividual<span class="main">,</span> AOT_UnaryIndividualTerm<span class="main">}</span>"</span></span><span class="main">,</span> <span class="quoted">AOT_Individual</span><span class="main">)</span> <span class="quoted">AOT_Individual</span>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_sem_proj_id_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_sem_proj_id_prod</span> <span class="main">≡</span> <span class="main">λ</span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span> <span class="bound">φ</span> <span class="bound">ψ</span> <span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">«</span><span class="bound">φ</span> <span class="main">(</span><span class="bound">z</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">«</span><span class="bound">ψ</span> <span class="main">(</span><span class="bound">z</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span><span class="main">»</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">«</span>AOT_sem_proj_id <span class="bound">y</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">a</span> <span class="main">.</span> <span class="bound">φ</span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">a</span> <span class="main">.</span> <span class="bound">ψ</span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">a</span><span class="main">)</span><span class="main">)</span><span class="main">»</span><span class="main">»</span>›</span></span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">&gt;</span>›</span></span>
  <span class="keyword1"><span class="command">have</span></span> AOT_meta_proj_denotes1<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> AOT_exe <span class="skolem">Π</span> <span class="main">(</span><span class="bound">z</span><span class="main">,</span> <span class="skolem">β</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">&gt;</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">β</span>
    <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_denotes_rel.rep_eq
    <span class="comment1">(* TODO *)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> Abs_rel_inverse AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_sem_denotes AOT_sem_exe_denoting <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span><span class="skolem">Π</span><span class="main">::</span><span class="main">&lt;</span><span class="tfree">'a</span><span class="main">::</span><span class="main">{</span>AOT_UnaryIndividualTerm<span class="main">,</span>AOT_UnaryIndividual<span class="main">}</span> <span class="main">×</span> <span class="tfree">'b</span><span class="main">::</span>AOT_Individual<span class="main">&gt;</span><span class="main">)</span>›</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_denotes_prod_def AOT_sem_exe case_prodD<span class="main">)</span>
    <span class="keyword1"><span class="command">using</span></span> AOT_model_no_special_nondenoting <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">&gt;</span>›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> Π_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> α_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_exe <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_exe <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="skolem">y</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹AOT_model_term_equiv <span class="skolem">x</span> <span class="skolem">y</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="skolem">y</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> that AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq AOT_sem_denotes AOT_sem_exe_denoting Π_denotes<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">w</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> that AOT_model_denotes_prod_def AOT_sem_exe AOT_sem_denotes case_prodD<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
      <span class="keyword3"><span class="command">assume</span></span> x_special<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_regular <span class="skolem">x</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> prod_special<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>AOT_model_regular <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="skolem">x</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_regular_prod_def<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="main">(</span>Rep_rel <span class="skolem">Π</span><span class="main">)</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="skolem">x</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> AOT_model_denotes_rel.rep_eq Π_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_irregular <span class="main">(</span>Rep_rel <span class="skolem">Π</span><span class="main">)</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="skolem">x</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> Π_denotes x_special prod_special
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">Π</span></span> <span class="quoted"><span class="skolem">x</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> AOT_model_irregular_prod.induct<span class="main">)</span>
           <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> α_denotes AOT_model_irregular_nondenoting AOT_model_denotes_rel.rep_eq
                        AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_term_equiv_eps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span>
                 <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> AOT_model_irregular_eqI<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_exe <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">=</span> AOT_model_irregular <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> AOT_exe <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="skolem">x</span>›</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span> <span class="operator">OF</span> Π_denotes<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> AOT_exe <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inverse AOT_model_denotes_rel.rep_eq<span class="main">)</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> AOT_meta_proj_denotes2 <span class="main">=</span> this
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> Π_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> Π'_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span>›</span></span>
    <span class="keyword1"><span class="command">have</span></span> Π_proj2_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">α</span> <span class="main">⟹</span> AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">α</span>
      <span class="keyword1"><span class="command">using</span></span> AOT_meta_proj_denotes2<span class="main">[</span><span class="operator">OF</span> Π_denotes<span class="main">]</span> AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span><span class="operator">OF</span> Π_denotes<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">have</span></span> Π'_proj2_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">α</span> <span class="main">⟹</span> AOT_model_denotes <span class="main">(</span>Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">α</span>
      <span class="keyword1"><span class="command">using</span></span> AOT_meta_proj_denotes2<span class="main">[</span><span class="operator">OF</span> Π'_denotes<span class="main">]</span> AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span><span class="operator">OF</span> Π'_denotes<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span>›</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> beta_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_prod_def<span class="main">)</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">z</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_model_lambda_denotes<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> iffD2<span class="main"><span class="main">]</span></span><span class="main">)</span>
           <span class="main">(</span><span class="operator">metis</span> AOT_sem_exe_denoting AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq AOT_sem_denotes AOT_sem_exe_denoting Π_denotes<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">z</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">z</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span>›</span></span><span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">(</span><span class="main">λ</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> beta_denotes
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> AOT_sem_proj_id_refl<span class="main"><span class="main">[</span></span><span class="operator">unfolded</span> AOT_sem_denotes<span class="main"><span class="main">]</span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_eq AOT_model_lambda_denotes<span class="main">)</span>
           <span class="main">(</span><span class="operator">metis</span> AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq AOT_sem_exe AOT_sem_exe_denoting Π'_denotes<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_proj_id_prod_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_conj AOT_sem_eq<span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">α</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="skolem">α</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">α</span>
      <span class="keyword1"><span class="command">hence</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span> <span class="main">⟹</span> AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">⟹</span>
             AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">z</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span> <span class="main">∧</span>
             AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">z</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span> <span class="main">∧</span>
             <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">z</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">z</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span> <span class="main">∧</span>
             <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">(</span><span class="main">λ</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_proj_id_prod_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_conj AOT_sem_eq AOT_model_denotes_prod_def<span class="main">)</span>
      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">αden</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem"><span class="skolem">βden</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span> <span class="keyword2"><span class="keyword">where</span></span> αden<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">αden</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> βden<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">βden</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> AOT_model_denoting_ex <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span>
        <span class="keyword3"><span class="command">assume</span></span> αdenotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">(</span><span class="main">λ</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>"</span></span>
          <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="keyword1"><span class="command">using</span></span> 0 <span class="keyword1"><span class="command">using</span></span> αdenotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="skolem">β</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="skolem">β</span> <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">β</span>
          <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span> <span class="operator">OF</span> Π_denotes<span class="main">]</span>
                    AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span> <span class="operator">OF</span> Π'_denotes<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span>
          <span class="keyword1"><span class="command">using</span></span> AOT_sem_proj_id_prop<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="skolem">v</span></span> <span class="quoted"><span class="quoted">"Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span> <span class="quoted"><span class="quoted">"Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z</span><span class="main">)</span><span class="main">)</span>"</span></span><span class="main">,</span>
                  <span class="operator">simplified</span> AOT_sem_eq AOT_sem_conj AOT_sem_forall AOT_sem_denotes<span class="main">,</span> <span class="operator">THEN</span> iffD2<span class="main">]</span>
                Π_proj2_den<span class="main">[</span><span class="operator">OF</span> αdenotes<span class="main">]</span> Π'_proj2_den<span class="main">[</span><span class="operator">OF</span> αdenotes<span class="main">]</span>
          <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span> <span class="operator">OF</span> Π_denotes<span class="main">]</span>
            AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span> <span class="operator">OF</span> Π_proj2_den<span class="main"><span class="main">[</span></span><span class="operator">OF</span> αdenotes<span class="main"><span class="main">]</span></span><span class="main">]</span>
            AOT_sem_exe_denoting<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes<span class="main">,</span> <span class="operator">OF</span> Π'_proj2_den<span class="main"><span class="main">[</span></span><span class="operator">OF</span> αdenotes<span class="main"><span class="main">]</span></span><span class="main">]</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inverse<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">β</span><span class="main">)</span> <span class="main">=</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">β</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">β</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inject<span class="main"><span class="main">[</span></span><span class="operator">simplified</span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="operator">meson</span>
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> αdenotes <span class="main">=</span> this
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
        <span class="keyword3"><span class="command">assume</span></span> βden<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span>›</span></span>
        <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> AOT_exe <span class="skolem">Π</span> <span class="main">(</span><span class="bound">x</span><span class="main">,</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> Abs_rel <span class="main">(</span><span class="main">λ</span><span class="bound">κ</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">)</span>›</span></span>
          <span class="keyword1"><span class="command">using</span></span> AOT_sem_lambda_denoting<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="skolem">v</span></span> <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">κ</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span>"</span></span><span class="main">]</span>
          <span class="keyword1"><span class="command">using</span></span> AOT_sem_lambda_denoting<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="skolem">v</span></span> <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">κ</span><span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span>"</span></span><span class="main">]</span>
          <span class="keyword1"><span class="command">using</span></span> AOT_meta_proj_denotes1<span class="main">[</span><span class="operator">OF</span> Π_denotes<span class="main">]</span> AOT_meta_proj_denotes1<span class="main">[</span><span class="operator">OF</span> Π'_denotes<span class="main">]</span> 0<span class="main">[</span><span class="operator">OF</span> αden<span class="main">,</span> <span class="operator">OF</span> βden<span class="main">]</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes<span class="main">)</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span> <span class="main">=</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">x</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span>
          <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> Abs_rel_inject<span class="main">)</span>
             <span class="main">(</span><span class="operator">metis</span> AOT_sem_exe_denoting AOT_sem_denotes Π'_denotes Π_denotes<span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> βdenotes <span class="main">=</span> this
      <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">α</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">β</span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span>
        <span class="keyword3"><span class="command">assume</span></span> nospecial_αβ<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_regular <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="skolem">β</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"AOT_model_regular <span class="skolem">β</span> <span class="main">∧</span> <span class="main">(</span>AOT_model_denotes <span class="skolem">α</span> <span class="main">∨</span> AOT_model_denotes <span class="skolem">β</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_regular_prod_def
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="skolem">α</span> <span class="main">∨</span> AOT_model_denotes <span class="skolem">β</span>"</span></span>
            <span class="keyword1"><span class="command">using</span></span> nospecial_αβ <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_regular_prod_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span><span class="skolem">β</span><span class="main">)</span> <span class="main">=</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span><span class="skolem">β</span><span class="main">)</span>"</span></span>
              <span class="keyword1"><span class="command">using</span></span> αdenotes βdenotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>AOT_model_regular <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="skolem">β</span><span class="main">)</span> <span class="main">⟹</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="skolem">β</span><span class="main">)</span> <span class="main">=</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="skolem">β</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">α</span> <span class="skolem">β</span>
        <span class="keyword1"><span class="command">using</span></span> Π_denotes<span class="main">[</span><span class="operator">unfolded</span> AOT_model_denotes_rel.rep_eq<span class="main">,</span> <span class="operator">THEN</span> conjunct2<span class="main">,</span> <span class="operator">THEN</span> conjunct2<span class="main">,</span> <span class="operator">THEN</span> spec<span class="main">,</span> <span class="operator">THEN</span> mp<span class="main">,</span> <span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">α</span><span class="main">,</span><span class="skolem">β</span><span class="main">)</span>"</span></span><span class="main">]</span>
        <span class="keyword1"><span class="command">using</span></span> Π'_denotes<span class="main">[</span><span class="operator">unfolded</span> AOT_model_denotes_rel.rep_eq<span class="main">,</span> <span class="operator">THEN</span> conjunct2<span class="main">,</span> <span class="operator">THEN</span> conjunct2<span class="main">,</span> <span class="operator">THEN</span> spec<span class="main">,</span> <span class="operator">THEN</span> mp<span class="main">,</span> <span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">α</span><span class="main">,</span><span class="skolem">β</span><span class="main">)</span>"</span></span><span class="main">]</span>
        <span class="keyword1"><span class="command">using</span></span> AOT_model_irregular_eqI<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"Rep_rel <span class="skolem">Π</span>"</span></span> <span class="quoted"><span class="quoted">"Rep_rel <span class="skolem">Π'</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">α</span><span class="main">,</span><span class="skolem">β</span><span class="main">)</span>"</span></span><span class="main">]</span>
        <span class="keyword1"><span class="command">using</span></span> AOT_model_irregular_nondenoting <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">hence</span></span> neither_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">¬</span>AOT_model_denotes <span class="skolem">α</span> <span class="main">⟹</span> <span class="main">¬</span>AOT_model_denotes <span class="skolem">β</span> <span class="main">⟹</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="skolem">β</span><span class="main">)</span> <span class="main">=</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="skolem">α</span><span class="main">,</span> <span class="skolem">β</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">α</span> <span class="skolem">β</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">β</span> <span class="bound">α</span><span class="main">.</span> AOT_model_regular <span class="main">(</span><span class="bound">α</span><span class="main">,</span> <span class="bound">β</span><span class="main">)</span> <span class="main">⟹</span> Rep_rel <span class="skolem">Π</span> <span class="main">(</span><span class="bound">α</span><span class="main">,</span> <span class="bound">β</span><span class="main">)</span> <span class="main">=</span> Rep_rel <span class="skolem">Π'</span> <span class="main">(</span><span class="bound">α</span><span class="main">,</span> <span class="bound">β</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹Rep_rel <span class="skolem">Π</span> <span class="main">=</span> Rep_rel <span class="skolem">Π'</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> αdenotes βdenotes neither_denotes
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> Rep_rel_inject<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> iffD1<span class="main"><span class="main">]</span></span><span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span> <span class="main">=</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">κ</span> <span class="main">.</span> AOT_model_denotes <span class="bound">κ</span> <span class="main">⟶</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="bound">κ</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="skolem">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">α</span> <span class="main">(</span><span class="main">«</span>AOT_sem_proj_id <span class="bound">α</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">.</span> <span class="main">«</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_eq AOT_sem_denotes AOT_sem_forall AOT_sem_conj<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">⇒</span>𝗈›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">τ</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">τ</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">z<span class="hidden">⇩</span><sub>1</sub>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">«</span><span class="skolem">φ</span> <span class="bound">z<span class="hidden">⇩</span><sub>1</sub>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_sem_proj_id <span class="skolem">τ</span> <span class="skolem">φ</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_proj_id_prod_def
    <span class="keyword1"><span class="command">using</span></span> AOT_sem_proj_id_refl<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="skolem">v</span></span> <span class="quoted"><span class="quoted">"snd <span class="skolem">τ</span>"</span></span> <span class="quoted"><span class="quoted">"<span class="main">λ</span><span class="bound">b</span><span class="main">.</span> <span class="skolem">φ</span> <span class="main">(</span>fst <span class="skolem">τ</span><span class="main">,</span> <span class="bound">b</span><span class="main">)</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_eq AOT_sem_conj AOT_sem_denotes AOT_model_denotes_prod_def AOT_model_lambda_denotes AOT_meta_prod_equivI<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span> <span class="main">=</span> <span class="free">Π'</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">x</span><span class="main">∀</span><span class="bound">y</span><span class="main">(</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">z</span> <span class="bound">y</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">z</span> <span class="bound">y</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">x</span> <span class="bound">z</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">x</span> <span class="bound">z</span><span class="main">]</span><span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">Π</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">×</span>κ<span class="main">&gt;</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_proj_id_prop<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="quoted"><span class="free">v</span></span> <span class="quoted"><span class="free">Π</span></span> <span class="quoted"><span class="free">Π'</span></span><span class="main"><span class="main">]</span></span> AOT_sem_proj_id_prod_def AOT_sem_conj AOT_sem_denotes AOT_sem_forall AOT_sem_unary_proj_id AOT_model_denotes_prod_def<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span> <span class="main">=</span> <span class="free">Π'</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">(</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">z</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">z</span><span class="main">]</span><span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">Π</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">×</span>κ<span class="main">×</span>κ<span class="main">&gt;</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_proj_id_prop<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="quoted"><span class="free">v</span></span> <span class="quoted"><span class="free">Π</span></span> <span class="quoted"><span class="free">Π'</span></span><span class="main"><span class="main">]</span></span> AOT_sem_proj_id_prod_def AOT_sem_conj AOT_sem_denotes AOT_sem_forall AOT_sem_unary_proj_id AOT_model_denotes_prod_def<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span> <span class="main">=</span> <span class="free">Π'</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span><span class="main">∀</span><span class="bound">x<span class="hidden">⇩</span><sub>4</sub></span> <span class="main">(</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>4</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>4</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>4</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>4</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>4</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">z</span> <span class="bound">x<span class="hidden">⇩</span><sub>4</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span> <span class="bound">z</span><span class="main">]</span> <span class="main">=</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="bound">x<span class="hidden">⇩</span><sub>1</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>2</sub></span> <span class="bound">x<span class="hidden">⇩</span><sub>3</sub></span> <span class="bound">z</span><span class="main">]</span><span class="main">)</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">Π</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">×</span>κ<span class="main">×</span>κ<span class="main">×</span>κ<span class="main">&gt;</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_proj_id_prop<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="quoted"><span class="free">v</span></span> <span class="quoted"><span class="free">Π</span></span> <span class="quoted"><span class="free">Π'</span></span><span class="main"><span class="main">]</span></span> AOT_sem_proj_id_prod_def AOT_sem_conj AOT_sem_denotes AOT_sem_forall AOT_sem_unary_proj_id AOT_model_denotes_prod_def<span class="main">)</span>

<span class="keyword1"><span class="command">class</span></span> AOT_Enc <span class="main">=</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free"><span class="free"><span class="free">AOT_enc</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">::</span>AOT_IndividualTerm<span class="main">&gt;</span> <span class="main">⇒</span> 𝗈›</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="free"><span class="free"><span class="free">AOT_proj_enc</span></span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> 𝗈›</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_sem_enc_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">Π</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_enc_proj_enc<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">Π</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">«</span><span class="free">AOT_proj_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">.</span>  <span class="main">«</span><span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_proj_enc_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_proj_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_enc_nec<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">Π</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">Π</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_proj_enc_nec<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_proj_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_proj_enc</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_universal_encoder<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_enc</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">Π</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">φ</span><span class="main">{</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="free">AOT_proj_enc</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">φ</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>

<span class="comment1">(* TODO: unfortunate that this is not in AOT_syntax *)</span>
<span class="keyword1"><span class="command">AOT_syntax_print_translations</span></span>
  <span class="quoted">"_AOT_enc <span class="free">args</span> <span class="main">(</span>_AOT_lambda <span class="free">vars</span> <span class="free">φ</span><span class="main">)</span>"</span> <span class="main">&lt;=</span> <span class="quoted">"<span class="keyword1">CONST</span> AOT_enc <span class="free">args</span> <span class="main">(</span>_AOT_lambda <span class="free">vars</span> <span class="free">φ</span><span class="main">)</span>"</span>
  <span class="quoted">"_AOT_enc <span class="free">args</span> <span class="main">(</span>_explicitRelation <span class="free">Π</span><span class="main">)</span>"</span> <span class="main">&lt;=</span> <span class="quoted">"<span class="keyword1">CONST</span> AOT_enc <span class="free">args</span> <span class="free">Π</span>"</span>

<span class="keyword1"><span class="command">context</span></span> AOT_meta_syntax
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">notation</span></span> AOT_enc <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>⦃</b></span>_<span class="keyword1">,</span>_<span class="keyword1"><span class="hidden">❙</span><b>⦄</b></span>"</span><span class="main">)</span>
<span class="keyword2"><span class="keyword">end</span></span>
<span class="keyword1"><span class="command">context</span></span> AOT_no_meta_syntax
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">no_notation</span></span> AOT_enc <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>⦃</b></span>_<span class="keyword1">,</span>_<span class="keyword1"><span class="hidden">❙</span><b>⦄</b></span>"</span><span class="main">)</span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">class</span></span> AOT_UnaryEnc <span class="main">=</span> AOT_UnaryIndividualTerm <span class="main">+</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> AOT_sem_enc_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">□</span><span class="main">∀</span><span class="bound">ν</span> <span class="main">(</span><span class="bound">ν</span><span class="main">[</span><span class="free">Π</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">ν</span><span class="main">[</span><span class="free">Π'</span><span class="main">]</span><span class="main">)</span> <span class="main">→</span> <span class="free">Π</span> <span class="main">=</span> <span class="free">Π'</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_A_objects<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">∃</span><span class="bound">x</span> <span class="main">(</span><span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="free">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_unary_proj_enc<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_proj_enc <span class="free">x</span> <span class="free">ψ</span> <span class="main">=</span> AOT_enc <span class="free">x</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="free">ψ</span><span class="main">{</span><span class="bound">z</span><span class="main">}</span><span class="main">]</span><span class="main">»</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_nocoder<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">¬</span><span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="main">«</span>AOT_enc <span class="free">κ</span> <span class="free">Π</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_ind_eq<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="free">κ</span> <span class="main">=</span> <span class="free">κ'</span><span class="main">)</span> <span class="main">=</span>
       <span class="main">(</span><span class="main">(</span><span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="free">κ'</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>
      <span class="main">∨</span> <span class="main">(</span><span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="free">κ'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>

      <span class="comment1">(* only extended models *)</span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_enc_indistinguishable_all<span class="main">:</span>
          <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">⟹</span>
           <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ'</span><span class="main">]</span> <span class="main">⟹</span>
           <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="free">κ'</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
           <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span>
           <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ</span><span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="main">]</span><span class="main">)</span> <span class="main">⟹</span>
           <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ'</span><span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="main">]</span><span class="main">)</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> AOT_sem_enc_indistinguishable_ex<span class="main">:</span>
          <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">⟹</span>
           <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="free">κ'</span><span class="main">]</span> <span class="main">⟹</span>
           <span class="main">(</span><span class="main">⋀</span> <span class="bound">Π'</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="free">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="free">κ'</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
           <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span>
           <span class="main">∃</span> <span class="bound">Π'</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ</span><span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
           <span class="main">∃</span> <span class="bound">Π'</span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ'</span><span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">.</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">w</span> <span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">instantiation</span></span> κ <span class="main">::</span> <span class="quoted">AOT_Enc</span>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_enc_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> <span class="main">&lt;</span>κ<span class="main">&gt;</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_enc_κ</span> <span class="main">≡</span> <span class="keyword1">SOME</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">v</span> <span class="bound">κ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="bound">φ</span> <span class="bound">κ</span> <span class="bound">Π</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span>AOT_model_denotes <span class="bound">Π</span> <span class="main">∧</span> AOT_model_enc <span class="bound">κ</span> <span class="bound">Π</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_proj_enc_κ</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹κ <span class="main">⇒</span> <span class="main">(</span>κ <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_proj_enc_κ</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">κ</span> <span class="bound">φ</span> <span class="main">.</span> AOT_enc <span class="bound">κ</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">«</span><span class="bound">φ</span> <span class="bound">z</span><span class="main">»</span><span class="main">]</span><span class="main">»</span>›</span></span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_enc_κ_meta<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ</span><span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span>AOT_model_denotes <span class="free">κ</span> <span class="main">∧</span> AOT_model_denotes <span class="free">Π</span> <span class="main">∧</span> AOT_model_enc <span class="free">κ</span> <span class="free">Π</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="free">κ</span><span class="main">::</span><span class="quoted">κ</span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> AOT_enc_κ_ex<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">v</span> <span class="main">(</span><span class="bound">κ</span><span class="main">::</span>κ<span class="main">)</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="bound">φ</span> <span class="bound">κ</span> <span class="bound">Π</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">(</span>AOT_model_denotes <span class="bound">Π</span> <span class="main">∧</span> AOT_model_enc <span class="bound">κ</span> <span class="bound">Π</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">λ</span> <span class="bound">κ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> AOT_model_enc <span class="bound">κ</span> <span class="bound">Π</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_proposition_choice_simp AOT_model_enc_κ_def κ.case_eq_if<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> someI_ex<span class="main">[</span><span class="operator">OF</span> AOT_enc_κ_ex<span class="main">]</span> <span class="keyword1"><span class="command">unfolding</span></span> AOT_enc_κ_def
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def AOT_model_enc_κ_def κ.case_eq_if κ.distinct_disc<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_enc <span class="skolem">κ</span> <span class="skolem">Π</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes
    <span class="keyword1"><span class="command">using</span></span> AOT_enc_κ_meta <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ'</span><span class="main">.</span>  <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ'</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> enc<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> Π_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_enc_κ_meta<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> Π_eta_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">z</span><span class="main">]</span><span class="main">»</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> AOT_sem_denotes AOT_sem_eq AOT_sem_lambda_eta <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ</span><span class="main">.</span>  <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> AOT_sem_lambda_eta<span class="main">[</span><span class="operator">simplified</span> AOT_sem_denotes AOT_sem_eq<span class="main">,</span> <span class="operator">OF</span> Π_denotes<span class="main">]</span>
      <span class="keyword1"><span class="command">using</span></span> Π_eta_denotes Π_denotes
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_conj AOT_sem_denotes AOT_proj_enc_κ_def enc<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ</span><span class="main">.</span>  <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> Π_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">"AOT_model_denotes <span class="skolem">Π</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> eta_enc<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[λ</span><span class="bound">z</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">z</span><span class="main">]</span><span class="main">]</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_conj AOT_sem_denotes AOT_proj_enc_κ_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_lambda_eta<span class="main"><span class="main">[</span></span><span class="operator">simplified</span> AOT_sem_denotes AOT_sem_eq<span class="main"><span class="main">,</span></span> <span class="operator">OF</span> Π_denotes<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_enc_κ_meta AOT_sem_denotes AOT_proj_enc_κ_def<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_enc_κ_meta<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_enc_κ_meta AOT_proj_enc_κ_def<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">κ</span><span class="main">::</span>κ<span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span>  <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z</span> <span class="bound">φ</span><span class="main">{</span><span class="bound">z</span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span>  <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="bound">κ</span> <span class="bound">φ</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹ακ UNIV›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
       <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_enc_κ_meta AOT_model_enc_κ_def AOT_model_denotes_κ_def  AOT_proj_enc_κ_def<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">instantiation</span></span> κ <span class="main">::</span> <span class="quoted">AOT_UnaryEnc</span>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="skolem">Π'</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">□</span><span class="main">∀</span><span class="bound">ν</span> <span class="main">(</span><span class="bound">ν</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span> <span class="main">≡</span> <span class="bound">ν</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="main">)</span> <span class="main">→</span> <span class="skolem">Π</span> <span class="main">=</span> <span class="skolem">Π'</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_forall AOT_sem_eq AOT_sem_imp AOT_sem_equiv AOT_enc_κ_meta AOT_sem_conj AOT_sem_denotes AOT_sem_box<span class="main">)</span>
    <span class="keyword1"><span class="command">using</span></span> AOT_meta_A_objects_κ <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span><span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span> <span class="main">⇒</span> 𝗈›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">∃</span><span class="bound">x</span> <span class="main">(</span><span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span> <span class="main">&amp;</span> <span class="main">∀</span><span class="bound">F</span> <span class="main">(</span><span class="bound">x</span><span class="main">[</span><span class="bound">F</span><span class="main">]</span> <span class="main">≡</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">F</span><span class="main">}</span><span class="main">)</span><span class="main">)</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_model_A_objects<span class="main">[</span><span class="operator">of</span> <span class="quoted"><span class="quoted">"<span class="main">λ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">φ</span><span class="main">{</span><span class="bound">Π</span><span class="main">}</span><span class="main">]</span>"</span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_exists AOT_sem_conj AOT_sem_not AOT_sem_dia AOT_sem_concrete AOT_enc_κ_meta AOT_sem_equiv AOT_sem_forall<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹AOT_proj_enc <span class="skolem">x</span> <span class="skolem">ψ</span> <span class="main">=</span> AOT_enc <span class="skolem">x</span> <span class="main">(</span>AOT_lambda <span class="skolem">ψ</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">ψ</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_proj_enc_κ_def<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">¬</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_enc_κ_meta AOT_sem_concrete AOT_model_nocoder<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?ordeq</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">v</span> <span class="bound">κ</span> <span class="bound">κ'</span><span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">Π</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">κ'</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?abseq</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">‹<span class="main">λ</span><span class="bound">v</span> <span class="bound">κ</span> <span class="bound">κ'</span><span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">Π</span> <span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">κ'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span>›</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">::</span> <span class="quoted">κ</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> 0<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="skolem">κ</span> <span class="main">=</span> <span class="skolem">κ'</span>›</span></span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹is_ωκ <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> AOT_sem_lambda_beta<span class="main"><span class="main">[</span></span><span class="operator">OF</span> AOT_sem_ordinary_def_denotes<span class="main"><span class="main">,</span></span> <span class="operator">of</span> <span class="quoted"><span class="skolem">v</span></span> <span class="quoted"><span class="skolem">κ'</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"0"</span><span class="main">)</span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_dia<span class="main">)</span>
        <span class="keyword1"><span class="command">using</span></span> AOT_sem_concrete AOT_model_ω_concrete_in_some_world is_ωκ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?ordeq</span> <span class="skolem">v</span> <span class="skolem">κ</span> <span class="skolem">κ'</span>›</span></span> <span class="keyword1"><span class="command">unfolding</span></span> 0<span class="main">[</span><span class="operator">THEN</span> conjunct2<span class="main">,</span> <span class="operator">THEN</span> conjunct2<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">subst</span> AOT_sem_lambda_beta<span class="main"><span class="main">[</span></span><span class="operator">OF</span> AOT_sem_abstract_def_denotes<span class="main"><span class="main">,</span></span> <span class="operator">of</span> <span class="quoted"><span class="skolem">v</span></span> <span class="quoted"><span class="skolem">κ'</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quoted">"0"</span><span class="main">)</span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_not AOT_sem_dia<span class="main">)</span>
        <span class="keyword1"><span class="command">using</span></span> AOT_sem_concrete is_ακ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?abseq</span> <span class="skolem">v</span> <span class="skolem">κ</span> <span class="skolem">κ'</span>›</span></span> <span class="keyword1"><span class="command">unfolding</span></span> 0<span class="main">[</span><span class="operator">THEN</span> conjunct2<span class="main">,</span> <span class="operator">THEN</span> conjunct2<span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?ordeq</span> <span class="skolem">v</span> <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">∨</span> <span class="var">?abseq</span> <span class="skolem">v</span> <span class="skolem">κ</span> <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> <span class="quoted">"0"</span> AOT_sem_denotes AOT_model_denotes_κ_def κ.exhaust_disc<span class="main">)</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> ordeq<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="var">?ordeq</span> <span class="skolem">v</span> <span class="skolem">κ</span> <span class="skolem">κ'</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> κ_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> κ'_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">↓</span><span class="main">]</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_exe<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹is_ωκ <span class="skolem">κ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹is_ωκ <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_lambda_beta AOT_sem_ordinary_def_denotes κ.collapse<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> κ.exhaust_disc ordeq<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">have</span></span> denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">«</span><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> κυ <span class="bound">z</span> <span class="main">=</span> κυ <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes AOT_model_lambda_denotes
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_κ_def<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">«</span><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> κυ <span class="bound">z</span> <span class="main">=</span> κυ <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z</span> <span class="main">«</span><span class="keyword1">ε<span class="hidden">⇩</span><sub>𝗈</sub></span> <span class="bound">w</span> <span class="main">.</span> κυ <span class="bound">z</span> <span class="main">=</span> κυ <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> ordeq <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">κ</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">κ'</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="skolem">κ</span> <span class="main">=</span> <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_lambda_beta<span class="main">[</span><span class="operator">OF</span> denotes<span class="main">,</span> <span class="operator">OF</span> κ_denotes<span class="main">]</span> AOT_sem_lambda_beta<span class="main">[</span><span class="operator">OF</span> denotes<span class="main">,</span> <span class="operator">OF</span> κ'_denotes<span class="main">]</span>
      <span class="keyword1"><span class="command">using</span></span> κ'_denotes <span class="quoted"><span class="quoted">‹is_ωκ <span class="skolem">κ'</span>›</span></span> <span class="quoted"><span class="quoted">‹is_ωκ <span class="skolem">κ</span>›</span></span> is_ωκ_def AOT_model_proposition_choice_simp <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="var">?abseq</span> <span class="skolem">v</span> <span class="skolem">κ</span> <span class="skolem">κ'</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> κ_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> κ'_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">↓</span><span class="main">]</span>›</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_exe<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>is_ωκ <span class="skolem">κ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span>is_ωκ <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_sem_concrete AOT_sem_dia AOT_sem_exe AOT_sem_lambda_beta AOT_sem_not κ.collapse<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">v</span> <span class="bound">Π</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span>›</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_sem_denotes AOT_model_denotes_κ_def κ.exhaust_disc κ_denotes κ'_denotes<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="skolem"><span class="skolem">y</span></span> <span class="keyword2"><span class="keyword">where</span></span> κ_def<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">κ</span> <span class="main">=</span> ακ <span class="skolem">x</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> κ'_def<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">κ'</span> <span class="main">=</span> ακ <span class="skolem">y</span>"</span></span>
      <span class="keyword1"><span class="command">using</span></span> is_ακ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">r</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span> <span class="main">∈</span> <span class="skolem">x</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="main">«</span>urrel_to_rel <span class="skolem">r</span><span class="main">»</span><span class="main">]</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> κ_def
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_enc_κ_meta
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_enc_κ_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def<span class="main">)</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Quotient_def urrel_quotient<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="main">«</span>urrel_to_rel <span class="skolem">r</span><span class="main">»</span><span class="main">]</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> AOT_enc_κ_meta <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">v</span> <span class="bound">Π</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span> <span class="main">∈</span> <span class="skolem">y</span>›</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> κ'_def
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_enc_κ_meta
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_enc_κ_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def<span class="main">)</span>
        <span class="keyword1"><span class="command">using</span></span> Quotient_abs_rep urrel_quotient <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">r</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span> <span class="main">∈</span> <span class="skolem">y</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="main">«</span>urrel_to_rel <span class="skolem">r</span><span class="main">»</span><span class="main">]</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> κ'_def
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_enc_κ_meta
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_enc_κ_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def<span class="main">)</span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">)</span></span> AOT_rel_equiv_def Quotient_def urrel_quotient<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="main">«</span>urrel_to_rel <span class="skolem">r</span><span class="main">»</span><span class="main">]</span><span class="main">]</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> AOT_enc_κ_meta <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">v</span> <span class="bound">Π</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="skolem">r</span> <span class="main">∈</span> <span class="skolem">x</span>›</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> κ_def
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_enc_κ_meta
        <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_enc_κ_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def<span class="main">)</span>
        <span class="keyword1"><span class="command">using</span></span> Quotient_abs_rep urrel_quotient <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">x</span> <span class="main">=</span> <span class="skolem">y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="skolem">κ</span> <span class="main">=</span> <span class="skolem">κ'</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> κ'_def κ'_denotes κ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="skolem">κ</span> <span class="main">=</span> <span class="skolem">κ'</span><span class="main">)</span> <span class="main">=</span>
       <span class="main">(</span><span class="main">(</span><span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span><span class="main">)</span><span class="main">)</span>
      <span class="main">∨</span> <span class="main">(</span><span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">v</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_sem_denotes
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
<span class="comment1">(* Only extended model *)</span>
<span class="comment1">(* TODO: brush up proof *)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_exe AOT_sem_lambda_beta AOT_sem_not κ.collapse<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> κ.exhaust_disc<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> κ_abs<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_ακ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">have</span></span> κ_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def κ.distinct_disc<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ</span>›</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ'</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_exe AOT_sem_lambda_beta AOT_sem_not κ.collapse<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> κ.exhaust_disc<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> κ'_abs<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ'</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_ακ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">have</span></span> κ'_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ'</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_denotes_κ_def κ.distinct_disc<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ'</span>›</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span> <span class="skolem">w</span>
  <span class="keyword1"><span class="command">hence</span></span> indist<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ'</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span> <span class="skolem">v</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_exe_denoting<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> κ_enc_cond<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">⋀</span> <span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span>
  <span class="keyword3"><span class="command">assume</span></span> Π_den'<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> Π_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_sem_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span>
    <span class="keyword3"><span class="command">assume</span></span> Π'_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> Π'_den'<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π'</span><span class="main">↓</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">x</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">x</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">w</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹is_ωκ <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>z3<span class="main"><span class="main">)</span></span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_exe AOT_sem_lambda_beta κ.exhaust_disc is_ακ_def<span class="main">)</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">x</span></span> <span class="keyword2"><span class="keyword">where</span></span> x_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">=</span> ωκ <span class="skolem">x</span>›</span></span>
        <span class="keyword1"><span class="command">using</span></span> is_ωκ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span> <span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span>›</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_ω_concrete_in_some_world<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="main">(</span>ωκ <span class="skolem">x</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="keyword1"><span class="command">using</span></span> 1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">unfolding</span></span> x_prop
        <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_exe AOT_sem_denotes AOT_model_denotes_κ_def Π'_den Π_den<span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> 2 <span class="main">=</span> this
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> κ_enc_cond<span class="main">[</span><span class="operator">OF</span> Π'_den'<span class="main">,</span> <span class="operator">OF</span> 2<span class="main">]</span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_enc <span class="skolem">κ</span> <span class="skolem">Π'</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> AOT_enc_κ_meta <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> κ_enc_cond <span class="main">=</span> this
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span> <span class="main">⟹</span>
       <span class="main">(</span><span class="main">⋀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span> <span class="main">⟹</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span><span class="main">)</span> <span class="main">⟹</span> AOT_model_enc <span class="skolem">κ</span> <span class="skolem">Π'</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">assume</span></span> Π'_den'<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π'</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> Π'_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_sem_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">assume</span></span> ord_indist<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="skolem">w</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">w</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="main">::</span> <span class="quoted">κ</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> AOT_model_concrete_denotes AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_lambda_beta AOT_sem_ordinary_def_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> ord_indist <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span> 
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_exe_denoting Π'_den' Π_den'<span class="main">)</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> ord_indist <span class="main">=</span> this
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_enc <span class="skolem">κ'</span> <span class="skolem">Π'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_model_enc_indistinguishable_all<span class="main">[</span><span class="operator">OF</span> κ_den<span class="main">,</span> <span class="operator">OF</span> κ_abs<span class="main">,</span> <span class="operator">OF</span> κ'_den<span class="main">,</span> <span class="operator">OF</span> κ'_abs<span class="main">,</span> <span class="operator">OF</span> Π_den<span class="main">]</span>
          indist κ_enc_cond Π'_den ord_indist <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_enc_κ_meta Π'_den κ'_den <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ</span> <span class="skolem">κ'</span> <span class="main">::</span> <span class="quoted">κ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span> <span class="skolem">Π'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span>κ<span class="main">&gt;</span>›</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_exe AOT_sem_lambda_beta AOT_sem_not κ.collapse<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> κ.exhaust_disc<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> κ_abs<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_ακ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">have</span></span> κ_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_denotes_κ_def κ.distinct_disc<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ</span>›</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ'</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_exe AOT_sem_lambda_beta AOT_sem_not κ.collapse<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> κ.exhaust_disc<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> κ'_abs<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">¬</span><span class="main">(</span><span class="main">∃</span> <span class="bound">w</span> <span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ'</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_ακ_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">have</span></span> κ'_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">κ'</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_denotes_κ_def κ.distinct_disc<span class="main"><span class="main">(</span></span>6<span class="main"><span class="main">)</span></span> <span class="quoted"><span class="quoted">‹is_ακ <span class="skolem">κ'</span>›</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ'</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span> <span class="skolem">w</span>
  <span class="keyword1"><span class="command">hence</span></span> indist<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ'</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">Π'</span> <span class="skolem">v</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_exe_denoting<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> Π_den'<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">hence</span></span> Π_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_sem_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Π'</span><span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Π'</span></span> <span class="keyword2"><span class="keyword">where</span></span>
      Π'_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π'</span><span class="main">↓</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span>
      Π'_enc<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span>
      Π'_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_enc_κ_meta Π'_enc <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹AOT_model_enc <span class="skolem">κ</span> <span class="skolem">Π'</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_enc_κ_meta Π'_enc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">)</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span> <span class="skolem">v</span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span>
      <span class="keyword1"><span class="command">using</span></span> AOT_model_concrete_denotes AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_lambda_beta AOT_sem_ordinary_def_denotes <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π'</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span> <span class="keyword1"><span class="command">using</span></span> Π'_prop <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π'</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">»</span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_exe_denoting Π'_den Π_den'<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Π'</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">∧</span> AOT_model_enc <span class="skolem">κ</span> <span class="bound">Π'</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Π'</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π'</span> <span class="main">∧</span> AOT_model_enc <span class="skolem">κ'</span> <span class="bound">Π'</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">v</span> <span class="bound">x</span><span class="main">.</span> <span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="bound">x</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="bound">Π'</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_model_enc_indistinguishable_ex<span class="main">[</span><span class="operator">OF</span> κ_den<span class="main">,</span> <span class="operator">OF</span> κ_abs<span class="main">,</span> <span class="operator">OF</span> κ'_den<span class="main">,</span> <span class="operator">OF</span> κ'_abs<span class="main">,</span> <span class="operator">OF</span> Π_den<span class="main">]</span>
          indist <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Π''</span></span> <span class="keyword2"><span class="keyword">where</span></span>
      Π''_den<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_denotes <span class="skolem">Π''</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> Π''_enc<span class="main">:</span> <span class="quoted"><span class="quoted">‹AOT_model_enc <span class="skolem">κ'</span> <span class="skolem">Π''</span>›</span></span>
      <span class="keyword2"><span class="keyword">and</span></span> Π''_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">x</span><span class="main">)</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π''</span> <span class="skolem">x</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>Rep_rel <span class="skolem">Π</span> <span class="skolem">x</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">x</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π''</span><span class="main">↓</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes Π''_den<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="skolem">Π''</span><span class="main">]</span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_enc_κ_meta Π''_den Π''_enc κ'_den<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟹</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π''</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">w</span><span class="main">.</span> AOT_model_concrete <span class="bound">w</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span>›</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_concrete AOT_sem_dia AOT_sem_exe AOT_sem_lambda_beta<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π''</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="skolem">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span>›</span></span>
      <span class="keyword1"><span class="command">using</span></span> Π''_prop <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_exe_denoting Π_den' calculation<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span><span class="main">)</span> 
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">Π'</span><span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">Π'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ'</span><span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="main">[</span><span class="main">«</span>AOT_sem_concrete<span class="main">»</span><span class="main">]</span><span class="bound">x</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">⟶</span> <span class="main">(</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="bound">Π'</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">w</span> <span class="main">⊨</span> <span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>0</sub></span><span class="main">]</span><span class="main">)</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">safe</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">!</span></span><span class="main"><span class="main">:</span></span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="skolem">Π''</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">instantiation</span></span> prod <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_UnaryEnc</span><span class="main">,</span> <span class="quoted">AOT_Enc</span><span class="main">)</span> <span class="quoted">AOT_Enc</span>
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_proj_enc_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> <span class="main">(</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_proj_enc_prod</span> <span class="main">≡</span> <span class="main">λ</span> <span class="main">(</span><span class="bound">κ</span><span class="main">,</span><span class="bound">κ'</span><span class="main">)</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">«</span> <span class="bound">κ</span><span class="main">[λ</span><span class="bound">ν</span> <span class="main">«</span><span class="bound">φ</span> <span class="main">(</span><span class="bound">ν</span><span class="main">,</span><span class="bound">κ'</span><span class="main">)</span><span class="main">»</span><span class="main">]</span> <span class="main">&amp;</span> <span class="main">«</span>AOT_proj_enc <span class="bound">κ'</span> <span class="main">(</span><span class="main">λ</span><span class="bound">ν</span><span class="main">.</span> <span class="bound">φ</span> <span class="main">(</span><span class="bound">κ</span><span class="main">,</span><span class="bound">ν</span><span class="main">)</span><span class="main">)</span><span class="main">»</span><span class="main">»</span>›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity"><span class="class_parameter">AOT_enc_prod</span></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span> <span class="main">⇒</span> <span class="main">&lt;</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">&gt;</span> <span class="main">⇒</span> 𝗈›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_enc_prod</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">κ</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">«</span><span class="bound">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">«</span>AOT_proj_enc <span class="bound">κ</span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">.</span>  <span class="main">«</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">»</span>›</span></span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">Π</span><span class="main">↓</span><span class="main">]</span>"</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_enc_prod_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span></span><span class="main"><span class="keyword3">;</span></span> <span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_conj AOT_sem_denotes AOT_proj_enc_prod_def<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_sem_denotes AOT_model_denotes_prod_def AOT_sem_enc_denotes AOT_sem_proj_enc_denotes case_prodI<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">Π</span><span class="main">»</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">.</span>  <span class="main">«</span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">)</span><span class="main">»</span><span class="main">]</span>›</span></span>
    <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">Π</span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_enc_prod_def <span class="keyword1"><span class="command">..</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κs</span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span> <span class="main">⟹</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="skolem">κs</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κs</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">φ</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_sem_conj AOT_sem_denotes AOT_model_denotes_prod_def
                                    AOT_sem_enc_denotes AOT_sem_proj_enc_denotes
                                    AOT_proj_enc_prod_def case_prod_unfold<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="skolem">Π</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">[</span><span class="skolem">Π</span><span class="main">]</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="skolem">Π</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_enc_prod_def AOT_sem_enc_proj_enc AOT_sem_conj AOT_sem_denotes
                                   AOT_sem_proj_enc_nec AOT_proj_enc_prod_def case_prod_unfold that<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">w</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">φ</span><span class="main">»</span><span class="main">]</span>›</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">v</span> <span class="skolem">w</span> <span class="skolem">φ</span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span>›</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>mono_tags<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> that AOT_sem_enc_proj_enc AOT_sem_conj AOT_sem_denotes
                                   AOT_sem_proj_enc_nec AOT_proj_enc_prod_def case_prod_unfold<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">v</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">κ</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'a</span></span></span> <span class="keyword2"><span class="keyword">where</span></span> a_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span>  <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_sem_universal_encoder <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span></span> <span class="main">::</span> <span class="tfree"><span class="quoted"><span class="tfree">'b</span></span></span> <span class="keyword2"><span class="keyword">where</span></span> b_prop<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">«</span><span class="bound">φ</span> <span class="bound">ν<span class="hidden">⇩</span><sub>1</sub>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span>  <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span> <span class="bound">φ</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> AOT_sem_universal_encoder <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">Π</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟹</span> AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">[</span><span class="main">«</span><span class="bound">Π</span><span class="main">»</span><span class="main">]</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">]</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_lambda_denotes
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.abs_eq AOT_sem_exe AOT_sem_exe_denoting Rep_rel_inverse<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">Π</span><span class="main">.</span> AOT_model_denotes <span class="bound">Π</span> <span class="main">⟹</span> AOT_model_denotes  <span class="main">«</span><span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">[</span><span class="main">«</span><span class="bound">Π</span><span class="main">»</span><span class="main">]</span><span class="skolem">κ</span> <span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">]</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_lambda_denotes
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_rel.rep_eq AOT_sem_denotes AOT_sem_exe_denoting<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> 1<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span>  <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="skolem">κ</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'<span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> a_prop b_prop
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_enc_κ_meta AOT_model_enc_κ_def AOT_model_denotes_κ_def
                   AOT_enc_prod_def AOT_proj_enc_prod_def AOT_sem_conj AOT_model_denotes_prod_def<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">φ</span><span class="main">.</span> AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>m</sub></span> <span class="bound">φ</span><span class="main">{</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>m</sub></span><span class="main">}</span><span class="main">]</span><span class="main">»</span> <span class="main">⟹</span> AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">«</span><span class="bound">φ</span> <span class="main">(</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">,</span> <span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span><span class="main">»</span><span class="main">]</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_lambda_denotes
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_sem_denotes AOT_model_denotes_prod_def AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> b_prop case_prodI<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">φ</span><span class="main">.</span> AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">φ</span><span class="main">{</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">»</span> <span class="main">⟹</span> AOT_model_denotes <span class="main">«</span><span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">«</span><span class="bound">φ</span> <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span> <span class="bound">z<span class="hidden">⇩</span><sub>1</sub>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">)</span><span class="main">»</span><span class="main">]</span><span class="main">»</span>›</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> AOT_model_lambda_denotes
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> AOT_sem_denotes AOT_model_denotes_prod_def AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> a_prop case_prodI<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> 2<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span><span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span><span class="main">»</span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">φ</span><span class="main">{</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span> <span class="bound">φ</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command">using</span></span> a_prop b_prop
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_enc_κ_meta AOT_model_enc_κ_def AOT_model_denotes_κ_def
                   AOT_enc_prod_def AOT_proj_enc_prod_def AOT_sem_conj AOT_model_denotes_prod_def<span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">::</span><span class="tfree">'a</span><span class="main">×</span><span class="tfree">'b</span><span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">Π</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">Π</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span>  <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">[</span><span class="bound">Π</span><span class="main">]</span><span class="main">]</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="main">«</span><span class="bound">φ</span> <span class="bound">z<span class="hidden">⇩</span><sub>1</sub>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">»</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span> <span class="main">⟶</span>  <span class="main">[</span><span class="skolem">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_proj_enc <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">φ</span><span class="main">»</span><span class="main">]</span><span class="main">)</span>›</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">rule</span> exI<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="skolem">κ</span><span class="main">,</span><span class="skolem">κ<span class="hidden">⇩</span><sub>1</sub>'κ<span class="hidden">⇩</span><sub>n</sub>'</span><span class="main">)</span>›</span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="keyword1"><span class="command">using</span></span> 1 2 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">[λ</span><span class="bound">ν</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">ν</span><span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">[λ</span><span class="bound">ν</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="bound">ν</span><span class="main">]</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>AOT_UnaryEnc"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'b</span><span class="main">::</span>AOT_UnaryEnc"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_conj AOT_enc_prod_def AOT_proj_enc_prod_def AOT_sem_unary_proj_enc<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="free">κ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">Π</span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">[λ</span><span class="bound">ν</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="bound">ν</span><span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="free">κ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">[λ</span><span class="bound">ν</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="bound">ν</span><span class="free">κ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">]</span> <span class="main">&amp;</span> <span class="free">κ<span class="hidden">⇩</span><sub>3</sub></span><span class="main">[λ</span><span class="bound">ν</span> <span class="main">[</span><span class="free">Π</span><span class="main">]</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="bound">ν</span><span class="main">]</span><span class="main">]</span>"</span></span>
  <span class="keyword2"><span class="keyword">for</span></span> <span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span> <span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span> <span class="free">κ<span class="hidden">⇩</span><sub>3</sub></span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>AOT_UnaryEnc"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_conj AOT_enc_prod_def AOT_proj_enc_prod_def AOT_sem_unary_proj_enc<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_vars_denote<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="free">α<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>α<span class="hidden">⇩</span><sub>n</sub></span><span class="main">↓</span><span class="main">]</span>"</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">class</span></span> AOT_κs <span class="main">=</span> AOT_IndividualTerm <span class="main">+</span> AOT_Individual <span class="main">+</span> AOT_Enc
<span class="keyword1"><span class="command">class</span></span> AOT_κ <span class="main">=</span> AOT_κs <span class="main">+</span> AOT_UnaryIndividualTerm <span class="main">+</span> AOT_UnaryIndividual <span class="main">+</span> AOT_UnaryEnc

<span class="keyword1"><span class="command">instance</span></span> κ <span class="main">::</span> <span class="quoted">AOT_κ</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span>
<span class="keyword1"><span class="command">instance</span></span> prod <span class="main">::</span> <span class="main">(</span><span class="quoted">AOT_κ</span><span class="main">,</span> <span class="quoted">AOT_κs</span><span class="main">)</span> <span class="quoted">AOT_κs</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">standard</span>

<span class="keyword1"><span class="command">AOT_register_type_constraints</span></span>
  Individual<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">_</span><span class="main">::</span>AOT_κ›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">_</span><span class="main">::</span>AOT_κs›</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  Relation<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">&lt;</span><span class="main">_</span><span class="main">::</span>AOT_κs<span class="main">&gt;</span>›</span></span>

<span class="keyword1"><span class="command">AOT_define</span></span> AOT_ordinary <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹Π›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">O!</span></span>›</span><span class="main">)</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">O!</span> <span class="keyword1">=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="keyword1">E!</span><span class="bound">x</span><span class="main">]</span>›</span></span>
<span class="keyword1"><span class="command">AOT_define</span></span> AOT_abstract <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="quoted">‹Π›</span></span></span> <span class="main">(</span><span class="quoted">‹<span class="keyword1"><span class="keyword1">A!</span></span>›</span><span class="main">)</span> <span class="quoted"><span class="quoted">‹<span class="keyword1">A!</span> <span class="keyword1">=<span class="hidden">⇩</span><sub>d</sub><span class="hidden">⇩</span><sub>f</sub></span> <span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="keyword1">E!</span><span class="bound">x</span><span class="main">]</span>›</span></span>

<span class="keyword1"><span class="command">context</span></span> AOT_meta_syntax
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">notation</span></span> AOT_ordinary <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>O</b><span class="hidden">❙</span><b>!</b></span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">notation</span></span> AOT_abstract <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>A</b><span class="hidden">❙</span><b>!</b></span>"</span><span class="main">)</span>
<span class="keyword2"><span class="keyword">end</span></span>
<span class="keyword1"><span class="command">context</span></span> AOT_no_meta_syntax
<span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">no_notation</span></span> AOT_ordinary <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>O</b><span class="hidden">❙</span><b>!</b></span>"</span><span class="main">)</span>
<span class="keyword1"><span class="command">no_notation</span></span> AOT_abstract <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>A</b><span class="hidden">❙</span><b>!</b></span>"</span><span class="main">)</span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_ordinary<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">«</span><span class="keyword1">O!</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x</span> <span class="main">◇</span><span class="keyword1">E!</span><span class="bound">x</span><span class="main">]</span><span class="main">»</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> AOT_ordinary<span class="main">[</span><span class="operator">THEN</span> AOT_sem_id_def0E1<span class="main">]</span>  AOT_sem_ordinary_def_denotes AOT_concrete_sem
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_eq<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_abstract<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">«</span><span class="keyword1">A!</span><span class="main">»</span> <span class="main">=</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">x</span> <span class="main">¬</span><span class="main">◇</span><span class="keyword1">E!</span><span class="bound">x</span><span class="main">]</span><span class="main">»</span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> AOT_abstract<span class="main">[</span><span class="operator">THEN</span> AOT_sem_id_def0E1<span class="main">]</span>  AOT_sem_abstract_def_denotes AOT_concrete_sem
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_sem_eq<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_sem_ordinary_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="keyword1">O!</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_ordinary AOT_sem_ordinary_def_denotes AOT_concrete_sem<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_meta_abstract_denotes<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">w</span> <span class="main">⊨</span> <span class="keyword1">A!</span><span class="main">↓</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_abstract AOT_sem_abstract_def_denotes AOT_concrete_sem<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_model_abstract_ακ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">a</span> <span class="main">.</span> <span class="free">κ</span> <span class="main">=</span> ακ <span class="bound">a</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="keyword1">A!</span><span class="free">κ</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> that<span class="main">[</span><span class="operator">unfolded</span> AOT_sem_abstract<span class="main">,</span> <span class="operator">simplified</span> AOT_meta_abstract_denotes<span class="main"><span class="main">[</span></span><span class="operator">unfolded</span> AOT_sem_abstract<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> AOT_sem_lambda_beta<span class="main"><span class="main">,</span></span>
        <span class="operator">OF</span> that<span class="main"><span class="main"><span class="main">[</span></span></span><span class="operator">simplified</span> AOT_sem_exe<span class="main"><span class="main"><span class="main">,</span></span></span> <span class="operator">THEN</span> conjunct2<span class="main"><span class="main"><span class="main">,</span></span></span> <span class="operator">THEN</span> conjunct1<span class="main"><span class="main"><span class="main">]</span></span></span><span class="main"><span class="main">]</span></span><span class="main">]</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_not AOT_sem_dia AOT_sem_concrete AOT_concrete_sem<span class="main">)</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_denotes AOT_sem_exe κ.exhaust_disc is_ακ_def is_ωκ_def that<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_model_ordinary_ωκ<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">∃</span> <span class="bound">a</span> <span class="main">.</span> <span class="free">κ</span> <span class="main">=</span> ωκ <span class="bound">a</span>›</span></span> <span class="keyword2"><span class="keyword">if</span></span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="keyword1">O!</span><span class="free">κ</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> that<span class="main">[</span><span class="operator">unfolded</span> AOT_sem_ordinary<span class="main">,</span> <span class="operator">simplified</span> AOT_sem_ordinary_denotes<span class="main"><span class="main">[</span></span><span class="operator">unfolded</span> AOT_sem_ordinary<span class="main"><span class="main">,</span></span> <span class="operator">THEN</span> AOT_sem_lambda_beta<span class="main"><span class="main">,</span></span>
        <span class="operator">OF</span> that<span class="main"><span class="main"><span class="main">[</span></span></span><span class="operator">simplified</span> AOT_sem_exe<span class="main"><span class="main"><span class="main">,</span></span></span> <span class="operator">THEN</span> conjunct2<span class="main"><span class="main"><span class="main">,</span></span></span> <span class="operator">THEN</span> conjunct1<span class="main"><span class="main"><span class="main">]</span></span></span><span class="main"><span class="main">]</span></span><span class="main">]</span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_dia AOT_sem_concrete AOT_concrete_sem<span class="main">)</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> κ.exhaust_disc is_ακ_def is_ωκ_def is_nullκ_def<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_model_ωκ_ordinary<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="keyword1">O!</span><span class="main">«</span>ωκ <span class="free">x</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> AOT_sem_ordinary AOT_sem_ordinary_denotes<span class="main">[</span><span class="operator">unfolded</span> AOT_sem_ordinary<span class="main">,</span> <span class="operator">THEN</span> AOT_sem_lambda_beta<span class="main">]</span> AOT_sem_exe
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_concrete_sem AOT_model_ω_concrete_in_some_world AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_sem_concrete AOT_sem_denotes AOT_sem_dia<span class="main">)</span> 
<span class="keyword1"><span class="command">lemma</span></span> AOT_model_ακ_ordinary<span class="main">:</span> <span class="quoted"><span class="quoted">‹<span class="main">[</span><span class="free">v</span> <span class="main">⊨</span> <span class="keyword1">A!</span><span class="main">«</span>ακ <span class="free">x</span><span class="main">»</span><span class="main">]</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> AOT_sem_abstract AOT_meta_abstract_denotes<span class="main">[</span><span class="operator">unfolded</span> AOT_sem_abstract<span class="main">,</span> <span class="operator">THEN</span> AOT_sem_lambda_beta<span class="main">]</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> AOT_concrete_sem AOT_model_concrete_κ.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_denotes_κ_def AOT_sem_concrete AOT_sem_denotes AOT_sem_dia AOT_sem_not κ.disc<span class="main"><span class="main">(</span></span>8<span class="main"><span class="main">)</span></span><span class="main">)</span>

  
<span class="comment1">(********* TODO: this is still a mess - simplify all this and make sure it's valid ********)</span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_instance_of_cqt_2</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_κs <span class="main">⇒</span> 𝗈<span class="main">)</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_instance_of_cqt_2</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">v</span> <span class="main">.</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">[λ</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span> <span class="bound">φ</span><span class="main">{</span><span class="bound">ν<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>ν<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">↓</span><span class="main">]</span>›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_instance_of_cqt_2_exe_arg</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_κs <span class="main">⇒</span> <span class="tfree">'b</span><span class="main">::</span>AOT_κs<span class="main">)</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_instance_of_cqt_2_exe_arg</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> AOT_model_term_equiv <span class="main">(</span><span class="bound">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="main">(</span><span class="bound">φ</span> <span class="bound">y</span><span class="main">)</span>›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_instance_of_cqt_2_exe_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_κs <span class="main">⇒</span> <span class="main">&lt;</span><span class="tfree">'b</span><span class="main">::</span>AOT_κs<span class="main">&gt;</span><span class="main">)</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_instance_of_cqt_2_exe_rel</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">z</span> <span class="bound">v</span> <span class="main">.</span> AOT_model_denotes <span class="bound">x</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">y</span> <span class="main">∧</span> AOT_model_denotes <span class="bound">z</span> <span class="main">∧</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_exe <span class="main">(</span><span class="bound">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="bound">z</span><span class="main">»</span><span class="main">]</span> <span class="main">=</span> <span class="main">[</span><span class="bound">v</span> <span class="main">⊨</span> <span class="main">«</span>AOT_exe <span class="main">(</span><span class="bound">φ</span> <span class="bound">y</span><span class="main">)</span> <span class="bound">z</span><span class="main">»</span><span class="main">]</span>›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_instance_of_cqt_2_enc_arg</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_κs <span class="main">⇒</span> <span class="tfree">'b</span><span class="main">::</span>AOT_κs<span class="main">)</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_instance_of_cqt_2_enc_arg</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> AOT_enc <span class="main">(</span><span class="bound">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="bound">z</span> <span class="main">=</span> AOT_enc <span class="main">(</span><span class="bound">φ</span> <span class="bound">y</span><span class="main">)</span> <span class="bound">z</span>›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">AOT_instance_of_cqt_2_enc_rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">‹<span class="main">(</span><span class="tfree">'a</span><span class="main">::</span>AOT_κs <span class="main">⇒</span> <span class="main">&lt;</span><span class="tfree">'b</span><span class="main">::</span>AOT_κs<span class="main">&gt;</span><span class="main">)</span> <span class="main">⇒</span> bool›</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">‹<span class="free">AOT_instance_of_cqt_2_enc_rel</span> <span class="main">≡</span> <span class="main">λ</span> <span class="bound">φ</span> <span class="main">.</span> <span class="main">∀</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">.</span> AOT_model_term_equiv <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> AOT_enc <span class="bound">z</span> <span class="main">(</span><span class="bound">φ</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> AOT_enc <span class="bound">z</span> <span class="main">(</span><span class="bound">φ</span> <span class="bound">y</span><span class="main">)</span>›</span></span>

<span class="keyword1"><span class="command">syntax</span></span> AOT_instance_of_cqt_2 <span class="main">::</span> <span class="quoted"><span class="quoted">‹id_position <span class="main">⇒</span> AOT_prop›</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">INSTANCE'_OF'_CQT'_2'(</span>_<span class="keyword1">')</span>"</span><span class="main">)</span>

<span class="keyword1"><span class="command">named_theorems</span></span> AOT_instance_of_cqt_2_intro
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_const<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">α</span><span class="main">.</span> <span class="free">φ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_not<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="main">¬</span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_not<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_imp<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">ψ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span> <span class="main">→</span> <span class="free">ψ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_imp<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_box<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="main">□</span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_box<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_act<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="keyword1"><span class="hidden">❙</span><b>𝒜</b></span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_act<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_diamond<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="main">◇</span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_dia<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_conj<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">ψ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span> <span class="main">&amp;</span> <span class="free">ψ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_conj<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_disj<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">ψ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span> <span class="main">∨</span> <span class="free">ψ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_disj<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_equib<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="free">ψ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="free">φ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span> <span class="main">≡</span> <span class="free">ψ</span><span class="main">{</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_equiv<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_forall<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">α</span> <span class="main">.</span> AOT_instance_of_cqt_2 <span class="main">(</span><span class="free">Φ</span> <span class="bound">α</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="main">∀</span><span class="bound">α</span> <span class="free">Φ</span><span class="main">{</span><span class="bound">α</span><span class="main">,</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_forall<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exists<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">α</span> <span class="main">.</span> AOT_instance_of_cqt_2 <span class="main">(</span><span class="free">Φ</span> <span class="bound">α</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> <span class="main">«</span><span class="main">∃</span><span class="bound">α</span> <span class="free">Φ</span><span class="main">{</span><span class="bound">α</span><span class="main">,</span><span class="bound">τ</span><span class="main">}</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_sem_exists<span class="main">)</span>

<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe_rel<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_rel <span class="main">(</span><span class="main">λ</span> <span class="bound">x</span> <span class="main">.</span> <span class="free">Π</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_instance_of_cqt_2_exe_rel_def<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe_lambda<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">z</span> <span class="main">.</span> AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">z</span> <span class="bound">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">z</span> <span class="main">.</span> AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span> <span class="bound">z</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_rel <span class="main">(</span><span class="main">λ</span> <span class="bound">κ<span class="hidden">⇩</span><sub>1</sub>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">.</span> <span class="main">«</span><span class="main">[λ</span><span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span> <span class="free">φ</span><span class="main">{</span><span class="bound">κ<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>κ<span class="hidden">⇩</span><sub>n</sub></span><span class="main">,</span> <span class="bound">z<span class="hidden">⇩</span><sub>1</sub><span class="main">...</span>z<span class="hidden">⇩</span><sub>n</sub></span><span class="main">}</span><span class="main">]</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_exe_rel_def AOT_instance_of_cqt_2_def AOT_sem_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_lambda_beta AOT_model_lambda_denotes AOT_sem_denotes<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe_arg_self<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
   <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="bound">x</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_exe_arg_def AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_sem_lambda_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_part_equivp equivp_reflp<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe_arg_fst<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
   <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg fst›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_exe_arg_def AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_sem_lambda_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe_arg_snd<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
   <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg snd›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_exe_arg_def AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_sem_lambda_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_prod_def<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe_arg_var<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
     <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg <span class="main">(</span><span class="main">λ</span><span class="bound">x</span><span class="main">.</span> <span class="free">κ</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_exe_arg_def AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_sem_lambda_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_part_equivp equivp_reflp<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe_arg_Pair<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg <span class="free">φ</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg <span class="free">ψ</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg <span class="main">(</span><span class="main">λ</span><span class="bound">τ</span><span class="main">.</span> Pair <span class="main">(</span><span class="free">φ</span> <span class="bound">τ</span><span class="main">)</span> <span class="main">(</span><span class="free">ψ</span> <span class="bound">τ</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_exe_arg_def AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_sem_lambda_denotes
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> AOT_meta_prod_equivI<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> AOT_model_term_equiv_part_equivp equivp_transp<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_desc<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span><span class="bound">z</span><span class="main">.</span> AOT_instance_of_cqt_2 <span class="main">(</span><span class="free">Φ</span> <span class="bound">z</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg <span class="main">(</span><span class="main">λ</span> <span class="bound">κ</span> <span class="main">.</span> <span class="main">«</span><span class="keyword1"><span class="hidden">❙</span><b>ι</b></span><span class="bound">z</span><span class="main">(</span><span class="free">Φ</span><span class="main">{</span><span class="bound">z</span><span class="main">,</span><span class="bound">κ</span><span class="main">}</span><span class="main">)</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_exe_arg_def AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> AOT_model_term_equiv_part_equivp equivp_reflp<span class="main">)</span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> AOT_sem_desc_eq AOT_model_term_equiv_denotes AOT_model_term_equiv_part_equivp equivp_reflp<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_exe<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_rel <span class="free">Π</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_exe_arg <span class="free">κs</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">x</span> <span class="main">::</span> <span class="tfree">'b</span><span class="main">::</span>AOT_κs<span class="main">.</span> AOT_exe <span class="main">«</span><span class="main">[</span><span class="main">«</span><span class="free">Π</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span><span class="main">»</span> <span class="main">(</span><span class="free">κs</span> <span class="bound">x</span><span class="main">)</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_instance_of_cqt_2_exe_rel_def
            AOT_sem_not AOT_sem_box AOT_sem_act AOT_sem_dia AOT_sem_conj AOT_sem_disj
            AOT_sem_equiv AOT_sem_imp AOT_sem_forall AOT_sem_exists AOT_instance_of_cqt_2_exe_arg_def
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">meson</span> AOT_model_term_equiv_denotes AOT_model_term_equiv_rel_equiv AOT_sem_denotes AOT_sem_exe<span class="main">)</span>
<span class="keyword1"><span class="command">lemma</span></span> AOT_instance_of_cqt_2_intros_enc<span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_enc_rel <span class="free">Π</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2_enc_arg <span class="free">κs</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="bound">x</span> <span class="main">.</span> AOT_enc <span class="main">(</span><span class="free">κs</span> <span class="bound">x</span><span class="main">)</span> <span class="main">«</span><span class="main">[</span><span class="main">«</span><span class="free">Π</span> <span class="bound">x</span><span class="main">»</span><span class="main">]</span><span class="main">»</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms
  <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_def AOT_sem_denotes AOT_model_lambda_denotes AOT_instance_of_cqt_2_enc_rel_def
            AOT_sem_not AOT_sem_box AOT_sem_act AOT_sem_dia AOT_sem_conj AOT_sem_disj
            AOT_sem_equiv AOT_sem_imp AOT_sem_forall AOT_sem_exists AOT_instance_of_cqt_2_enc_arg_def
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">lemma</span></span> <span class="main">[</span><span class="operator">AOT_instance_of_cqt_2_intro</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">x</span> <span class="main">.</span> AOT_instance_of_cqt_2 <span class="main">(</span><span class="free">φ</span> <span class="bound">x</span><span class="main">)</span>›</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">‹<span class="main">⋀</span> <span class="bound">x</span> <span class="main">.</span> AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span> <span class="bound">z</span> <span class="main">.</span> <span class="free">φ</span> <span class="bound">z</span> <span class="bound">x</span><span class="main">)</span>›</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹AOT_instance_of_cqt_2 <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">x</span><span class="main">,</span><span class="bound">y</span><span class="main">)</span> <span class="main">.</span> <span class="free">φ</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> AOT_instance_of_cqt_2_def
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_model_lambda_denotes AOT_sem_denotes AOT_model_denotes_prod_def
                AOT_model_term_equiv_prod_def<span class="main">)</span> <span class="operator">blast</span>
<span class="comment1">(********************)</span>

<span class="comment1">(* Collect all theorems that are not in Main and not declared [AOT] and store them in a blacklist. *)</span>
<span class="keyword1"><span class="command">setup</span></span><span class="quoted">‹<span class="keyword1"><span class="keyword">fn</span></span> <span class="entity">thy</span> <span class="main">=&gt;</span>
<span class="keyword2"><span class="keyword">let</span></span>
<span class="keyword1"><span class="keyword">val</span></span> <span class="entity">all_facts_with_AOT_semantics</span> <span class="main">=</span>
  <span class="keyword2"><span class="keyword">let</span></span>
    <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">transfer</span> <span class="main">=</span> Global_Theory.transfer_theories <span class="entity">thy</span><span class="main">;</span>
    <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">global_facts</span> <span class="main">=</span> Global_Theory.facts_of <span class="entity">thy</span><span class="main">;</span>
  <span class="keyword2"><span class="keyword">in</span></span>
   <span class="main">(</span>Facts.dest_all <span class="main">(</span>Context.Theory <span class="entity">thy</span><span class="main">)</span> false <span class="main">[</span><span class="main">]</span> <span class="entity">global_facts</span>
   |&gt; maps Facts.selections
   |&gt; map <span class="main">(</span>apsnd <span class="entity">transfer</span><span class="main">)</span>
   |&gt; filter <span class="main">(</span>not o <span class="entity">AOT_Theorems.member</span> <span class="main">(</span>Proof_Context.init_global <span class="entity">thy</span><span class="main">)</span> o snd<span class="main">)</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">end</span></span>
<span class="keyword1"><span class="keyword">val</span></span> <span class="entity">all_facts_Main</span> <span class="main">=</span>
  <span class="keyword2"><span class="keyword">let</span></span>
    <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">transfer</span> <span class="main">=</span> Global_Theory.transfer_theories <span class="antiquoted"><span class="entity"><span class="antiquote">@{</span><span class="operator">theory</span> <a href="../../HOL/HOL/Main.html">Main</a><span class="antiquote">}</span></span></span><span class="main">;</span>
    <span class="keyword1"><span class="keyword">val</span></span> <span class="entity">global_facts</span> <span class="main">=</span> Global_Theory.facts_of <span class="antiquoted"><span class="entity"><span class="antiquote">@{</span><span class="operator">theory</span> <a href="../../HOL/HOL/Main.html">Main</a><span class="antiquote">}</span></span></span><span class="main">;</span>
  <span class="keyword2"><span class="keyword">in</span></span>
   <span class="main">(</span>Facts.dest_all <span class="main">(</span>Context.Theory <span class="antiquoted"><span class="entity"><span class="antiquote">@{</span><span class="operator">theory</span> <a href="../../HOL/HOL/Main.html">Main</a><span class="antiquote">}</span></span></span><span class="main">)</span> false <span class="main">[</span><span class="main">]</span> <span class="entity">global_facts</span>
   |&gt; maps Facts.selections
   |&gt; map <span class="main">(</span>apsnd <span class="entity">transfer</span><span class="main">)</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">end</span></span>
<span class="keyword1"><span class="keyword">val</span></span> <span class="entity">facts</span> <span class="main">=</span> filter <span class="main">(</span><span class="keyword1"><span class="keyword">fn</span></span> <span class="main">(</span><span class="entity">elem</span><span class="main">,</span><span class="main">_</span><span class="main">)</span> <span class="main">=&gt;</span> not <span class="main">(</span>List.exists <span class="main">(</span><span class="keyword1"><span class="keyword">fn</span></span> <span class="main">(</span><span class="entity">elem'</span><span class="main">,</span><span class="main">_</span><span class="main">)</span> <span class="main">=&gt;</span> <span class="entity">elem</span> <span class="main">=</span> <span class="entity">elem'</span><span class="main">)</span> <span class="entity">all_facts_Main</span><span class="main">)</span><span class="main">)</span> <span class="entity">all_facts_with_AOT_semantics</span>
<span class="keyword1"><span class="keyword">val</span></span> <span class="entity">thy</span> <span class="main">=</span> fold <span class="main">(</span><span class="keyword1"><span class="keyword">fn</span></span> <span class="entity">fact</span> <span class="main">=&gt;</span> Context.theory_map <span class="main">(</span><span class="entity">AOT_no_atp.add_thm</span> <span class="entity">fact</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>map snd <span class="entity">facts</span><span class="main">)</span> <span class="entity">thy</span>
<span class="keyword2"><span class="keyword">in</span></span> <span class="entity">thy</span> <span class="keyword2"><span class="keyword">end</span></span>
›</span>
<span class="keyword1"><span class="command">bundle</span></span> AOT_no_atp <span class="keyword2"><span class="keyword">begin</span></span> <span class="keyword1"><span class="command">declare</span></span> <span class="dynamic"><span class="dynamic">AOT_no_atp</span></span><span class="main">[</span><span class="operator">no_atp</span><span class="main">]</span> <span class="keyword2"><span class="keyword">end</span></span>
<span class="comment1">(* Can be used as: "including AOT_no_atp sledgehammer" or "sledgehammer(del: AOT_no_atp) *)</span>

<span class="comment1">(* These are merely artifacts of the defined syntax. *)</span>
<span class="keyword1"><span class="command">AOT_theorem</span></span> prod_denotesE<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">(</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">»</span><span class="main">↓</span>›</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_conj AOT_model_denotes_prod_def<span class="main">)</span>
<span class="keyword1"><span class="command">AOT_theorem</span></span> prod_denotesI<span class="main">:</span> <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">‹<span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">↓</span> <span class="main">&amp;</span> <span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">↓</span>›</span></span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">‹<span class="main">«</span><span class="main">(</span><span class="free">κ<span class="hidden">⇩</span><sub>1</sub></span><span class="main">,</span><span class="free">κ<span class="hidden">⇩</span><sub>2</sub></span><span class="main">)</span><span class="main">»</span><span class="main">↓</span>›</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> AOT_sem_denotes AOT_sem_conj AOT_model_denotes_prod_def<span class="main">)</span>

<span class="keyword1"><span class="command">AOT_register_type_constraints</span></span>
  Individual<span class="main">:</span> <span class="quoted"><span class="quoted">‹κ›</span></span> <span class="quoted"><span class="quoted">‹<span class="main">_</span><span class="main">::</span>AOT_κs›</span></span>

<span class="comment1">(*&lt;*)</span>
<span class="keyword2"><span class="keyword">end</span></span>
<span class="comment1">(*&gt;*)</span></pre>
</body>

</html>